/*! For license information please see main.81be0cc0.js.LICENSE.txt */
!function(){var e={6123:function(e,t){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var a=r.apply(null,n);a&&e.push(a)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var o in n)i.call(n,o)&&n[o]&&e.push(o)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},8041:function(e){"use strict";var t,n="object"===typeof Reflect?Reflect:null,i=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,s),i(n)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}p(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&p(e,"error",t,n)}(e,r,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,s,a,l;if(o(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"===typeof a?a=s[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=u(e))>0&&a.length>r&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=a.length,l=h,console&&console.warn&&console.warn(l)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function f(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):v(r,r.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function p(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(s){i.once&&e.removeEventListener(t,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var u=s[e];if(void 0===u)return!1;if("function"===typeof u)i(u,this,t);else{var l=u.length,h=v(u,l);for(n=0;n<l;++n)i(h[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,c(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,c(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,i,r,s,a;if(o(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9434:function(e,t,n){"use strict";var i=n(4704).default;function r(e){if(this.words=[],null!=(s=e)&&void 0!==s[Symbol.iterator]){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.add(r)}}catch(a){n.e(a)}finally{n.f()}}var s}r.prototype.add=function(e){this.resize(e),this.words[e>>>5]|=1<<e},r.prototype.flip=function(e){this.resize(e),this.words[e>>>5]^=1<<e},r.prototype.clear=function(){this.words=[]},r.prototype.remove=function(e){this.resize(e),this.words[e>>>5]&=~(1<<e)},r.prototype.isEmpty=function(e){for(var t=this.words.length,n=0;n<t;n++)if(0!==this.words[n])return!1;return!0},r.prototype.has=function(e){return 0!==(this.words[e>>>5]&1<<e)},r.prototype.checkedAdd=function(e){this.resize(e);var t=this.words[e>>>5],n=t|1<<e;return this.words[e>>>5]=n,(n^t)>>>e},r.prototype.trim=function(e){for(var t=this.words.length;t>0&&0===this.words[t-1];)t--;this.words=this.words.slice(0,t)},r.prototype.resize=function(e){for(var t=e+32>>>5,n=this.words.length;n<t;n++)this.words[n]=0},r.prototype.hammingWeight=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},r.prototype.hammingWeight4=function(e,t,n,i){return 16843009*((e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)+(t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)+(n=(n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)+(i=(i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135))>>>24},r.prototype.size=function(){for(var e=0,t=this.words.length,n=this.words,i=0;i<t;i++)e+=this.hammingWeight(n[i]);return e},r.prototype.array=function(){for(var e=new Array(this.size()),t=0,n=this.words.length,i=0;i<n;++i)for(var r=this.words[i];0!=r;){var s=r&-r;e[t++]=(i<<5)+this.hammingWeight(s-1|0),r^=s}return e},r.prototype.forEach=function(e){for(var t=this.words.length,n=0;n<t;++n)for(var i=this.words[n];0!=i;){var r=i&-i;e((n<<5)+this.hammingWeight(r-1|0)),i^=r}},r.prototype.clone=function(){var e=Object.create(r.prototype);return e.words=this.words.slice(),e},r.prototype.intersects=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0;n<t;++n)if(0!==(this.words[n]&e.words[n]))return!0;return!1},r.prototype.intersection=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0;n+7<t;n+=8)this.words[n]&=e.words[n],this.words[n+1]&=e.words[n+1],this.words[n+2]&=e.words[n+2],this.words[n+3]&=e.words[n+3],this.words[n+4]&=e.words[n+4],this.words[n+5]&=e.words[n+5],this.words[n+6]&=e.words[n+6],this.words[n+7]&=e.words[n+7];for(;n<t;++n)this.words[n]&=e.words[n];var i=this.words.length;for(n=t;n<i;++n)this.words[n]=0;return this},r.prototype.intersection_size=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0,i=0;i<t;++i)n+=this.hammingWeight(this.words[i]&e.words[i]);return n},r.prototype.new_intersection=function(e){var t=Object.create(r.prototype),n=Math.min(this.words.length,e.words.length);t.words=new Array(n);for(var i=n,s=0;s+7<i;s+=8)t.words[s]=this.words[s]&e.words[s],t.words[s+1]=this.words[s+1]&e.words[s+1],t.words[s+2]=this.words[s+2]&e.words[s+2],t.words[s+3]=this.words[s+3]&e.words[s+3],t.words[s+4]=this.words[s+4]&e.words[s+4],t.words[s+5]=this.words[s+5]&e.words[s+5],t.words[s+6]=this.words[s+6]&e.words[s+6],t.words[s+7]=this.words[s+7]&e.words[s+7];for(;s<i;++s)t.words[s]=this.words[s]&e.words[s];return t},r.prototype.equals=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0;n<t;++n)if(this.words[n]!=e.words[n])return!1;if(this.words.length<e.words.length){var i=e.words.length;for(n=this.words.length;n<i;++n)if(0!=e.words[n])return!1}else if(e.words.length<this.words.length)for(i=this.words.length,n=e.words.length;n<i;++n)if(0!=this.words[n])return!1;return!0},r.prototype.difference=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0;n+7<t;n+=8)this.words[n]&=~e.words[n],this.words[n+1]&=~e.words[n+1],this.words[n+2]&=~e.words[n+2],this.words[n+3]&=~e.words[n+3],this.words[n+4]&=~e.words[n+4],this.words[n+5]&=~e.words[n+5],this.words[n+6]&=~e.words[n+6],this.words[n+7]&=~e.words[n+7];for(;n<t;++n)this.words[n]&=~e.words[n];return this},r.prototype.difference_size=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0,i=0;i<t;++i)n+=this.hammingWeight(this.words[i]&~e.words[i]);for(var r=this.words.length;i<r;++i)n+=this.hammingWeight(this.words[i]);return n},r.prototype.toString=function(){return"{"+this.array().join(",")+"}"},r.prototype.union=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0;n+7<t;n+=8)this.words[n]|=e.words[n],this.words[n+1]|=e.words[n+1],this.words[n+2]|=e.words[n+2],this.words[n+3]|=e.words[n+3],this.words[n+4]|=e.words[n+4],this.words[n+5]|=e.words[n+5],this.words[n+6]|=e.words[n+6],this.words[n+7]|=e.words[n+7];for(;n<t;++n)this.words[n]|=e.words[n];if(this.words.length<e.words.length){this.resize((e.words.length<<5)-1);var i=e.words.length;for(n=t;n<i;++n)this.words[n]=e.words[n]}return this},r.prototype.new_union=function(e){var t=Object.create(r.prototype),n=Math.max(this.words.length,e.words.length);t.words=new Array(n);for(var i=Math.min(this.words.length,e.words.length),s=0;s+7<i;s+=8)t.words[s]=this.words[s]|e.words[s],t.words[s+1]=this.words[s+1]|e.words[s+1],t.words[s+2]=this.words[s+2]|e.words[s+2],t.words[s+3]=this.words[s+3]|e.words[s+3],t.words[s+4]=this.words[s+4]|e.words[s+4],t.words[s+5]=this.words[s+5]|e.words[s+5],t.words[s+6]=this.words[s+6]|e.words[s+6],t.words[s+7]=this.words[s+7]|e.words[s+7];for(;s<i;++s)t.words[s]=this.words[s]|e.words[s];var a=this.words.length;for(s=i;s<a;++s)t.words[s]=this.words[s];var o=e.words.length;for(s=i;s<o;++s)t.words[s]=e.words[s];return t},r.prototype.new_difference=function(e){return this.clone().difference(e)},r.prototype.union_size=function(e){for(var t=Math.min(this.words.length,e.words.length),n=0,i=0;i<t;++i)n+=this.hammingWeight(this.words[i]|e.words[i]);if(this.words.length<e.words.length){var r=e.words.length;for(i=this.words.length;i<r;++i)n+=this.hammingWeight(0|e.words[i])}else for(r=this.words.length,i=e.words.length;i<r;++i)n+=this.hammingWeight(0|this.words[i]);return n},e.exports=r},1281:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Archetype=void 0;var a=s(n(9434)),o=i((function e(t){r(this,e),this.componentBits=new a.default,this.componentBitsInitialized=!1,this.componentTypes=t}));t.Archetype=o},3713:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var s=i((function e(){r(this,e)}));t.Component=s},9179:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentMapper=void 0;var s=function(){function e(){i(this,e),this.data=[]}return r(e,[{key:"add",value:function(e,t){this.data[e]=t}},{key:"get",value:function(e){return this.data[e]}},{key:"remove",value:function(e){delete this.data[e]}}]),e}();t.ComponentMapper=s},1218:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default,a=n(1588).default,o=n(3808).default,u=n(1655).default,l=n(6389).default,h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EntityIteratingSystem=void 0;var c=n(4905),f=h(n(9434)),d=function(e){u(n,e);var t=l(n);function n(e){var i;return r(this,n),(i=t.call(this)).componentBits=new f.default,i.types=e,i}return s(n,[{key:"setWorld",value:function(e){a(o(n.prototype),"setWorld",this).call(this,e);var t,r=i(this.types);try{for(r.s();!(t=r.n()).done;){var s=t.value;this.componentBits.add(e.getComponentIndex(s))}}catch(u){r.e(u)}finally{r.f()}}},{key:"process",value:function(){this.begin(),this.world.getEntities(this.componentBits,this.processEntity.bind(this)),this.end()}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),n}(c.System);t.EntityIteratingSystem=d},2645:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default,s=n(1655).default,a=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.EntitySystem=void 0;var o=function(e){s(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).entities=[],e}return r(n,[{key:"process",value:function(){this.entities.length=0,this.begin(),this.world.getEntities(this.componentBits,this.processEntity.bind(this)),this.processEntities(this.entities),this.end()}},{key:"processEntity",value:function(e){this.entities.push(e)}}]),n}(n(1218).EntityIteratingSystem);t.EntitySystem=o},6310:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Inject=void 0,t.Inject=function(e){return function(t,n){var i=t.constructor;i.hasOwnProperty("__inject__")||(i.__inject__={}),i.__inject__[n]=e}}},1185:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InjectMapper=void 0,t.InjectMapper=function(e){return function(t,n){var i=t.constructor;i.hasOwnProperty("__injectMapper__")||(i.__injectMapper__={}),i.__injectMapper__[n]=e}}},4905:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0;var s=function(){function e(){i(this,e)}return r(e,[{key:"setWorld",value:function(e){this.world=e}},{key:"initialized",value:function(){}},{key:"dispose",value:function(){}}]),e}();t.System=s},8293:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(9434)),u=n(9179),l=function(){function e(){r(this,e),this.index=0,this.mappers={},this.componentBitsMap=[],this.componentIndices=new Map,this.currentComponentIndex=0,this.activeSystems=[],this.passiveSystems=[],this.injectionRegistry={},this.delta=0}return s(e,[{key:"getNewId",value:function(){return this.index++}},{key:"createEntity",value:function(){return this.getNewId()}},{key:"getComponentBits",value:function(e){return this.componentBitsMap[e]||(this.componentBitsMap[e]=new o.default),this.componentBitsMap[e]}},{key:"getMapper",value:function(e){var t=this.getComponentIndex(e);return this.getMapperByIndex(t)}},{key:"getMapperByIndex",value:function(e){return this.mappers[e]||(this.mappers[e]=new u.ComponentMapper),this.mappers[e]}},{key:"getComponentIndex",value:function(e){var t=this.componentIndices.get(e);return void 0===t&&(t=this.currentComponentIndex++,this.componentIndices.set(e,t)),t}},{key:"createEntityByArchetype",value:function(e){var t=this,n=this.getNewId();return e.componentTypes.forEach((function(i){var r=new i;e.componentBitsInitialized||e.componentBits.add(t.getComponentIndex(i)),t.addComponent(n,r,!1)})),this.componentBitsMap[n]=e.componentBits,n}},{key:"addComponent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.getComponentIndex(t.constructor);return this.getMapperByIndex(i).add(e,t),n&&this.getComponentBits(e).add(i),t}},{key:"getComponent",value:function(e,t){return this.getMapper(t).get(e)}},{key:"getEntities",value:function(e,t){for(var n=0;n<this.componentBitsMap.length;n++)if(this.componentBitsMap[n]){var i=this.componentBitsMap[n];e.union_size(i)===i.size()&&t(n)}}},{key:"addSystem",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.activeSystems.push(e):this.passiveSystems.push(e),e.setWorld(this),this.injectMapper(e),this.inject(e),e.initialized()}},{key:"injectMapper",value:function(e){var t=e.constructor.__injectMapper__||{};for(var n in t){var i=t[n];e[n]=this.getMapper(i)}}},{key:"register",value:function(e,t){this.injectionRegistry[e]=t}},{key:"inject",value:function(e){var t=e.constructor.__inject__||{};for(var n in t){var i=t[n];e[n]=this.injectionRegistry[i]}}},{key:"dispose",value:function(){var e,t=i(this.activeSystems);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(s){t.e(s)}finally{t.f()}var n,r=i(this.passiveSystems);try{for(r.s();!(n=r.n()).done;){n.value.dispose()}}catch(s){r.e(s)}finally{r.f()}}},{key:"setDelta",value:function(e){this.delta=e}},{key:"processActiveSystem",value:function(){var e,t=i(this.activeSystems);try{for(t.s();!(e=t.n()).done;){e.value.process()}}catch(n){t.e(n)}finally{t.f()}}},{key:"processPassiveSystem",value:function(){var e,t=i(this.passiveSystems);try{for(t.s();!(e=t.n()).done;){e.value.process()}}catch(n){t.e(n)}finally{t.f()}}},{key:"deleteEntity",value:function(e){for(var t in this.mappers)this.mappers[t].remove(e);delete this.componentBitsMap[e]}},{key:"isEntityActive",value:function(e){return!!this.componentBitsMap[e]}}]),e}();t.default=l},9997:function(e,t,n){"use strict";var i=n(8293);Object.defineProperty(t,"q3",{enumerable:!0,get:function(){return i.default}});var r=n(1281);var s=n(3713);var a=n(9179);var o=n(1218);var u=n(2645);var l=n(4905);Object.defineProperty(t,"xP",{enumerable:!0,get:function(){return l.System}});var h=n(1185);var c=n(6310);Object.defineProperty(t,"tB",{enumerable:!0,get:function(){return c.Inject}})},2695:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultRenderableSorter=void 0;var s=n(7811),a=n(847),o=function(){function e(){i(this,e),this.tmpV1=new s.Vector3,this.tmpV2=new s.Vector3}return r(e,[{key:"sort",value:function(e,t){this.camera=e}},{key:"getTranslation",value:function(e,t,n){return t.isZero()?e.getTranslation(n):e.hasRotationOrScaling()?n.set(t.x,t.y,t.z).multiply(e):e.getTranslation(n).add(t),n}},{key:"compare",value:function(e,t){var n=e.material.has(a.BlendingAttribute.Type)&&e.material.get(a.BlendingAttribute.Type).blended;if(n!==(t.material.has(a.BlendingAttribute.Type)&&t.material.get(a.BlendingAttribute.Type).blended))return n?1:-1;this.getTranslation(e.worldTransform,e.meshPart.center,this.tmpV1),this.getTranslation(t.worldTransform,t.meshPart.center,this.tmpV2);var i=1e3*this.camera.position.dst2(this.tmpV1)-1e3*this.camera.position.dst2(this.tmpV2),r=i<0?-1:i>0?1:0;return n?-r:r}}]),e}();t.DefaultRenderableSorter=o},1341:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultShaderProvider=void 0;var a=n(616),o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";r(this,e),this.gl=t,this.shaders=[],this.config=n||new a.Config(i,s)}return s(e,[{key:"dispose",value:function(){}},{key:"getShader",value:function(e){var t=e.shader;if(t&&t.canRender(e))return t;var n,r=i(this.shaders);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(s.canRender(e))return s}}catch(o){r.e(o)}finally{r.f()}var a=this.createShader(this.gl,e);if(!a.canRender(e))throw new Error("unable to provide a shader for this renderable");return a.init(),this.shaders.push(a),a}},{key:"createShader",value:function(e,t){return new a.DefaultShader(e,t,this.config)}}]),e}();t.DefaultShaderProvider=o},5394:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTextureBinder=void 0;var s=n(7139),a=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;i(this,e),this.reuseCount=0,this.bindCount=0,this.currentTexture=0,e.gl=t;var a=Math.min(e.getMaxTextureUnits(),e.MAX_GLES_UNITS);if(s<0&&(s=a-r),r<0||s<0||r+s>a)throw new Error("Illegal arguments");this.method=n,this.offset=r,this.count=s,this.textures=new Array(s),this.unitsLRU=n===e.LRU?new Array(s):null}return r(e,[{key:"begin",value:function(){for(var e=0;e<this.count;e++)this.textures[e]=null,null!=this.unitsLRU&&(this.unitsLRU[e]=e)}},{key:"end",value:function(){e.gl.activeTexture(e.gl.TEXTURE0)}},{key:"bindTexture",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this.reused=!1,this.method){case e.ROUNDROBIN:n=this.offset+this.bindTextureRoundRobin(t);break;case e.LRU:n=this.offset+this.bindTextureLRU(t);break;default:return-1}return this.reused?(this.reuseCount++,i?t.bind(n):e.gl.activeTexture(e.gl.TEXTURE0+n)):this.bindCount++,t.setWraps(s.TextureWrap.Repeat,s.TextureWrap.Repeat),t.setFilters(s.TextureFilter.Linear,s.TextureFilter.Linear),n}},{key:"bindTextureRoundRobin",value:function(e){for(var t=0;t<this.count;t++){var n=(this.currentTexture+t)%this.count;if(this.textures[n]===e)return this.reused=!0,n}return this.currentTexture=(this.currentTexture+1)%this.count,this.textures[this.currentTexture]=e,e.bind(this.offset+this.currentTexture),this.currentTexture}},{key:"bindTextureLRU",value:function(e){var t;for(t=0;t<this.count;t++){var n=this.unitsLRU[t];if(this.textures[n]===e){this.reused=!0;break}if(!this.textures[n])break}t>=this.count&&(t=this.count-1);for(var i=this.unitsLRU[t];t>0;)this.unitsLRU[t]=this.unitsLRU[t-1],t--;return this.unitsLRU[0]=i,this.reused||(this.textures[i]=e,e.bind(this.offset+i)),i}},{key:"getBindCount",value:function(){return this.bindCount}},{key:"getReuseCount",value:function(){return this.reuseCount}},{key:"resetCounts",value:function(){this.bindCount=this.reuseCount=0}}],[{key:"getMaxTextureUnits",value:function(){return this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)}}]),e}();t.DefaultTextureBinder=a,a.ROUNDROBIN=0,a.LRU=1,a.MAX_GLES_UNITS=32},8552:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GL20=void 0;var s=i((function e(){r(this,e)}));t.GL20=s,s.GL_ES_VERSION_2_0=1,s.GL_DEPTH_BUFFER_BIT=256,s.GL_STENCIL_BUFFER_BIT=1024,s.GL_COLOR_BUFFER_BIT=16384,s.GL_FALSE=0,s.GL_TRUE=1,s.GL_POINTS=0,s.GL_LINES=1,s.GL_LINE_LOOP=2,s.GL_LINE_STRIP=3,s.GL_TRIANGLES=4,s.GL_TRIANGLE_STRIP=5,s.GL_TRIANGLE_FAN=6,s.GL_ZERO=0,s.GL_ONE=1,s.GL_SRC_COLOR=768,s.GL_ONE_MINUS_SRC_COLOR=769,s.GL_SRC_ALPHA=770,s.GL_ONE_MINUS_SRC_ALPHA=771,s.GL_DST_ALPHA=772,s.GL_ONE_MINUS_DST_ALPHA=773,s.GL_DST_COLOR=774,s.GL_ONE_MINUS_DST_COLOR=775,s.GL_SRC_ALPHA_SATURATE=776,s.GL_FUNC_ADD=32774,s.GL_BLEND_EQUATION=32777,s.GL_BLEND_EQUATION_RGB=32777,s.GL_BLEND_EQUATION_ALPHA=34877,s.GL_FUNC_SUBTRACT=32778,s.GL_FUNC_REVERSE_SUBTRACT=32779,s.GL_BLEND_DST_RGB=32968,s.GL_BLEND_SRC_RGB=32969,s.GL_BLEND_DST_ALPHA=32970,s.GL_BLEND_SRC_ALPHA=32971,s.GL_CONSTANT_COLOR=32769,s.GL_ONE_MINUS_CONSTANT_COLOR=32770,s.GL_CONSTANT_ALPHA=32771,s.GL_ONE_MINUS_CONSTANT_ALPHA=32772,s.GL_BLEND_COLOR=32773,s.GL_ARRAY_BUFFER=34962,s.GL_ELEMENT_ARRAY_BUFFER=34963,s.GL_ARRAY_BUFFER_BINDING=34964,s.GL_ELEMENT_ARRAY_BUFFER_BINDING=34965,s.GL_STREAM_DRAW=35040,s.GL_STATIC_DRAW=35044,s.GL_DYNAMIC_DRAW=35048,s.GL_BUFFER_SIZE=34660,s.GL_BUFFER_USAGE=34661,s.GL_CURRENT_VERTEX_ATTRIB=34342,s.GL_FRONT=1028,s.GL_BACK=1029,s.GL_FRONT_AND_BACK=1032,s.GL_TEXTURE_2D=3553,s.GL_CULL_FACE=2884,s.GL_BLEND=3042,s.GL_DITHER=3024,s.GL_STENCIL_TEST=2960,s.GL_DEPTH_TEST=2929,s.GL_SCISSOR_TEST=3089,s.GL_POLYGON_OFFSET_FILL=32823,s.GL_SAMPLE_ALPHA_TO_COVERAGE=32926,s.GL_SAMPLE_COVERAGE=32928,s.GL_NO_ERROR=0,s.GL_INVALID_ENUM=1280,s.GL_INVALID_VALUE=1281,s.GL_INVALID_OPERATION=1282,s.GL_OUT_OF_MEMORY=1285,s.GL_CW=2304,s.GL_CCW=2305,s.GL_LINE_WIDTH=2849,s.GL_ALIASED_POINT_SIZE_RANGE=33901,s.GL_ALIASED_LINE_WIDTH_RANGE=33902,s.GL_CULL_FACE_MODE=2885,s.GL_FRONT_FACE=2886,s.GL_DEPTH_RANGE=2928,s.GL_DEPTH_WRITEMASK=2930,s.GL_DEPTH_CLEAR_VALUE=2931,s.GL_DEPTH_FUNC=2932,s.GL_STENCIL_CLEAR_VALUE=2961,s.GL_STENCIL_FUNC=2962,s.GL_STENCIL_FAIL=2964,s.GL_STENCIL_PASS_DEPTH_FAIL=2965,s.GL_STENCIL_PASS_DEPTH_PASS=2966,s.GL_STENCIL_REF=2967,s.GL_STENCIL_VALUE_MASK=2963,s.GL_STENCIL_WRITEMASK=2968,s.GL_STENCIL_BACK_FUNC=34816,s.GL_STENCIL_BACK_FAIL=34817,s.GL_STENCIL_BACK_PASS_DEPTH_FAIL=34818,s.GL_STENCIL_BACK_PASS_DEPTH_PASS=34819,s.GL_STENCIL_BACK_REF=36003,s.GL_STENCIL_BACK_VALUE_MASK=36004,s.GL_STENCIL_BACK_WRITEMASK=36005,s.GL_VIEWPORT=2978,s.GL_SCISSOR_BOX=3088,s.GL_COLOR_CLEAR_VALUE=3106,s.GL_COLOR_WRITEMASK=3107,s.GL_UNPACK_ALIGNMENT=3317,s.GL_PACK_ALIGNMENT=3333,s.GL_MAX_TEXTURE_SIZE=3379,s.GL_MAX_TEXTURE_UNITS=34018,s.GL_MAX_VIEWPORT_DIMS=3386,s.GL_SUBPIXEL_BITS=3408,s.GL_RED_BITS=3410,s.GL_GREEN_BITS=3411,s.GL_BLUE_BITS=3412,s.GL_ALPHA_BITS=3413,s.GL_DEPTH_BITS=3414,s.GL_STENCIL_BITS=3415,s.GL_POLYGON_OFFSET_UNITS=10752,s.GL_POLYGON_OFFSET_FACTOR=32824,s.GL_TEXTURE_BINDING_2D=32873,s.GL_SAMPLE_BUFFERS=32936,s.GL_SAMPLES=32937,s.GL_SAMPLE_COVERAGE_VALUE=32938,s.GL_SAMPLE_COVERAGE_INVERT=32939,s.GL_NUM_COMPRESSED_TEXTURE_FORMATS=34466,s.GL_COMPRESSED_TEXTURE_FORMATS=34467,s.GL_DONT_CARE=4352,s.GL_FASTEST=4353,s.GL_NICEST=4354,s.GL_GENERATE_MIPMAP=33169,s.GL_GENERATE_MIPMAP_HINT=33170,s.GL_BYTE=5120,s.GL_UNSIGNED_BYTE=5121,s.GL_SHORT=5122,s.GL_UNSIGNED_SHORT=5123,s.GL_INT=5124,s.GL_UNSIGNED_INT=5125,s.GL_FLOAT=5126,s.GL_FIXED=5132,s.GL_DEPTH_COMPONENT=6402,s.GL_ALPHA=6406,s.GL_RGB=6407,s.GL_RGBA=6408,s.GL_LUMINANCE=6409,s.GL_LUMINANCE_ALPHA=6410,s.GL_UNSIGNED_SHORT_4_4_4_4=32819,s.GL_UNSIGNED_SHORT_5_5_5_1=32820,s.GL_UNSIGNED_SHORT_5_6_5=33635,s.GL_FRAGMENT_SHADER=35632,s.GL_VERTEX_SHADER=35633,s.GL_MAX_VERTEX_ATTRIBS=34921,s.GL_MAX_VERTEX_UNIFORM_VECTORS=36347,s.GL_MAX_VARYING_VECTORS=36348,s.GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,s.GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,s.GL_MAX_TEXTURE_IMAGE_UNITS=34930,s.GL_MAX_FRAGMENT_UNIFORM_VECTORS=36349,s.GL_SHADER_TYPE=35663,s.GL_DELETE_STATUS=35712,s.GL_LINK_STATUS=35714,s.GL_VALIDATE_STATUS=35715,s.GL_ATTACHED_SHADERS=35717,s.GL_ACTIVE_UNIFORMS=35718,s.GL_ACTIVE_UNIFORM_MAX_LENGTH=35719,s.GL_ACTIVE_ATTRIBUTES=35721,s.GL_ACTIVE_ATTRIBUTE_MAX_LENGTH=35722,s.GL_SHADING_LANGUAGE_VERSION=35724,s.GL_CURRENT_PROGRAM=35725,s.GL_NEVER=512,s.GL_LESS=513,s.GL_EQUAL=514,s.GL_LEQUAL=515,s.GL_GREATER=516,s.GL_NOTEQUAL=517,s.GL_GEQUAL=518,s.GL_ALWAYS=519,s.GL_KEEP=7680,s.GL_REPLACE=7681,s.GL_INCR=7682,s.GL_DECR=7683,s.GL_INVERT=5386,s.GL_INCR_WRAP=34055,s.GL_DECR_WRAP=34056,s.GL_VENDOR=7936,s.GL_RENDERER=7937,s.GL_VERSION=7938,s.GL_EXTENSIONS=7939,s.GL_NEAREST=9728,s.GL_LINEAR=9729,s.GL_NEAREST_MIPMAP_NEAREST=9984,s.GL_LINEAR_MIPMAP_NEAREST=9985,s.GL_NEAREST_MIPMAP_LINEAR=9986,s.GL_LINEAR_MIPMAP_LINEAR=9987,s.GL_TEXTURE_MAG_FILTER=10240,s.GL_TEXTURE_MIN_FILTER=10241,s.GL_TEXTURE_WRAP_S=10242,s.GL_TEXTURE_WRAP_T=10243,s.GL_TEXTURE=5890,s.GL_TEXTURE_CUBE_MAP=34067,s.GL_TEXTURE_BINDING_CUBE_MAP=34068,s.GL_TEXTURE_CUBE_MAP_POSITIVE_X=34069,s.GL_TEXTURE_CUBE_MAP_NEGATIVE_X=34070,s.GL_TEXTURE_CUBE_MAP_POSITIVE_Y=34071,s.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,s.GL_TEXTURE_CUBE_MAP_POSITIVE_Z=34073,s.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,s.GL_MAX_CUBE_MAP_TEXTURE_SIZE=34076,s.GL_TEXTURE0=33984,s.GL_TEXTURE1=33985,s.GL_TEXTURE2=33986,s.GL_TEXTURE3=33987,s.GL_TEXTURE4=33988,s.GL_TEXTURE5=33989,s.GL_TEXTURE6=33990,s.GL_TEXTURE7=33991,s.GL_TEXTURE8=33992,s.GL_TEXTURE9=33993,s.GL_TEXTURE10=33994,s.GL_TEXTURE11=33995,s.GL_TEXTURE12=33996,s.GL_TEXTURE13=33997,s.GL_TEXTURE14=33998,s.GL_TEXTURE15=33999,s.GL_TEXTURE16=34e3,s.GL_TEXTURE17=34001,s.GL_TEXTURE18=34002,s.GL_TEXTURE19=34003,s.GL_TEXTURE20=34004,s.GL_TEXTURE21=34005,s.GL_TEXTURE22=34006,s.GL_TEXTURE23=34007,s.GL_TEXTURE24=34008,s.GL_TEXTURE25=34009,s.GL_TEXTURE26=34010,s.GL_TEXTURE27=34011,s.GL_TEXTURE28=34012,s.GL_TEXTURE29=34013,s.GL_TEXTURE30=34014,s.GL_TEXTURE31=34015,s.GL_ACTIVE_TEXTURE=34016,s.GL_REPEAT=10497,s.GL_CLAMP_TO_EDGE=33071,s.GL_MIRRORED_REPEAT=33648,s.GL_FLOAT_VEC2=35664,s.GL_FLOAT_VEC3=35665,s.GL_FLOAT_VEC4=35666,s.GL_INT_VEC2=35667,s.GL_INT_VEC3=35668,s.GL_INT_VEC4=35669,s.GL_BOOL=35670,s.GL_BOOL_VEC2=35671,s.GL_BOOL_VEC3=35672,s.GL_BOOL_VEC4=35673,s.GL_FLOAT_MAT2=35674,s.GL_FLOAT_MAT3=35675,s.GL_FLOAT_MAT4=35676,s.GL_SAMPLER_2D=35678,s.GL_SAMPLER_CUBE=35680,s.GL_VERTEX_ATTRIB_ARRAY_ENABLED=34338,s.GL_VERTEX_ATTRIB_ARRAY_SIZE=34339,s.GL_VERTEX_ATTRIB_ARRAY_STRIDE=34340,s.GL_VERTEX_ATTRIB_ARRAY_TYPE=34341,s.GL_VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,s.GL_VERTEX_ATTRIB_ARRAY_POINTER=34373,s.GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,s.GL_IMPLEMENTATION_COLOR_READ_TYPE=35738,s.GL_IMPLEMENTATION_COLOR_READ_FORMAT=35739,s.GL_COMPILE_STATUS=35713,s.GL_INFO_LOG_LENGTH=35716,s.GL_SHADER_SOURCE_LENGTH=35720,s.GL_SHADER_COMPILER=36346,s.GL_SHADER_BINARY_FORMATS=36344,s.GL_NUM_SHADER_BINARY_FORMATS=36345,s.GL_LOW_FLOAT=36336,s.GL_MEDIUM_FLOAT=36337,s.GL_HIGH_FLOAT=36338,s.GL_LOW_INT=36339,s.GL_MEDIUM_INT=36340,s.GL_HIGH_INT=36341,s.GL_FRAMEBUFFER=36160,s.GL_RENDERBUFFER=36161,s.GL_RGBA4=32854,s.GL_RGB5_A1=32855,s.GL_RGB565=36194,s.GL_DEPTH_COMPONENT16=33189,s.GL_STENCIL_INDEX=6401,s.GL_STENCIL_INDEX8=36168,s.GL_RENDERBUFFER_WIDTH=36162,s.GL_RENDERBUFFER_HEIGHT=36163,s.GL_RENDERBUFFER_INTERNAL_FORMAT=36164,s.GL_RENDERBUFFER_RED_SIZE=36176,s.GL_RENDERBUFFER_GREEN_SIZE=36177,s.GL_RENDERBUFFER_BLUE_SIZE=36178,s.GL_RENDERBUFFER_ALPHA_SIZE=36179,s.GL_RENDERBUFFER_DEPTH_SIZE=36180,s.GL_RENDERBUFFER_STENCIL_SIZE=36181,s.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,s.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,s.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,s.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,s.GL_COLOR_ATTACHMENT0=36064,s.GL_DEPTH_ATTACHMENT=36096,s.GL_STENCIL_ATTACHMENT=36128,s.GL_NONE=0,s.GL_FRAMEBUFFER_COMPLETE=36053,s.GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,s.GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,s.GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,s.GL_FRAMEBUFFER_UNSUPPORTED=36061,s.GL_FRAMEBUFFER_BINDING=36006,s.GL_RENDERBUFFER_BINDING=36007,s.GL_MAX_RENDERBUFFER_SIZE=34024,s.GL_INVALID_FRAMEBUFFER_OPERATION=1286,s.GL_VERTEX_PROGRAM_POINT_SIZE=34370,s.GL_COVERAGE_BUFFER_BIT_NV=32768,s.GL_TEXTURE_MAX_ANISOTROPY_EXT=34046,s.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047},4023:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default,a=n(1588).default,o=n(3808).default,u=n(1655).default,l=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var h=function(e){u(n,e);var t=l(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r(this,n),(e=t.call(this)).id=i||"mtl"+ ++n.counter,e}return s(n,[{key:"equals",value:function(e){return e&&(e===this||e.id===this.id&&a(o(n.prototype),"equals",this).call(this,e))}},{key:"copy",value:function(){var e=new n;e.id=this.id;var t,r=i(this.attributes);try{for(r.s();!(t=r.n()).done;){var s=t.value;e.set(s.copy())}}catch(a){r.e(a)}finally{r.f()}return e}}]),n}(n(2802).Attributes);t.Material=h,h.counter=0},5766:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Mesh3D=t.VertexDataType=void 0;var s=n(5477),a=n(2283),o=n(7811),u=n(8633),l=n(427),h=n(8552),c=n(5223),f=n(9131);!function(e){e[e.VertexArray=0]="VertexArray",e[e.VertexBufferObject=1]="VertexBufferObject",e[e.VertexBufferObjectSubData=2]="VertexBufferObjectSubData",e[e.VertexBufferObjectWithVAO=3]="VertexBufferObjectWithVAO"}(t.VertexDataType||(t.VertexDataType={}));var d=function(){function e(t,n,r,s,a,u){i(this,e),this.gl=t,this.autoBind=!0,this.isInstanced=!1,this.tmpV=new o.Vector3,this.vertices=this.makeVertexBuffer(n,s,u),this.indices=new c.IndexBufferObject(t,a,r),this.isVertexArray=!1,e.addManagedMesh(this)}return r(e,[{key:"Mesh",value:function(t,n,i){this.vertices=t,this.indices=n,this.isVertexArray=i,e.addManagedMesh(this)}},{key:"makeVertexBuffer",value:function(e,t,n){return new f.VertexBufferObject(this.gl,e,t,n)}},{key:"setVertices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return n<0&&(n=e.length),this.vertices.setVertices(e,t,e.length),this}},{key:"updateVertices",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return i<0&&(i=t.length),this.vertices.updateVertices(e,t,n,i),this}},{key:"getVertices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.getNumVertices()*this.getVertexSize()/4;if(-1===n&&(n=r-t)>e.length-i&&(n=e.length-i),t<0||n<=0||t+n>r||i<0||i>=e.length)throw new Error("index out of bound");if(e.length-i<n)throw new Error("not enough room in vertices array, has "+e.length+" floats, needs "+n);for(var s=this.vertices.getBuffer(),a=t;a<n;a++)e[a]=s.at(a-t+i);return e}},{key:"setIndices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return this.indices.setIndices(e,t,n),this}},{key:"getIndices",value:function(e,t,n,i){var r=this.getNumIndices();if(t<0&&(t=r-e),e<0||e>=r||e+t>r)throw new Error("Invalid range specified, offset: "+e+", count: "+t+", max: "+r);if(n.length-i<t)throw new Error("not enough room in indices array, has "+n.length+" shorts, needs "+t);for(var s=this.indices.getBuffer(),a=e;a<t;a++)n[a]=s.at(a-e+i)}},{key:"getNumIndices",value:function(){return this.indices.getNumIndices()}},{key:"getNumVertices",value:function(){return this.vertices.getNumVertices()}},{key:"getMaxVertices",value:function(){return this.vertices.getNumMaxVertices()}},{key:"getMaxIndices",value:function(){return this.indices.getNumMaxIndices()}},{key:"getVertexSize",value:function(){return this.vertices.getAttributes().vertexSize}},{key:"setAutoBind",value:function(e){this.autoBind=e}},{key:"bind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.vertices.bind(e,t),this.indices.getNumIndices()>0&&this.indices.bind()}},{key:"unbind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.vertices.unbind(e,t),this.indices.getNumIndices()>0&&this.indices.unbind()}},{key:"render",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.autoBind;if(i<0&&(i=this.indices.getNumMaxIndices()>0?this.getNumIndices():this.getNumVertices()),0!==i){if(r&&this.bind(e),this.isVertexArray)this.indices.getNumIndices()>0?this.gl.drawElements(t,i,h.GL20.GL_UNSIGNED_SHORT,2*n):this.gl.drawArrays(t,n,i);else if(this.indices.getNumIndices()>0){if(i+n>this.indices.getNumMaxIndices())throw new Error("Mesh attempting to access memory outside of the index buffer (count: "+i+", offset: "+n+", max: "+this.indices.getNumMaxIndices()+")");this.gl.drawElements(t,i,h.GL20.GL_UNSIGNED_SHORT,2*n)}else this.gl.drawArrays(t,n,i);r&&this.unbind(e)}}},{key:"dispose",value:function(){var t=e.meshes.indexOf(this);t>-1&&e.meshes.splice(t,1),this.vertices.dispose(),this.indices.dispose()}},{key:"getVertexAttribute",value:function(e){for(var t=this.vertices.getAttributes(),n=t.size(),i=0;i<n;i++)if(t.get(i).usage===e)return t.get(i);return null}},{key:"getVertexAttributes",value:function(){return this.vertices.getAttributes()}},{key:"getVerticesBuffer",value:function(){return this.vertices.getBuffer()}},{key:"calculateBoundingBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=new s.BoundingBox);var t=this.getNumVertices();if(0===t)throw new Error("No vertices defined");var n=this.vertices.getBuffer();e.inf();var i=this.getVertexAttribute(u.Usage.Position),r=i.offset/4,a=this.vertices.getAttributes().vertexSize/4,o=r;switch(i.numComponents){case 1:for(var l=0;l<t;l++)e.ext(n[o],0,0),o+=a;break;case 2:for(var h=0;h<t;h++)e.ext(n[o],n[o+1],0),o+=a;break;case 3:for(var c=0;c<t;c++)e.ext(n[o],n[o+1],n[o+2]),o+=a}}},{key:"extendBoundingBox",value:function(e,t,n,i){var r=this.getNumIndices(),s=this.getNumVertices(),a=0===r?s:r;if(t<0||n<1||t+n>a)throw new Error("Invalid part specified ( offset="+t+", count="+n+", max="+a+" )");var o=this.vertices.getBuffer(),l=this.indices.getBuffer(),h=this.getVertexAttribute(u.Usage.Position),c=h.offset/4,f=this.vertices.getAttributes().vertexSize/4,d=t+n;switch(h.numComponents){case 1:if(r>0)for(var v=t;v<d;v++){var p=(65535&l[v])*f+c;this.tmpV.set(o[p],0,0),i&&this.tmpV.multiply(i),e.ext(this.tmpV.x,this.tmpV.y,this.tmpV.z)}else for(var g=t;g<d;g++){var m=g*f+c;this.tmpV.set(o[m],0,0),i&&this.tmpV.multiply(i),e.ext(this.tmpV.x,this.tmpV.y,this.tmpV.z)}break;case 2:if(r>0)for(var y=t;y<d;y++){var b=(65535&l[y])*f+c;this.tmpV.set(o[b],o[b+1],0),i&&this.tmpV.multiply(i),e.ext(this.tmpV.x,this.tmpV.y,this.tmpV.z)}else for(var M=t;M<d;M++){var x=M*f+c;this.tmpV.set(o[x],o[x+1],0),i&&this.tmpV.multiply(i),e.ext(this.tmpV.x,this.tmpV.y,this.tmpV.z)}break;case 3:if(r>0)for(var _=t;_<d;_++){var w=(65535&l[_])*f+c;this.tmpV.set(o[w],o[w+1],o[w+2]),i&&this.tmpV.multiply(i),e.ext(this.tmpV.x,this.tmpV.y,this.tmpV.z)}else for(var k=t;k<d;k++){var T=k*f+c;this.tmpV.set(o[T],o[T+1],o[T+2]),i&&this.tmpV.multiply(i),e.ext(this.tmpV.x,this.tmpV.y,this.tmpV.z)}}return e}},{key:"calculateRadiusSquared",value:function(e,t,n,i,r,s){var a=this.getNumIndices();if(i<0||r<1||i+r>a)throw new Error("Not enough indices");var l=this.vertices.getBuffer(),h=this.indices.getBuffer(),c=this.getVertexAttribute(u.Usage.Position),f=c.offset/4,d=this.vertices.getAttributes().vertexSize/4,v=i+r,p=0;switch(c.numComponents){case 1:for(var g=i;g<v;g++){var m=(65535&h[g])*d+f;this.tmpV.set(l[m],0,0),s&&this.tmpV.multiply(s);var y=this.tmpV.sub(new o.Vector3(e,t,n)).length2();y>p&&(p=y)}break;case 2:for(var b=i;b<v;b++){var M=(65535&h[b])*d+f;this.tmpV.set(l[b],l[M+1],0),s&&this.tmpV.multiply(s);var x=this.tmpV.sub(new o.Vector3(e,t,n)).length2();x>p&&(p=x)}break;case 3:for(var _=i;_<v;_++){var w=(65535&h[_])*d+f;this.tmpV.set(l[_],l[w+1],l[w+2]),s&&this.tmpV.multiply(s);var k=this.tmpV.sub(new o.Vector3(e,t,n)).length2();k>p&&(p=k)}}return p}},{key:"calculateRadius",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getNumIndices(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return Math.sqrt(this.calculateRadiusSquared(e,t,n,i,r,s))}},{key:"getIndicesBuffer",value:function(){return this.indices.getBuffer()}},{key:"scale",value:function(e,t,n){var i=this.getVertexAttribute(u.Usage.Position),r=i.offset/4,s=i.numComponents,a=this.getNumVertices(),o=this.getVertexSize()/4,l=new Array(a*o);this.getVertices(l);var h=r;switch(s){case 1:for(var c=0;c<a;c++)l[h]*=e,h+=o;break;case 2:for(var f=0;f<a;f++)l[h]*=e,l[h+1]*=t,h+=o;break;case 3:for(var d=0;d<a;d++)l[h]*=e,l[h+1]*=t,l[h+2]*=n,h+=o}this.setVertices(l)}},{key:"transform",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getNumIndices(),r=this.getVertexAttribute(u.Usage.Position),s=r.offset/4,a=this.getVertexSize()/4,o=r.numComponents,l=new Array(i*a);this.getVertices(l,n*a,i*a),e.transform(t,l,a,s,o,0,i),this.updateVertices(n*a,l)}},{key:"transformUV",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getNumVertices(),r=this.getVertexAttribute(u.Usage.TextureCoordinates).offset/4,s=this.getVertexSize()/4,a=this.getNumVertices(),o=new Array(a*s);this.getVertices(o,0,o.length),e.transformUV(t,o,s,r,n,i),this.setVertices(o,0,o.length)}},{key:"copy",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.getVertexSize()/4,s=this.getNumVertices(),a=new Array(s*r);this.getVertices(a,0,a.length);var o=null,u=null,h=0;if(i){for(var c=0,f=0,d=0;d<i.length;d++)this.getVertexAttribute(i[d])&&(c+=this.getVertexAttribute(i[d]).numComponents,f++);if(c>0){u=new Array(f),o=new Array(c);for(var v=-1,p=-1,g=0;g<i.length;g++){var m=this.getVertexAttribute(i[g]);if(m){for(var y=0;y<m.numComponents;y++)o[++v]=m.offset+y;u[++p]=m.copy(),h+=m.numComponents}}}}if(!o){o=new Array(r);for(var b=0;b<r;b++)o[b]=b;h=r}var M,x=this.getNumIndices(),_=null;if(x>0&&(_=new Array(x),this.getIndices(0,-1,_,0),n||h!==r)){for(var w=new Array(a.length),k=0,T=0;T<x;T++){var E=_[T]*r,L=-1;if(n)for(var A=0;A<k&&L<0;A++){for(var S=A*h,C=!0,P=0;P<o.length&&C;P++)w[S+P]!==a[E+o[P]]&&(C=!1);C&&(L=A)}if(L>0)_[T]=L;else{for(var I=k*h,R=0;R<o.length;R++)w[I+R]=a[E+o[R]];_[T]=k,k++}}a=w,s=k}return(M=new e(this.gl,t,t,s,_?_.length:0,u?new l.VertexAttributes(u):this.getVertexAttributes())).setVertices(a,0,s*h),_&&M.setIndices(_),M}}],[{key:"addManagedMesh",value:function(t){e.meshes||(e.meshes=new Array),e.meshes.push(t)}},{key:"invalidateAllMeshes",value:function(){if(e.meshes)for(var t=0;t<e.meshes.length;t++)e.meshes[t].vertices.invalidate(),e.meshes[t].indices.invalidate()}},{key:"clearAllMeshes",value:function(){e.meshes.length=0}},{key:"transform",value:function(e,t,n,i,r,s,a){if(i<0||r<1||i+r>n)throw new Error;if(s<0||a<1||(s+a)*n>t.length)throw new Error("start = "+s+", count = "+a+", vertexSize = "+n+", length = "+t.length);var u=new o.Vector3,l=i+s*n;switch(r){case 1:for(var h=0;h<a;h++)u.set(t[l],0,0).multiply(e),t[l]=u.x,l+=n;break;case 2:for(var c=0;c<a;c++)u.set(t[l],t[l+1],0).multiply(e),t[l]=u.x,t[l+1]=u.y,l+=n;break;case 3:for(var f=0;f<a;f++)u.set(t[l],t[l+1],t[l+2]).multiply(e),t[l]=u.x,t[l+1]=u.y,t[l+2]=u.z,l+=n}}},{key:"transformUV",value:function(e,t,n,i,r,s){if(r<0||s<1||(r+s)*n>t.length)throw new Error("start = "+r+", count = "+s+", vertexSize = "+n+", length = "+t.length);for(var o=new a.Vector2,u=i+r*n,l=0;l<s;l++)o.set(t[u],t[u+1]).mul(e),t[u]=o.x,t[u+1]=o.y,u+=n}}]),e}();t.Mesh3D=d,d.meshes=[]},7893:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default,s=n(1588).default,a=n(3808).default,o=n(1655).default,u=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelBatch=void 0;var l=n(8606),h=n(2695),c=n(1341),f=n(5394),d=n(2289),v=n(5596),p=function(e){o(n,e);var t=u(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n,[{key:"obtain",value:function(){var e=s(a(n.prototype),"obtain",this).call(this);return e.environment=null,e.material=null,e.meshPart.set("",null,0,0,0),e.shader=null,e}}]),n}(l.FlushablePool),g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this.camera=null,this.renderablesPool=new p((function(){return new d.Renderable})),this.renderables=[],this.context=null,this.shaderProvider=null,this.sorter=null,this.sorter=r||new h.DefaultRenderableSorter,this.ownContext=!n,this.context=n||new v.RenderContext(new f.DefaultTextureBinder(t,f.DefaultTextureBinder.LRU,1)),this.shaderProvider=this.shaderProvider?this.shaderProvider:new c.DefaultShaderProvider(t)}return r(e,[{key:"dispose",value:function(){this.shaderProvider.dispose()}},{key:"begin",value:function(e){if(this.camera)throw new Error("Call end() first.");this.camera=e,this.ownContext&&this.context.begin()}},{key:"setCamera",value:function(e){if(!this.camera)throw new Error("Call begin() first.");this.renderables.length>0&&this.flush(),this.camera=e}},{key:"getCamera",value:function(){return this.camera}},{key:"ownsRenderContext",value:function(){return this.ownContext}},{key:"getRenderContext",value:function(){return this.context}},{key:"getRenderableSorter",value:function(){return this.sorter}},{key:"flush",value:function(){this.sorter.sort(this.camera,this.renderables);for(var e=null,t=0;t<this.renderables.length;t++){var n=this.renderables[t];e!==n.shader&&(e&&e.end(),(e=n.shader).begin(this.camera,this.context)),e.render(n)}e&&e.end(),this.renderablesPool.flush(),this.renderables.length=0}},{key:"end",value:function(){this.flush(),this.ownContext&&this.context.end(),this.camera=null}},{key:"renderWithRenderable",value:function(e){e.shader=this.shaderProvider.getShader(e),this.renderables.push(e)}},{key:"render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.renderables.length;e.getRenderables(this.renderables,this.renderablesPool);for(var i=n;i<this.renderables.length;i++){var r=this.renderables[i];t&&(r.environment=t),r.shader=this.shaderProvider.getShader(r)}}}]),e}();t.ModelBatch=g},5920:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelInstance=void 0;var a=n(4995),o=n(8235),u=n(1960),l=n(5388),h=n(5904),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,e),this.materials=[],this.nodes=[],this.animations=[],this.model=t,this.transform=n||new a.Matrix4,i?this.copyNodes(t.nodes,i):this.copyNodes(t.nodes),this.copyAnimations(t.animations,e.defaultShareKeyframes),this.calculateTransforms()}return s(e,[{key:"copyNodes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0,r=e.length;n<r;++n){var s=e[n];if(t){var a,o=i(t);try{for(o.s();!(a=o.n()).done;){if(a.value===s.id){this.nodes.push(s.copy());break}}}catch(u){o.e(u)}finally{o.f()}}else this.nodes.push(s.copy())}this.invalidate()}},{key:"invalidateNode",value:function(e){for(var t=this,n=function(){var n=e.parts[i],r=n.invBoneBindTransforms;if(r)for(var s=0;s<r.size;++s)r.keys[s]=t.getNode(r.keys[s].id);if(!t.materials.includes(n.material)){var a=t.materials.findIndex((function(e){return e.id===n.material.id}));a<0?t.materials.push(n.material=n.material.copy()):n.material=t.materials[a]}},i=0,r=e.parts.length;i<r;++i)n();for(var s=0,a=e.getChildCount();s<a;++s)this.invalidateNode(e.getChildByIndex(s))}},{key:"getNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u.Node.getNode(this.nodes,e,t,n)}},{key:"invalidate",value:function(){for(var e=0,t=this.nodes.length;e<t;++e)this.invalidateNode(this.nodes[e])}},{key:"copyAnimations",value:function(e,t){var n,r=i(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.copyAnimation(s,t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"copyAnimation",value:function(e,t){var n=new o.Animation3D;n.id=e.id,n.duration=e.duration;var r,s=i(e.nodeAnimations);try{for(s.s();!(r=s.n()).done;){var a=r.value,u=this.getNode(a.node.id);if(u){var c=new l.NodeAnimation;if(c.node=u,t)c.translation=a.translation,c.rotation=a.rotation,c.scaling=a.scaling;else{if(a.translation){c.translation=new Array;var f,d=i(a.translation);try{for(d.s();!(f=d.n()).done;){var v=f.value;c.translation.push(new h.NodeKeyframe(v.keytime,v.value))}}catch(x){d.e(x)}finally{d.f()}}if(a.rotation){c.rotation=new Array;var p,g=i(a.rotation);try{for(g.s();!(p=g.n()).done;){var m=p.value;c.rotation.push(new h.NodeKeyframe(m.keytime,m.value))}}catch(x){g.e(x)}finally{g.f()}}if(a.scaling){c.scaling=new Array;var y,b=i(a.scaling);try{for(b.s();!(y=b.n()).done;){var M=y.value;c.scaling.push(new h.NodeKeyframe(M.keytime,M.value))}}catch(x){b.e(x)}finally{b.f()}}}(c.translation||c.rotation||c.scaling)&&n.nodeAnimations.push(c)}}}catch(x){s.e(x)}finally{s.f()}n.nodeAnimations.length>0&&this.animations.push(n)}},{key:"getRenderable",value:function(e,t,n){return n.setRenderable(e),!n.bones&&this.transform?e.worldTransform.set(this.transform.values).multiply(t.globalTransform):this.transform?e.worldTransform.set(this.transform.values):e.worldTransform.idt(),e}},{key:"getRenderables",value:function(e,t){var n,r=i(this.nodes);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.getRenderablesWithNode(s,e,t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"getRenderablesWithNode",value:function(e,t,n){if(e.parts.length>0){var r,s=i(e.parts);try{for(s.s();!(r=s.n()).done;){var a=r.value;a.enabled&&t.push(this.getRenderable(n.obtain(),e,a))}}catch(h){s.e(h)}finally{s.f()}}var o,u=i(e.getChildren());try{for(u.s();!(o=u.n()).done;){var l=o.value;this.getRenderablesWithNode(l,t,n)}}catch(h){u.e(h)}finally{u.f()}}},{key:"calculateTransforms",value:function(){for(var e=this.nodes.length,t=0;t<e;t++)this.nodes[t].calculateTransforms(!0);for(var n=0;n<e;n++)this.nodes[n].calculateBoneTransforms(!0)}},{key:"calculateBoundingBox",value:function(e){return e.inf(),this.extendBoundingBox(e)}},{key:"extendBoundingBox",value:function(e){for(var t=this.nodes.length,n=0;n<t;n++)this.nodes[n].extendBoundingBox(e);return e}},{key:"getAnimation",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.animations.length;if(n){for(var r=0;r<i;r++)if((t=this.animations[r]).id.toUpperCase()===e.toUpperCase())return t}else for(var s=0;s<i;s++)if((t=this.animations[s]).id===e)return t;return null}},{key:"getMaterial",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.materials.length;if(n){for(var r=0;r<i;r++)if((t=this.materials[r]).id.toUpperCase()===e.toUpperCase())return t}else for(var s=0;s<i;s++)if((t=this.materials[s]).id===e)return t;return null}}]),e}();t.ModelInstance=c,c.defaultShareKeyframes=!0},2596:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCamera=void 0;var s=n(4995),a=n(7811),o=n(4178),u=function(){function e(t,n,r){i(this,e),this.far=100,this.near=1,this.fieldOfView=67,this.viewportWidth=0,this.viewportHeight=0,this.up=new a.Vector3(0,1,0),this.position=new a.Vector3(0,0,0),this.direction=new a.Vector3(0,0,-1),this.view=new s.Matrix4,this.combined=new s.Matrix4,this.projection=new s.Matrix4,this.invProjectionView=new s.Matrix4,this.frustum=new o.Frustum,this.tmp=new a.Vector3,this.tmpVec=new a.Vector3,this.fieldOfView=t,this.viewportWidth=n,this.viewportHeight=r,this.update()}return r(e,[{key:"update",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.viewportWidth/this.viewportHeight;this.projection.projection(Math.abs(this.near),Math.abs(this.far),this.fieldOfView,t),this.tmp.set(this.position.x,this.position.y,this.position.z),this.tmp.add(this.direction),this.view.setToLookAt(this.position,this.tmp,this.up),this.combined.set(this.projection.values),this.combined.multiply(this.view),e&&(this.invProjectionView.set(this.combined.values),this.invProjectionView.invert(),this.frustum.update(this.invProjectionView))}},{key:"lookAt",value:function(e,t,n){if(this.tmpVec.set(e,t,n).sub(this.position).normalize(),!this.tmpVec.isZero()){var i=this.tmpVec.dot(this.up);Math.abs(i-1)<1e-9?this.up.set(this.direction.x,this.direction.y,this.direction.z).scale(-1):Math.abs(i+1)<1e-9&&this.up.set(this.direction.x,this.direction.y,this.direction.z),this.direction.set(this.tmpVec.x,this.tmpVec.y,this.tmpVec.z),this.normalizeUp()}}},{key:"normalizeUp",value:function(){this.tmpVec.set(this.direction.x,this.direction.y,this.direction.z).cross(this.up),this.up.set(this.tmpVec.x,this.tmpVec.y,this.tmpVec.z).cross(this.direction).normalize()}},{key:"translate",value:function(e){this.position.add(e)}},{key:"rotate",value:function(e,t){this.direction.rotate(e,t),this.up.rotate(e,t)}},{key:"rotateAround",value:function(e,t,n){this.tmpVec.set(e.x,e.y,e.z),this.tmpVec.sub(this.position),this.translate(this.tmpVec),this.rotate(t,n),this.tmpVec.rotate(t,n),this.translate(new a.Vector3(-this.tmpVec.x,-this.tmpVec.y,-this.tmpVec.z)),this.update()}}]),e}();t.PerspectiveCamera=u},5596:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RenderContext=void 0;var s=n(5394),a=function(){function e(t){i(this,e),this.textureBinder=t,this.gl=s.DefaultTextureBinder.gl}return r(e,[{key:"begin",value:function(){this.gl.disable(this.gl.DEPTH_TEST),this.depthFunc=0,this.gl.depthMask(!0),this.depthMask=!0,this.gl.disable(this.gl.BLEND),this.blending=!1,this.gl.disable(this.gl.CULL_FACE),this.cullFace=this.blendSFactor=this.blendDFactor=0,this.textureBinder.begin()}},{key:"end",value:function(){0!==this.depthFunc&&this.gl.disable(this.gl.DEPTH_TEST),this.depthMask||this.gl.depthMask(!0),this.blending&&this.gl.disable(this.gl.BLEND),this.cullFace>0&&this.gl.disable(this.gl.CULL_FACE),this.textureBinder.end()}},{key:"setDepthMask",value:function(e){this.depthMask!==e&&this.gl.depthMask(this.depthMask=e)}},{key:"setDepthTest",value:function(e,t,n){var i=0!==this.depthFunc,r=0!==e;this.depthFunc!==e&&(this.depthFunc=e,r?(this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(e)):this.gl.disable(this.gl.DEPTH_TEST)),r&&(i&&this.depthFunc===e||this.gl.depthFunc(this.depthFunc=e),i&&this.depthRangeNear===t&&this.depthRangeFar===n||this.gl.depthRange(this.depthRangeNear=t,this.depthRangeFar=n))}},{key:"setBlending",value:function(e,t,n){e!==this.blending&&(this.blending=e,e?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND)),!e||this.blendSFactor===t&&this.blendDFactor===n||(this.gl.blendFunc(t,n),this.blendSFactor=t,this.blendDFactor=n)}},{key:"setCullFace",value:function(e){e!==this.cullFace&&(this.cullFace=e,e===this.gl.FRONT||e===this.gl.BACK||e===this.gl.FRONT_AND_BACK?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(e)):this.gl.disable(this.gl.CULL_FACE))}}]),e}();t.RenderContext=a},2289:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Renderable=void 0;var s=n(4995),a=n(3627),o=function(){function e(){i(this,e),this.worldTransform=new s.Matrix4,this.meshPart=new a.MeshPart,this.bones=null}return r(e,[{key:"set",value:function(e){return this.worldTransform.set(e.worldTransform.values),this.material=e.material,this.meshPart.setByMeshPart(e.meshPart),this.bones=e.bones,this.environment=e.environment,this.shader=e.shader,this}}]),e}();t.Renderable=o},557:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0;var s=function(){function e(){i(this,e)}return r(e,[{key:"setType",value:function(e){this.type=e,this.typeBit=this.numberOfTrailingZeros(e)}},{key:"hashCode",value:function(){return 7489*this.typeBit}},{key:"equals",value:function(e){return!!e&&(e===this||!!e&&(this.type===e.type&&e.hashCode()===this.hashCode()))}},{key:"numberOfTrailingZeros",value:function(e){var t,n;if(0===e)return 64;var i=63;return 0!==(n=e)?(i-=32,t=n):t=e>>>32,0!==(n=t<<16)&&(i-=16,t=n),0!==(n=t<<8)&&(i-=8,t=n),0!==(n=t<<4)&&(i-=4,t=n),0!==(n=t<<2)&&(i-=2,t=n),i-(t<<1>>>31)}},{key:"toString",value:function(){return e.getAttributeAlias(this.type)}},{key:"copy",value:function(){return new e}}],[{key:"getAttributeType",value:function(t){for(var n=0;n<e.types.length;n++)if(e.types[n]===t)return 1<<n;return 0}},{key:"getAttributeAlias",value:function(t){for(var n=-1;0!==t&&++n<63&&0===(t>>n&1););return n>=0&&n<e.types.length?e.types[n]:null}},{key:"register",value:function(t){var n=this.getAttributeType(t);return n>0?n:(e.types.push(t),1<<e.types.length-1)}}]),e}();t.Attribute=s,s.types=[]},2802:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Attributes=void 0;var a=function(){function e(){r(this,e),this.attributes=[],this.sorted=!0}return s(e,[{key:"getMask",value:function(){return this.mask}},{key:"get",value:function(e){var t,n=i(this.attributes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.type===e)return r}}catch(s){n.e(s)}finally{n.f()}return null}},{key:"getArrayAttribute",value:function(e,t){var n,r=i(this.attributes);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.type===t&&e.push(s)}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"clear",value:function(){this.mask=0,this.attributes=[]}},{key:"size",value:function(){return this.attributes.length}},{key:"enable",value:function(e){this.mask|=e}},{key:"disable",value:function(e){this.mask&=~e}},{key:"set",value:function(e){var t=this.indexOf(e.type);t<0?(this.enable(e.type),this.attributes.push(e),this.sorted=!1):this.attributes[t]=e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.set(r)}}catch(s){n.e(s)}finally{n.f()}}},{key:"has",value:function(e){return 0!==e&&(this.mask&e)===e}},{key:"indexOf",value:function(e){if(this.has(e))for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].type===e)return t;return-1}},{key:"set2Attributes",value:function(e,t){this.set(e),this.set(t)}},{key:"set3Attributes",value:function(e,t,n){this.set(e),this.set(t),this.set(n)}},{key:"set4Attributes",value:function(e,t,n,i){this.set(e),this.set(t),this.set(n),this.set(i)}},{key:"setArrayAttribute",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.set(r)}}catch(s){n.e(s)}finally{n.f()}}},{key:"setAttribute",value:function(e){this.set(e)}},{key:"remove",value:function(e){for(var t=this.attributes.length-1;t>=0;t--){var n=this.attributes[t].type;(e&n)===n&&(this.attributes.splice(t,1),this.disable(n),this.sorted=!1)}}},{key:"compare",value:function(e,t){return e.type-t.type}},{key:"same",value:function(e,t){if(e===this)return!0;if(!e||this.mask!==e.mask)return!1;if(!t)return!0;for(var n=0;n<this.attributes.length;n++)if(!this.attributes[n].equals(e.attributes[n]))return!1;return!0}},{key:"equals",value:function(e){return!!e&&(e===this||this.same(e,!0))}}]),e}();t.Attributes=a},847:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BlendingAttribute=void 0;var u=n(8552),l=function(e){a(n,e);var t=o(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.GL20.GL_SRC_ALPHA,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.GL20.GL_ONE_MINUS_SRC_ALPHA,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return r(this,n),(e=t.call(this)).opacity=1,e.setType(e.type),e.blended=a,e.sourceFunction=i,e.destFunction=s,e.opacity=o,e}return s(n,[{key:"set",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.GL20.GL_SRC_ALPHA,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.GL20.GL_ONE_MINUS_SRC_ALPHA,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.type=n.Type,this.typeBit=this.numberOfTrailingZeros(this.type),this.blended=e,this.sourceFunction=t,this.destFunction=i,this.opacity=r}}],[{key:"is",value:function(e){return(e&this.Type)===e}}]),n}(n(557).Attribute);t.BlendingAttribute=l,i=l,l.Alias="blended",l.Type=i.register(i.Alias)},1733:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ColorAttribute3D=void 0;var u=n(8606),l=function(e){a(n,e);var t=o(n);function n(e,i){var s;return r(this,n),(s=t.call(this)).color=new u.Color,s.setType(e),i&&s.color.set(i.r,i.g,i.b,i.a),s}return s(n,[{key:"copy",value:function(){return new n(this.type,this.color)}}],[{key:"is",value:function(e){return 0!==(e&this.Mask)}},{key:"createAmbient",value:function(e){return new n(n.Ambient,e)}},{key:"createDiffuse",value:function(e){return new n(n.Diffuse,e)}},{key:"createSpecular",value:function(e){return new n(n.Specular,e)}},{key:"createReflection",value:function(e){return new n(n.Reflection,e)}},{key:"createEmissive",value:function(e){return new n(n.Emissive,e)}},{key:"createAmbientLight",value:function(e){return new n(n.AmbientLight,e)}},{key:"createFog",value:function(e){return new n(n.Fog,e)}}]),n}(n(557).Attribute);t.ColorAttribute3D=l,i=l,l.DiffuseAlias="diffuseColor",l.Diffuse=i.register(l.DiffuseAlias),l.SpecularAlias="specularColor",l.Specular=i.register(l.SpecularAlias),l.AmbientAlias="ambientColor",l.Ambient=i.register(l.AmbientAlias),l.EmissiveAlias="emissiveColor",l.Emissive=i.register(l.EmissiveAlias),l.ReflectionAlias="reflectionColor",l.Reflection=i.register(l.ReflectionAlias),l.AmbientLightAlias="ambientLightColor",l.AmbientLight=i.register(l.AmbientLightAlias),l.FogAlias="fogColor",l.Fog=i.register(l.FogAlias),l.Mask=i.Ambient|i.Diffuse|i.Specular|i.Emissive|i.Reflection|i.AmbientLight|i.Fog},9693:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLightsAttribute=void 0;var u=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.call(this)).setType(n.Type),e.lights=new Array,e}return s(n,[{key:"set",value:function(e){for(var t=0;t<e.lights.length;t++)this.lights[t]=e.lights[t]}},{key:"copy",value:function(){var e=new n;return e.set(this),e}},{key:"compareTo",value:function(e){return this.type!==e.type?this.type<e.type?-1:1:0}}],[{key:"is",value:function(e){return(e&n.Type)===e}}]),n}(n(557).Attribute);t.DirectionalLightsAttribute=u,i=u,u.Alias="directionalLights",u.Type=i.register(u.Alias)},5412:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.FloatAttribute=void 0;var u=function(e){a(n,e);var t=o(n);function n(e,i){var s;return r(this,n),(s=t.call(this)).setType(e),s.value=i,s}return s(n,[{key:"copy",value:function(){return new n(this.type,this.value)}}],[{key:"createShininess",value:function(e){return new n(n.Shininess,e)}},{key:"createAlphaTest",value:function(e){return new n(n.AlphaTest,e)}}]),n}(n(557).Attribute);t.FloatAttribute=u,i=u,u.ShininessAlias="shininess",u.Shininess=i.register(i.ShininessAlias),u.AlphaTestAlias="alphaTest",u.AlphaTest=i.register(u.AlphaTestAlias)},603:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.IntAttribute=void 0;var u=function(e){a(n,e);var t=o(n);function n(e){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(this,n),(i=t.call(this)).setType(e),i.value=s,i}return s(n,[{key:"copy",value:function(){return new n(this.type,this.value)}}],[{key:"createCullFace",value:function(e){return new n(n.CullFace,e)}}]),n}(n(557).Attribute);t.IntAttribute=u,i=u,u.CullFaceAlias="cullface",u.CullFace=i.register(u.CullFaceAlias)},4836:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PointLightsAttribute=void 0;var u=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.call(this)).setType(n.Type),e.lights=new Array,e}return s(n,[{key:"set",value:function(e){for(var t=0;t<e.lights.length;t++)this.lights[t]=e.lights[t]}},{key:"copy",value:function(){var e=new n;return e.set(this),e}},{key:"compareTo",value:function(e){return this.type!==e.type?this.type<e.type?-1:1:0}}],[{key:"is",value:function(e){return(e&n.Type)===e}}]),n}(n(557).Attribute);t.PointLightsAttribute=u,i=u,u.Alias="pointLights",u.Type=i.register(u.Alias)},1148:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLightsAttribute=void 0;var u=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.call(this)).setType(n.Type),e.lights=new Array,e}return s(n,[{key:"set",value:function(e){for(var t=0;t<e.lights.length;t++)this.lights[t]=e.lights[t]}},{key:"copy",value:function(){var e=new n;return e.set(this),e}},{key:"compareTo",value:function(e){return this.type!==e.type?this.type<e.type?-1:1:0}}],[{key:"is",value:function(e){return(e&n.Type)===e}}]),n}(n(557).Attribute);t.SpotLightsAttribute=u,i=u,u.Alias="spotLights",u.Type=i.register(u.Alias)},2398:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAttribute=void 0;var u=function(e){a(n,e);var t=o(n);function n(e){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return r(this,n),(i=t.call(this)).offsetU=0,i.offsetV=0,i.scaleU=1,i.scaleV=1,i.uvIndex=0,i.offsetU=s,i.offsetV=a,i.scaleU=o,i.scaleV=u,i.setType(e),i}return s(n,[{key:"setTextureRegion",value:function(e){this.texture=e.texture,this.offsetU=e.u,this.offsetV=e.v,this.scaleU=e.u2-this.offsetU,this.scaleV=e.v2-this.offsetV}},{key:"setTexture",value:function(e){this.texture=e}},{key:"setOffset",value:function(e,t){this.offsetU=e,this.offsetV=t}},{key:"setScale",value:function(e,t){this.scaleU=e,this.scaleV=t}},{key:"copy",value:function(){var e=new n(this.type);return e.offsetU=this.offsetU,e.offsetV=this.offsetV,e.scaleU=this.scaleU,e.scaleV=this.scaleV,e.uvIndex=this.uvIndex,e.texture=this.texture,e}}],[{key:"is",value:function(e){return 0!==(e&n.Mask)}},{key:"createDiffuse",value:function(e){var t=new n(n.Diffuse);return t.setTextureRegion(e),t}},{key:"createSpecular",value:function(e){var t=new n(n.Specular);return t.setTextureRegion(e),t}},{key:"createNormal",value:function(e){var t=new n(n.Normal);return t.setTextureRegion(e),t}},{key:"createBump",value:function(e){var t=new n(n.Bump);return t.setTextureRegion(e),t}},{key:"createAmbient",value:function(e){var t=new n(n.Ambient);return t.setTextureRegion(e),t}},{key:"createEmissive",value:function(e){var t=new n(n.Emissive);return t.setTextureRegion(e),t}},{key:"createReflection",value:function(e){var t=new n(n.Reflection);return t.setTextureRegion(e),t}}]),n}(n(557).Attribute);t.TextureAttribute=u,i=u,u.DiffuseAlias="diffuseTexture",u.Diffuse=i.register(u.DiffuseAlias),u.SpecularAlias="specularTexture",u.Specular=i.register(u.SpecularAlias),u.BumpAlias="bumpTexture",u.Bump=i.register(u.BumpAlias),u.NormalAlias="normalTexture",u.Normal=i.register(u.NormalAlias),u.AmbientAlias="ambientTexture",u.Ambient=i.register(u.AmbientAlias),u.EmissiveAlias="emissiveTexture",u.Emissive=i.register(u.EmissiveAlias),u.ReflectionAlias="reflectionTexture",u.Reflection=i.register(u.ReflectionAlias),u.Mask=i.Diffuse|i.Specular|i.Bump|i.Normal|i.Ambient|i.Emissive|i.Reflection},8633:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VertexAttribute3D=t.Usage=void 0;var s=n(1858),a=n(8552),o=i((function e(){r(this,e)}));t.Usage=o,o.Position=1,o.ColorUnpacked=2,o.ColorPacked=4,o.Normal=8,o.TextureCoordinates=16,o.Generic=32,o.BoneWeight=64,o.Tangent=128,o.BiNormal=256;var u=function(){function e(t,n,i,s,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,e),this.usage=t,this.numComponents=n,this.type=i,this.normalized=s,this.alias=a,this.unit=o,this.usageIndex=this.numberOfTrailingZeros(t)}return i(e,[{key:"copy",value:function(){return new e(this.usage,this.numComponents,this.type,this.normalized,this.alias,this.unit)}},{key:"getKey",value:function(){return(this.usageIndex<<8)+(255&this.unit)}},{key:"numberOfTrailingZeros",value:function(e){for(var t=0,n=5;n<=e;n+=5)for(var i=n;i%5===0;)i/=5,t++;return t}},{key:"getSizeInBytes",value:function(){switch(this.type){case a.GL20.GL_FLOAT:case a.GL20.GL_FIXED:return 4*this.numComponents;case a.GL20.GL_UNSIGNED_BYTE:case a.GL20.GL_BYTE:return this.numComponents;case a.GL20.GL_UNSIGNED_SHORT:case a.GL20.GL_SHORT:return 2*this.numComponents}return 0}},{key:"equals",value:function(e){return!!e&&this.usage===e.usage&&this.numComponents===e.numComponents&&this.type===e.type&&this.normalized===e.normalized&&this.alias===e.alias&&this.unit===e.unit}}],[{key:"Position",value:function(){return new e(o.Position,3,a.GL20.GL_FLOAT,!1,s.Shader.POSITION,0)}},{key:"TexCoords",value:function(t){return new e(o.TextureCoordinates,2,a.GL20.GL_FLOAT,!1,s.Shader.TEXCOORDS+t,t)}},{key:"Normal",value:function(){return new e(o.Normal,3,a.GL20.GL_FLOAT,!1,s.Shader.NORMAL)}},{key:"ColorPacked",value:function(){return new e(o.ColorPacked,4,a.GL20.GL_UNSIGNED_BYTE,!0,s.Shader.COLOR)}},{key:"ColorUnpacked",value:function(){return new e(o.ColorUnpacked,4,a.GL20.GL_FLOAT,!1,s.Shader.COLOR)}},{key:"Tangent",value:function(){return new e(o.Tangent,3,a.GL20.GL_FLOAT,!1,s.Shader.TANGENT)}},{key:"Binormal",value:function(){return new e(o.BiNormal,3,a.GL20.GL_FLOAT,!1,s.Shader.BINORMAL)}},{key:"BoneWeight",value:function(t){return new e(o.BoneWeight,2,a.GL20.GL_FLOAT,!1,s.Shader.BONEWEIGHT+t,t)}}]),e}();t.VertexAttribute3D=u},427:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VertexAttributes=void 0;var a=function(){function e(t){if(r(this,e),this.mask=-1,0===t.length)throw new Error("attributes must be >= 1");for(var n=[],i=0;i<t.length;i++)n[i]=t[i];this.attributes=n,this.vertexSize=this.calculateOffsets()}return s(e,[{key:"getOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.findByUsage(e);return n?n.offset/4:t}},{key:"findByUsage",value:function(e){var t,n=i(this.attributes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.usage===e)return r}}catch(s){n.e(s)}finally{n.f()}return null}},{key:"calculateOffsets",value:function(){for(var e=0,t=0;t<this.attributes.length;t++)this.attributes[t].offset=e,e+=this.attributes[t].getSizeInBytes();return e}},{key:"size",value:function(){return this.attributes.length}},{key:"get",value:function(e){return this.attributes[e]}},{key:"toString",value:function(){for(var e="[",t=0;t<this.attributes.length;t++)e+="(",e+=this.attributes[t].alias,e+=", ",e+=this.attributes[t].usage,e+=", ",e+=this.attributes[t].numComponents,e+=", ",e+=this.attributes[t].offset,e+=")",e+="\n";return e+="]"}},{key:"equals",value:function(e){if(e===this)return!0;if(this.attributes.length!==e.attributes.length)return!1;for(var t=0;t<this.attributes.length;t++)if(!this.attributes[t].equals(e.attributes[t]))return!1;return!0}},{key:"getMask",value:function(){if(-1===this.mask){for(var e=0,t=0;t<this.attributes.length;t++)e|=this.attributes[t].usage;this.mask=e}return this.mask}},{key:"getMaskWithSizePacked",value:function(){return this.getMask()|this.attributes.length<<32}}]),e}();t.VertexAttributes=a},7316:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(557),t),r(n(2802),t),r(n(847),t),r(n(1733),t),r(n(9693),t),r(n(5412),t),r(n(603),t),r(n(4836),t),r(n(1148),t),r(n(2398),t),r(n(8633),t),r(n(427),t)},7299:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AmbientCubemap=void 0;var s=n(8606),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(i(this,e),t){if(t.length!==e.NUM_VALUES)throw new Error("Incorrect array size");this.data=new Array(t.length),s.Utils.arrayCopy(t,0,this.data,0,this.data.length)}else this.data=new Array(e.NUM_VALUES)}return r(e,[{key:"setData",value:function(e){for(var t=0;t<this.data.length;t++)this.data[t]=e[t];return this}},{key:"setColor",value:function(t,n,i){for(var r=0;r<e.NUM_VALUES;)this.data[r]=t,this.data[r+1]=n,this.data[r+2]=i,r+=3;return this}},{key:"getColor",value:function(e,t){return t*=3,e.set(this.data[t],this.data[t+1],this.data[t+2],1)}},{key:"clear",value:function(){for(var e=0;e<this.data.length;e++)this.data[e]=0;return this}},{key:"clamp",value:function(){for(var t=0;t<this.data.length;t++)this.data[t]=e.clamp(this.data[t]);return this}},{key:"addColor",value:function(e,t,n){for(var i=0;i<this.data.length;)this.data[i++]+=e,this.data[i++]+=t,this.data[i++]+=n;return this}},{key:"add",value:function(e,t,n,i,r,s){var a=i*i,o=r*r,u=s*s,l=a+o+u;if(0===l)return this;var h=e*(l=1/l*(l+1)),c=t*l,f=n*l,d=i>0?0:3;return this.data[d]+=a*h,this.data[d+1]+=a*c,this.data[d+2]+=a*f,d=r>0?6:9,this.data[d]+=o*h,this.data[d+1]+=o*c,this.data[d+2]+=o*f,d=s>0?12:15,this.data[d]+=u*h,this.data[d+1]+=u*c,this.data[d+2]+=u*f,this}},{key:"addWithColorAndDirection",value:function(e,t){return this.add(e.r,e.g,e.b,t.x,t.y,t.z)}},{key:"addWithPointTarget",value:function(e,t,n){return this.add(e.r,e.g,e.b,n.x-t.x,n.y-t.y,n.z-t.z)}},{key:"addWithPointTargetIntensity",value:function(e,t,n,i){var r=i/(1+n.distance(t));return this.add(e.r*r,e.g*r,e.b*r,n.x-t.x,n.y-t.y,n.z-t.z)}},{key:"toString",value:function(){for(var e="",t=0;t<this.data.length;t+=3)e+=this.data[t]+", "+this.data[t+1]+", "+this.data[t+2]+"\n";return e}}],[{key:"clamp",value:function(e){return e<0?0:e>1?1:e}}]),e}();t.AmbientCubemap=a,a.NUM_VALUES=18},5847:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLight=void 0;var s=n(8606),a=function(){function e(){i(this,e),this.color=new s.Color(0,0,0,1)}return r(e,[{key:"setColor",value:function(e,t,n,i){return this.color.set(e,t,n,i),this}}]),e}();t.BaseLight=a},1843:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default,s=n(1655).default,a=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLight=void 0;var o=n(7811),u=function(e){s(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).direction=new o.Vector3,e}return r(n,[{key:"setDirection",value:function(e,t,n){return this.direction.set(e,t,n),this}},{key:"setFrom",value:function(e,t){return e&&this.color.set(e.r,e.g,e.b,e.a),t&&this.direction.setFrom(t).normalize(),this}},{key:"set",value:function(e,t,n,i,r,s){return this.color.set(e,t,n,1),this.direction.set(i,r,s).normalize(),this}},{key:"equals",value:function(e){return!!e&&(e===this||this.color.equals(e.color)&&this.direction.equals(e.direction))}}]),n}(n(5847).BaseLight);t.DirectionalLight=u},8798:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0;var u=n(2802),l=n(9693),h=n(4836),c=n(1148),f=n(1843),d=n(1139),v=n(2036),p=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return s(n,[{key:"addLights",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addLight(r)}}catch(s){n.e(s)}finally{n.f()}return this}},{key:"addLight",value:function(e){if(e instanceof f.DirectionalLight)this.addDirectionalLight(e);else if(e instanceof d.PointLight)this.addPointLight(e);else{if(!(e instanceof v.SpotLight))throw new Error("Unknown light type");this.addSpotLight(e)}return this}},{key:"addDirectionalLight",value:function(e){var t=this.get(l.DirectionalLightsAttribute.Type);return t||this.set(t=new l.DirectionalLightsAttribute),t.lights.push(e),this}},{key:"addPointLight",value:function(e){var t=this.get(h.PointLightsAttribute.Type);return t||this.set(t=new h.PointLightsAttribute),t.lights.push(e),this}},{key:"addSpotLight",value:function(e){var t=this.get(c.SpotLightsAttribute.Type);return t||this.set(t=new c.SpotLightsAttribute),t.lights.push(e),this}},{key:"removeLights",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.removeLight(r)}}catch(s){n.e(s)}finally{n.f()}return this}},{key:"removeLight",value:function(e){if(e instanceof f.DirectionalLight)this.removeDirectionalLight(e);else if(e instanceof d.PointLight)this.removePointLight(e);else{if(!(e instanceof v.SpotLight))throw new Error("Unknown light type");this.removeSpotLight(e)}return this}},{key:"removeDirectionalLight",value:function(e){if(this.has(l.DirectionalLightsAttribute.Type)){var t=this.get(l.DirectionalLightsAttribute.Type),n=t.lights.indexOf(e,0);n>-1&&t.lights.splice(n,1),0===t.lights.length&&this.remove(l.DirectionalLightsAttribute.Type)}return this}},{key:"removePointLight",value:function(e){if(this.has(h.PointLightsAttribute.Type)){var t=this.get(h.PointLightsAttribute.Type),n=t.lights.indexOf(e,0);n>-1&&t.lights.splice(n,1),0===t.lights.length&&this.remove(h.PointLightsAttribute.Type)}return this}},{key:"removeSpotLight",value:function(e){if(this.has(c.SpotLightsAttribute.Type)){var t=this.get(c.SpotLightsAttribute.Type),n=t.lights.indexOf(e,0);n>-1&&t.lights.splice(n,1),0===t.lights.length&&this.remove(c.SpotLightsAttribute.Type)}return this}}]),n}(u.Attributes);t.Environment=p},1139:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default,s=n(1655).default,a=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PointLight=void 0;var o=n(7811),u=function(e){s(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).position=new o.Vector3,e}return r(n,[{key:"setPosition",value:function(e,t,n){return this.position.set(e,t,n),this}},{key:"setIntensity",value:function(e){return this.intensity=e,this}},{key:"setFrom",value:function(e){return this.set(e.color,e.position,e.intensity)}},{key:"set",value:function(e,t,n){return e&&this.color.setFromColor(e),t&&this.position.setFrom(t),this.intensity=n,this}},{key:"setFromValue",value:function(e,t,n,i,r,s,a){return this.color.set(e,t,n,1),this.position.set(i,r,s),this.intensity=a,this}},{key:"equals",value:function(e){return!!e&&(e===this||this.color.equals(e.color)&&this.position.equals(e.position)&&this.intensity===e.intensity)}}]),n}(n(5847).BaseLight);t.PointLight=u},2036:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default,s=n(1655).default,a=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLight=void 0;var o=n(8606),u=n(7811),l=function(e){s(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).position=new u.Vector3,e.direction=new u.Vector3,e}return r(n,[{key:"setPosition",value:function(e,t,n){return this.position.set(e,t,n),this}},{key:"setDirection",value:function(e,t,n){return this.direction.set(e,t,n),this}},{key:"setIntensity",value:function(e){return this.intensity=e,this}},{key:"setCutoffAngle",value:function(e){return this.cutoffAngle=e,this}},{key:"setExponent",value:function(e){return this.exponent=e,this}},{key:"set",value:function(e,t,n,i,r,s){return e&&this.color.setFromColor(e),t&&this.position.setFrom(t),n&&this.direction.setFrom(n).normalize(),this.intensity=i,this.cutoffAngle=r,this.exponent=s,this}},{key:"setFromValue",value:function(e,t,n,i,r,s,a,o,u,l,h,c){return this.color.set(e,t,n,1),this.position.set(i,r,s),this.direction.set(a,o,u).normalize(),this.intensity=l,this.cutoffAngle=h,this.exponent=c,this}},{key:"setFrom",value:function(e){return this.set(e.color,e.position,e.direction,e.intensity,e.cutoffAngle,e.exponent)}},{key:"setTarget",value:function(e){return this.direction.set(e.x,e.y,e.z).sub(this.position).normalize(),this}},{key:"equals",value:function(e){return!!e&&(e===this||this.color.equals(e.color)&&this.position.equals(e.position)&&this.direction.equals(e.direction)&&o.MathUtils.isEqual(this.intensity,e.intensity)&&o.MathUtils.isEqual(this.cutoffAngle,e.cutoffAngle)&&o.MathUtils.isEqual(this.exponent,e.exponent))}}]),n}(n(5847).BaseLight);t.SpotLight=l},3954:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(7299),t),r(n(5847),t),r(n(1843),t),r(n(8798),t),r(n(1139),t),r(n(2036),t)},6893:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(7316),t),r(n(2695),t),r(n(1341),t),r(n(5394),t),r(n(3954),t),r(n(8552),t),r(n(1055),t),r(n(4023),t),r(n(4286),t),r(n(5766),t),r(n(4501),t),r(n(7893),t),r(n(5920),t),r(n(2596),t),r(n(2289),t),r(n(5596),t),r(n(7452),t),r(n(3975),t)},8395:function(e,t,n){"use strict";var i=n(4704).default,r=n(7061).default,s=n(6690).default,a=n(9728).default,o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.G3dModelLoader=void 0;var u=n(4995),l=n(5122),h=n(8606),c=n(2283),f=n(7811),d=n(8633),v=n(8552),p=n(129),g=n(8896),m=n(798),y=n(779),b=n(3710),M=n(4610),x=n(7416),_=n(707),w=n(3309),k=n(9373),T=n(663),E=n(6764),L=function(){function e(){s(this,e),this.tempQ=new l.Quaternion,this.reader=new E.UBJsonReader}return a(e,[{key:"load",value:function(e,t){return o(this,void 0,void 0,r().mark((function n(){var i,s,a,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.split(".").pop(),s="g3db"===i,n.next=4,this.parseModel(t,s);case 4:return a=n.sent,o=new T.Model(e),n.next=8,o.load(a);case 8:return n.abrupt("return",o);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"parseModel",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o(this,void 0,void 0,r().mark((function i(){var s,a,o,u,l,h;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s=t.substring(0,t.lastIndexOf("/")),!n){i.next=8;break}return i.next=4,fetch(t).then((function(e){return e.arrayBuffer()}));case 4:o=i.sent,a=this.reader.parse(o),i.next=12;break;case 8:return i.next=10,fetch(t).then((function(e){return e.text()}));case 10:u=i.sent,a=JSON.parse(u);case 12:if(l=new g.ModelData,h=a.version,l.version[0]=h[0],l.version[1]=h[1],l.version[0]===e.VERSION_HI&&l.version[1]===e.VERSION_LO){i.next=18;break}throw new Error("Model version not supported");case 18:return l.id=this.getString(a.id,""),this.parseMeshes(l,a),this.parseMaterials(l,a,s),this.parseNodes(l,a),this.parseAnimations(l,a),i.abrupt("return",l);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"parseMeshes",value:function(e,t){var n=t.meshes;if(void 0!==n){var r,s=i(n);try{for(s.s();!(r=s.n()).done;){var a=r.value,o=new y.ModelMesh,u=this.getString(a.id,"");o.id=u;var l=a.attributes;o.attributes=this.parseAttributes(l),o.vertices=a.vertices;var h,c=a.parts,f=new Array,d=i(c);try{for(d.s();!(h=d.n()).done;){var v=h.value,p=new b.ModelMeshPart,g=this.getString(v.id,null);if(!g)throw new Error("Not id given for mesh part");var m,M=i(f);try{for(M.s();!(m=M.n()).done;){if(m.value.id===g)throw new Error("Mesh part with id '"+g+"' already in defined")}}catch(_){M.e(_)}finally{M.f()}p.id=g;var x=this.getString(v.type,null);if(!x)throw new Error("No primitive type given for mesh part '"+g+"'");p.primitiveType=this.parseType(x),p.indices=v.indices,f.push(p)}}catch(_){d.e(_)}finally{d.f()}o.parts=f,e.meshes.push(o)}}catch(_){s.e(_)}finally{s.f()}}}},{key:"parseType",value:function(e){if("TRIANGLES"===e)return v.GL20.GL_TRIANGLES;if("LINES"===e)return v.GL20.GL_LINES;if("POINTS"===e)return v.GL20.GL_POINTS;if("TRIANGLE_STRIP"===e)return v.GL20.GL_TRIANGLE_STRIP;if("LINE_STRIP"===e)return v.GL20.GL_LINE_STRIP;throw new Error("Unknown primitive type '"+e+"', should be one of triangle, trianglestrip, line, linestrip, lineloop or point")}},{key:"parseAttributes",value:function(e){var t,n=new Array,r=0,s=0,a=i(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if("POSITION"===o)n.push(d.VertexAttribute3D.Position());else if("NORMAL"===o)n.push(d.VertexAttribute3D.Normal());else if("COLOR"===o)n.push(d.VertexAttribute3D.ColorUnpacked());else{if("COLORPACKED"===o)throw Error("ColorPacked currently not supported");if("TANGENT"===o)n.push(d.VertexAttribute3D.Tangent());else if("BINORMAL"===o)n.push(d.VertexAttribute3D.Binormal());else if(o.startsWith("TEXCOORD"))n.push(d.VertexAttribute3D.TexCoords(r++));else{if(!o.startsWith("BLENDWEIGHT"))throw new Error("Unknown vertex attribute '"+o+"', should be one of position, normal, uv, tangent or binormal");n.push(d.VertexAttribute3D.BoneWeight(s++))}}}}catch(u){a.e(u)}finally{a.f()}return n}},{key:"parseMaterials",value:function(e,t,n){var r=t.materials;if(void 0!==r){var s,a=i(r);try{for(a.s();!(s=a.n()).done;){var o=s.value,u=new m.ModelMaterial,l=this.getString(o.id,null);if(!l)throw new Error("Material needs an id.");u.id=l;var h=o.diffuse;void 0!==h&&(u.diffuse=this.parseColor(h));var c=o.ambient;void 0!==c&&(u.ambient=this.parseColor(c));var f=o.emissive;void 0!==f&&(u.emissive=this.parseColor(f));var d=o.specular;void 0!==d&&(u.specular=this.parseColor(d));var v=o.reflection;void 0!==v&&(u.reflection=this.parseColor(v)),u.shininess=this.getFloat(o.shininess,0),u.opacity=this.getFloat(o.opacity,1);var p=o.textures;if(void 0!==p){var g,y=i(p);try{for(y.s();!(g=y.n()).done;){var b=g.value,M=new k.ModelTexture,x=this.getString(b.id,null);if(!x)throw new Error("Texture has no id.");M.id=x;var _=this.getString(b.filename,null);if(!_)throw new Error("Texture needs filename.");M.fileName=n+(0===n.length||n.endsWith("/")?"":"/")+_,M.uvTranslation=this.readVector2(b.uvTranslation,0,0),M.uvScaling=this.readVector2(b.uvScaling,1,1);var w=this.getString(b.type,null);if(void 0===w)throw new Error("Texture needs type.");M.usage=this.parseTextureUsage(w),void 0===u.textures&&(u.textures=new Array),u.textures.push(M)}}catch(T){y.e(T)}finally{y.f()}}e.materials.push(u)}}catch(T){a.e(T)}finally{a.f()}}}},{key:"parseTextureUsage",value:function(e){return"AMBIENT"===e.toUpperCase()?k.ModelTexture.USAGE_AMBIENT:"BUMP"===e.toUpperCase()?k.ModelTexture.USAGE_BUMP:"DIFFUSE"===e.toUpperCase()?k.ModelTexture.USAGE_DIFFUSE:"EMISSIVE"===e.toUpperCase()?k.ModelTexture.USAGE_EMISSIVE:"NONE"===e.toUpperCase()?k.ModelTexture.USAGE_NONE:"NORMAL"===e.toUpperCase()?k.ModelTexture.USAGE_NORMAL:"REFLECTION"===e.toUpperCase()?k.ModelTexture.USAGE_REFLECTION:"SHININESS"===e.toUpperCase()?k.ModelTexture.USAGE_SHININESS:"SPECULAR"===e.toUpperCase()?k.ModelTexture.USAGE_SPECULAR:"TRANSPARENCY"===e.toUpperCase()?k.ModelTexture.USAGE_TRANSPARENCY:k.ModelTexture.USAGE_UNKNOWN}},{key:"parseColor",value:function(e){if(e.length>=3)return new h.Color(e[0],e[1],e[2],1);throw new Error("Expected Color values <> than three.")}},{key:"readVector2",value:function(e,t,n){if(void 0===e)return new c.Vector2(t,n);if(2===e.length)return new c.Vector2(e[0],e[1]);throw new Error("Expected Vector2 values <> than two.")}},{key:"parseNodes",value:function(e,t){var n=t.nodes;if(void 0!==n){var r,s=i(n);try{for(s.s();!(r=s.n()).done;){var a=r.value;e.nodes.push(this.parseNodesRecursively(a))}}catch(o){s.e(o)}finally{s.f()}}return e.nodes}},{key:"parseNodesRecursively",value:function(e){var t=new M.ModelNode,n=this.getString(e.id,null);if(!n)throw new Error("Node id missing.");t.id=n;var r=e.translation;if(void 0!==r&&3!==r.length)throw new Error("Node translation incomplete");t.translation=void 0===r?null:new f.Vector3(r[0],r[1],r[2]);var s=e.rotation;if(void 0!==s&&4!==s.length)throw new Error("Node rotation incomplete");t.rotation=void 0===s?null:new l.Quaternion(s[0],s[1],s[2],s[3]);var a=e.scale;if(void 0!==a&&3!==a.length)throw new Error("Node scale incomplete");t.scale=void 0===a?null:new f.Vector3(a[0],a[1],a[2]);var o=this.getString(e.mesh,null);o&&(t.meshId=o);var c=e.parts;if(void 0!==c){t.parts=new Array;var d,v=0,p=i(c);try{for(p.s();!(d=p.n()).done;){var g=d.value,m=new w.ModelNodePart,y=this.getString(g.meshpartid,null),b=this.getString(g.materialid,null);if(!y||!b)throw new Error("Node "+n+" part is missing meshPartId or materialId");m.materialId=b,m.meshPartId=y;var x=g.bones;if(void 0!==x){m.bones=new h.ArrayMap;var _,k=i(x);try{for(k.s();!(_=k.n()).done;){var T=_.value,E=this.getString(T.node,null);if(!E)throw new Error("Bone node ID missing");var L=new u.Matrix4,A=T.translation;A&&A.length>=3&&L.translate(A[0],A[1],A[2]),(A=T.rotation)&&A.length>=4&&L.rotate(this.tempQ.set(A[0],A[1],A[2],A[3])),(A=T.scale)&&A.length>=3&&L.scale(A[0],A[1],A[2]),m.bones.set(E,L)}}catch(O){k.e(O)}finally{k.f()}}t.parts[v]=m,v++}}catch(O){p.e(O)}finally{p.f()}}var S=e.children;if(void 0!==S){t.children=new Array;var C,P=0,I=i(S);try{for(I.s();!(C=I.n()).done;){var R=C.value;t.children[P]=this.parseNodesRecursively(R),P++}}catch(O){I.e(O)}finally{I.f()}}return t}},{key:"parseAnimations",value:function(e,t){var n=t.animations;if(n){var r,s=i(n);try{for(s.s();!(r=s.n()).done;){var a=r.value,o=a.bones;if(void 0!==o){var u=new p.ModelAnimation;e.animations.push(u),u.id=a.id;var h,c=i(o);try{for(c.s();!(h=c.n()).done;){var d=h.value,v=new x.ModelNodeAnimation;u.nodeAnimations.push(v),v.nodeId=d.boneId;var g=d.keyframes;if(void 0!==g&&Array.isArray(g)){var m,y=i(g);try{for(y.s();!(m=y.n()).done;){var b=m.value,M=this.getFloat(b.keytime,0)/1e3,w=b.translation;if(void 0!==w&&3===w.length){v.translation||(v.translation=new Array);var k=new _.ModelNodeKeyframe;k.keytime=M,k.value=new f.Vector3(w[0],w[1],w[2]),v.translation.push(k)}var T=b.rotation;if(void 0!==T&&4===T.length){v.rotation||(v.rotation=new Array);var E=new _.ModelNodeKeyframe;E.keytime=M,E.value=new l.Quaternion(T[0],T[1],T[2],T[3]),v.rotation.push(E)}var L=b.scale;if(void 0!==L&&3===L.length){v.scaling||(v.scaling=new Array);var A=new _.ModelNodeKeyframe;A.keytime=M,A.value=new f.Vector3(L[0],L[1],L[2]),v.scaling.push(A)}}}catch(Y){y.e(Y)}finally{y.f()}}else{var S=d.translation;if(void 0!==S&&Array.isArray(S)){v.translation=new Array;var C,P=i(S);try{for(P.s();!(C=P.n()).done;){var I=C.value,R=new _.ModelNodeKeyframe;v.translation.push(R),R.keytime=this.getFloat(I.keytime,0)/1e3;var O=I.value;void 0!==O&&O.length>=3&&(R.value=new f.Vector3(O[0],O[1],O[2]))}}catch(Y){P.e(Y)}finally{P.f()}}var N=d.rotation;if(N&&Array.isArray(N)){v.rotation=new Array;var F,U=i(N);try{for(U.s();!(F=U.n()).done;){var V=F.value,D=new _.ModelNodeKeyframe;v.rotation.push(D),D.keytime=this.getFloat(V.keytime,0)/1e3;var B=V.value;void 0!==B&&B.length>=4&&(D.value=new l.Quaternion(B[0],B[1],B[2],B[3]))}}catch(Y){U.e(Y)}finally{U.f()}}var G=d.scaling;if(G&&Array.isArray(G)){v.scaling=new Array;var z,W=i(G);try{for(W.s();!(z=W.n()).done;){var j=z.value,H=new _.ModelNodeKeyframe;v.scaling.push(H),H.keytime=this.getFloat(j.keytime,0)/1e3;var X=j.value;void 0!==X&&X.length>=3&&(H.value=new f.Vector3(X[0],X[1],X[2]))}}catch(Y){W.e(Y)}finally{W.f()}}}}}catch(Y){c.e(Y)}finally{c.f()}}}}catch(Y){s.e(Y)}finally{s.f()}}}},{key:"getString",value:function(e,t){return void 0!==e?e:t}},{key:"getFloat",value:function(e,t){return void 0!==e?e:t}}]),e}();t.G3dModelLoader=L,L.VERSION_HI=0,L.VERSION_LO=1},7503:function(e,t,n){"use strict";var i=n(4704).default,r=n(7061).default,s=n(9728).default,a=n(6690).default,o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjLoader=t.MtlLoader=t.ObjMaterial=void 0;var u=n(5122),l=n(1858),h=n(8606),c=n(7811),f=n(8633),d=n(8552),v=n(4023),p=n(8896),g=n(798),m=n(779),y=n(3710),b=n(4610),M=n(3309),x=n(9373),_=n(663),w=s((function e(t){a(this,e),this.name=t,this.faces=[],this.numFaces=0,this.mat=new v.Material(""),this.materialName="default"})),k=function(){function e(){a(this,e),this.materialName="default",this.reset()}return s(e,[{key:"build",value:function(){var e=new g.ModelMaterial;return e.id=this.materialName,e.ambient=this.ambientColor?new h.Color(this.ambientColor.r,this.ambientColor.g,this.ambientColor.b,this.ambientColor.a):null,e.diffuse=new h.Color(this.diffuseColor.r,this.diffuseColor.g,this.diffuseColor.b,this.diffuseColor.a),e.specular=new h.Color(this.specularColor.r,this.specularColor.g,this.specularColor.b,this.specularColor.a),e.opacity=this.opacity,e.shininess=this.shininess,this.addTexture(e,this.alphaTexFilename,x.ModelTexture.USAGE_TRANSPARENCY),this.addTexture(e,this.ambientTexFilename,x.ModelTexture.USAGE_AMBIENT),this.addTexture(e,this.diffuseTexFilename,x.ModelTexture.USAGE_DIFFUSE),this.addTexture(e,this.specularTexFilename,x.ModelTexture.USAGE_SPECULAR),this.addTexture(e,this.shininessTexFilename,x.ModelTexture.USAGE_SHININESS),e}},{key:"addTexture",value:function(e,t,n){if(t){var i=new x.ModelTexture;i.usage=n,i.fileName=t,void 0===e.textures&&(e.textures=new Array),e.textures.push(i)}}},{key:"reset",value:function(){this.ambientColor=null,this.diffuseColor=h.Color.WHITE,this.specularColor=h.Color.WHITE,this.opacity=1,this.shininess=0,this.alphaTexFilename=null,this.ambientTexFilename=null,this.diffuseTexFilename=null,this.shininessTexFilename=null,this.specularTexFilename=null}}]),e}();t.ObjMaterial=k;var T=function(){function e(){a(this,e),this.materials=new Array}return s(e,[{key:"load",value:function(e){return o(this,void 0,void 0,r().mark((function t(){var n,i,s,a,o,u,l,h,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=new k,0!==e.length){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,fetch(e);case 5:if((a=t.sent).ok){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,a.text();case 10:o=t.sent,u=o.split("\n").map((function(e){return e.trim()})),l=0,t.prev=13;case 14:if(void 0===(n=u[l])){t.next=30;break}if(l++,n.length>0&&"\t"===n.charAt(0)&&(n=n.substring(1).trim()),0!==(i=n.split(" "))[0].length){t.next=22;break}return t.abrupt("continue",14);case 22:if("#"!==i[0].charAt(0)){t.next=26;break}return t.abrupt("continue",14);case 26:"newmtl"===(h=i[0].toLowerCase())?(c=s.build(),this.materials.push(c),i.length>1?(s.materialName=i[1],s.materialName=s.materialName.replace(".","_")):s.materialName="default",s.reset()):"ka"===h?s.ambientColor=this.parseColor(i):"kd"===h?s.diffuseColor=this.parseColor(i):"ks"===h?s.specularColor=this.parseColor(i):"tr"===h||"d"===h?s.opacity=parseFloat(i[1]):"ns"===h?s.shininess=parseFloat(i[1]):"map_d"===h?s.alphaTexFilename=i[1]:"map_ka"===h?s.ambientTexFilename=i[1]:"map_kd"===h?s.diffuseTexFilename=i[1]:"map_ks"===h?s.specularTexFilename=i[1]:"map_ns"===h&&(s.shininessTexFilename=i[1]);case 28:t.next=14;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(13),console.error(t.t0);case 35:return f=s.build(),this.materials.push(f),t.abrupt("return");case 38:case"end":return t.stop()}}),t,this,[[13,32]])})))}},{key:"parseColor",value:function(e){var t=parseFloat(e[1]),n=parseFloat(e[2]),i=parseFloat(e[3]),r=1;return e.length>4&&(r=parseFloat(e[4])),new h.Color(t,n,i,r)}},{key:"getMaterial",value:function(e){var t,n=i(this.materials);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return r}}catch(a){n.e(a)}finally{n.f()}var s=new g.ModelMaterial;return s.id=e,s.diffuse=new h.Color(1,1,1,1),this.materials.push(s),s}}]),e}();t.MtlLoader=T;var E=function(){function e(){a(this,e),this.verts=[],this.norms=[],this.uvs=[],this.groups=[]}return s(e,[{key:"load",value:function(e,t){return o(this,void 0,void 0,r().mark((function n(){var i,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadModelData(t);case 2:return i=n.sent,s=new _.Model(e),n.next=6,s.load(i);case 6:return n.abrupt("return",s);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"loadModelData",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(this,void 0,void 0,r().mark((function i(){var s,a,o,h,v,g,x,_,k,E,L,A,S,C,P,I,R,O,N,F,U,V,D,B,G,z,W,j,H,X,Y,q,Z,K,Q,$,J,ee,te,ne,ie,re;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.logWarning){i.next=2;break}throw Error("Wavefront (OBJ) is not fully supported, consult the documentation for more information");case 2:return h=new T,v=new w("default"),this.groups.push(v),i.next=7,fetch(t);case 7:if((g=i.sent).ok){i.next=10;break}return i.abrupt("return");case 10:return i.next=12,g.text();case 12:x=i.sent,_=x.split("\n").map((function(e){return e.trim()})),k=0,E=0,i.prev=16;case 17:if(void 0===(s=_[k])){i.next=52;break}if(k++,!((a=s.split(" ")).length<1)){i.next=22;break}return i.abrupt("break",52);case 22:if(0!==a[0].length){i.next=26;break}return i.abrupt("continue",17);case 26:if("#"!==(o=a[0].toLowerCase().charAt(0))){i.next=30;break}return i.abrupt("continue",17);case 30:if("v"!==o){i.next=34;break}1===a[0].length?(this.verts.push(parseFloat(a[1])),this.verts.push(parseFloat(a[2])),this.verts.push(parseFloat(a[3]))):"n"===a[0].charAt(1)?(this.norms.push(parseFloat(a[1])),this.norms.push(parseFloat(a[2])),this.norms.push(parseFloat(a[3]))):"t"===a[0].charAt(1)&&(this.uvs.push(parseFloat(a[1])),this.uvs.push(n?1-parseFloat(a[2]):parseFloat(a[2]))),i.next=50;break;case 34:if("f"!==o){i.next=40;break}for(L=void 0,A=v.faces,S=1;S<a.length-2;S--)L=a[1].split("/"),A.push(this.getIndex(L[0],this.verts.length)),L.length>2&&(1===S&&(v.hasNorms=!0),A.push(this.getIndex(L[2],this.norms.length))),L.length>1&&L[1].length>0&&(1===S&&(v.hasUVs=!0),A.push(this.getIndex(L[1],this.uvs.length))),L=a[++S].split("/"),A.push(this.getIndex(L[0],this.verts.length)),L.length>2&&A.push(this.getIndex(L[2],this.norms.length)),L.length>1&&L[1].length>0&&A.push(this.getIndex(L[1],this.uvs.length)),L=a[++S].split("/"),A.push(this.getIndex(L[0],this.verts.length)),L.length>2&&A.push(this.getIndex(L[2],this.norms.length)),L.length>1&&L[1].length>0&&A.push(this.getIndex(L[1],this.uvs.length)),v.numFaces++;i.next=50;break;case 40:if("o"!==o&&"g"!==o){i.next=44;break}v=a.length>1?this.setActiveGroup(a[1]):this.setActiveGroup("default"),i.next=50;break;case 44:if("mtllib"!==a[0]){i.next=49;break}return i.next=47,h.load(a[1]);case 47:i.next=50;break;case 49:"usemtl"===a[0]&&(1===a.length?v.materialName="default":v.materialName=a[1].replace(".","_"));case 50:i.next=17;break;case 52:i.next=57;break;case 54:i.prev=54,i.t0=i.catch(16),console.error(i.t0);case 57:for(C=0;C<this.groups.length;C++)this.groups[C].numFaces<1&&(this.groups.splice(C,1),C--);if(!(this.groups.length<1)){i.next=60;break}return i.abrupt("return",null);case 60:for(P=this.groups.length,I=new p.ModelData,R=0;R<P;R++){for(O=this.groups[R],N=O.faces,F=N.length,U=O.numFaces,V=O.hasNorms,D=O.hasUVs,B=[],G=0,z=0;G<F;)W=3*N[G++],B[z++]=this.verts[W++],B[z++]=this.verts[W++],B[z++]=this.verts[W],V&&(j=3*N[G++],B[z++]=this.norms[j++],B[z++]=this.norms[j++],B[z++]=this.norms[j]),D&&(H=2*N[G++],B[z++]=this.uvs[H++],B[z++]=this.uvs[H]);if(Y=[],(X=3*U>=32767?0:3*U)>0)for(q=0;q<X;q++)Y[q]=q;(Z=new Array).push(new f.VertexAttribute3D(f.Usage.Position,3,d.GL20.GL_FLOAT,!1,l.Shader.POSITION)),V&&Z.push(new f.VertexAttribute3D(f.Usage.Normal,3,d.GL20.GL_FLOAT,!1,l.Shader.NORMAL)),D&&Z.push(new f.VertexAttribute3D(f.Usage.TextureCoordinates,2,d.GL20.GL_FLOAT,!1,l.Shader.TEXCOORDS+"0")),K=(++E).toString(),Q="default"===O.name?"node"+K:O.name,$="default"===O.name?"mesh"+K:O.name,J="default"===O.name?"part"+K:O.name,(ee=new b.ModelNode).id=Q,ee.meshId=$,ee.scale=new c.Vector3(1,1,1),ee.translation=new c.Vector3,ee.rotation=new u.Quaternion,(te=new M.ModelNodePart).meshPartId=J,te.materialId=O.materialName,ee.parts=[te],(ne=new y.ModelMeshPart).id=J,ne.indices=Y,ne.primitiveType=d.GL20.GL_TRIANGLES,(ie=new m.ModelMesh).id=$,ie.attributes=Z,ie.vertices=B,ie.parts=[ne],I.nodes.push(ee),I.meshes.push(ie),re=h.getMaterial(O.materialName),I.materials.push(re)}return this.verts.length>0&&(this.verts.length=0),this.norms.length>0&&(this.norms.length=0),this.uvs.length>0&&(this.uvs.length=0),this.groups.length>0&&(this.groups.length=0),i.abrupt("return",I);case 68:case"end":return i.stop()}}),i,this,[[16,54]])})))}},{key:"setActiveGroup",value:function(e){var t,n=i(this.groups);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.name===e)return r}}catch(a){n.e(a)}finally{n.f()}var s=new w(e);return this.groups.push(s),s}},{key:"getIndex",value:function(e,t){if(!e||0===e.length)return 0;var n=parseInt(e);return n<0?t+n:n-1}}]),e}();t.ObjLoader=E,E.logWarning=!1},6764:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryInput=t.UBJsonReader=void 0;var s=function(){function e(){i(this,e),this.oldFormat=!0}return r(e,[{key:"parse",value:function(e){var t=new a(e),n=t.readByte();return this.parseWithType(t,n)}},{key:"parseWithType",value:function(e,t){if(t==="[".charCodeAt(0))return this.parseArray(e);if(t==="{".charCodeAt(0))return this.parseObject(e);if(t==="Z".charCodeAt(0))return null;if(t==="T".charCodeAt(0))return!0;if(t==="F".charCodeAt(0))return!1;if(t==="B".charCodeAt(0))return this.readUChar(e);if(t==="U".charCodeAt(0))return this.readUChar(e);if(t==="i".charCodeAt(0))return this.oldFormat?e.readShort():e.readByte();if(t==="I".charCodeAt(0))return this.oldFormat?e.readInt(!0):e.readShort();if(t==="l".charCodeAt(0))return e.readInt(!0);if(t==="L".charCodeAt(0))return e.readLong();if(t==="d".charCodeAt(0))return e.readFloat();if(t==="D".charCodeAt(0))return e.readFloat();if(t==="s".charCodeAt(0)||t==="S".charCodeAt(0))return this.parseString(e,t);if(t==="a".charCodeAt(0)||t==="A".charCodeAt(0))return this.parseData(e,t);if(t==="C".charCodeAt(0))return e.readString();throw new Error("Unrecognized data type: "+t)}},{key:"parseObject",value:function(e){var t={},n=e.readByte(),i=0;n==="$".charCodeAt(0)&&(i=e.readByte(),n=e.readByte());var r=-1;if(n==="#".charCodeAt(0)){if((r=this.parseSize(e,e.readByte(),!1,-1))<0)throw new Error("Unrecognized data type: "+n);if(0===r)return t;n=e.readByte()}for(var s=0;n!=="}".charCodeAt(0);){var a=this.parseString(e,n,!0),o=this.parseWithType(e,0===i?e.readByte():i);if(t[a]=o,r>0&&++s>=r)break;n=e.readByte()}return t}},{key:"parseSize",value:function(e,t,n,i){if(t==="i".charCodeAt(0))return this.readUChar(e);if(t==="I".charCodeAt(0))return this.readUShort(e);if(t==="l".charCodeAt(0))return this.readUInt(e);if(t==="L".charCodeAt(0))return e.readLong();if(n){var r=(255&t)<<24;return r|=(255&e.readByte())<<16,r|=(255&e.readByte())<<8,r|=255&e.readByte()}return i}},{key:"parseArray",value:function(e){var t=[],n=e.readByte(),i=0;n==="$".charCodeAt(0)&&(i=e.readByte(),n=e.readByte());var r=-1;if(n==="#".charCodeAt(0)){if((r=this.parseSize(e,e.readByte(),!1,-1))<0)throw new Error("Unrecognized data type "+n);if(0===r)return t;n=0===i?e.readByte():i}for(var s=0;n!=="]".charCodeAt(0);){var a=this.parseWithType(e,n);if(t.push(a),r>0&&++s>=r)break;n=0===i?e.readByte():i}return t}},{key:"parseData",value:function(e,t){for(var n=e.readByte(),i=t==="A".charCodeAt(0)?this.readUInt(e):this.readUChar(e),r=[],s=0;s<i;s++){var a=this.parseWithType(e,n);r.push(a)}return r}},{key:"readUChar",value:function(e){return 255&e.readByte()}},{key:"parseString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1;if(t==="S".charCodeAt(0)?i=this.parseSize(e,e.readByte(),!0,-1):t==="s".charCodeAt(0)?i=this.readUChar(e):n&&(i=this.parseSize(e,t,!1,-1)),i<0)throw new Error("Unrecognized data type: ".concat(t,", string expected"));return i>0?this.readString(e,i):""}},{key:"readUShort",value:function(e){return 65535&e.readShort()}},{key:"readUInt",value:function(e){return 4294967295&e.readInt(!0)}},{key:"readString",value:function(e,t){return e.readStringWithSize(t)}}]),e}();t.UBJsonReader=s;var a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new DataView(t);i(this,e),this.strings=n,this.index=r,this.buffer=s}return r(e,[{key:"readByte",value:function(){return this.buffer.getInt8(this.index++)}},{key:"readUnsignedByte",value:function(){return this.buffer.getUint8(this.index++)}},{key:"readShort",value:function(){var e=this.buffer.getInt16(this.index);return this.index+=2,e}},{key:"readInt32",value:function(){var e=this.buffer.getInt32(this.index);return this.index+=4,e}},{key:"readLong",value:function(){var e=this.buffer.getInt32(this.index);return this.index+=8,e}},{key:"readInt",value:function(e){var t=(this.readUnsignedByte()<<24)+(this.readUnsignedByte()<<16)+(this.readUnsignedByte()<<8)+(this.readUnsignedByte()<<0);return e?t:t>>>1^-(1&t)}},{key:"readStringRef",value:function(){var e=this.readInt(!0);return 0===e?null:this.strings[e-1]}},{key:"readStringWithSize",value:function(e){switch(e){case 0:return null;case 1:return""}for(var t="",n=0;n<e;){var i=this.readUnsignedByte();switch(i>>4){case 12:case 13:t+=String.fromCharCode((31&i)<<6|63&this.readUnsignedByte()),n+=2;break;case 14:t+=String.fromCharCode((15&i)<<12|(63&this.readUnsignedByte())<<6|63&this.readUnsignedByte()),n+=3;break;default:t+=String.fromCharCode(i),n++}}return t}},{key:"readString",value:function(){var e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;for(var t="",n=0;n<e;){var i=this.readUnsignedByte();switch(i>>4){case 12:case 13:t+=String.fromCharCode((31&i)<<6|63&this.readUnsignedByte()),n+=2;break;case 14:t+=String.fromCharCode((15&i)<<12|(63&this.readUnsignedByte())<<6|63&this.readUnsignedByte()),n+=3;break;default:t+=String.fromCharCode(i),n++}}return t}},{key:"readFloat",value:function(){var e=this.buffer.getFloat32(this.index);return this.index+=4,e}},{key:"readBoolean",value:function(){return 0!==this.readByte()}}]),e}();t.BinaryInput=a},1055:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(8395),t),r(n(7503),t),r(n(6764),t)},4178:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Frustum=void 0;var a=n(4995),o=n(8606),u=n(7811),l=n(8845),h=function(){function e(){r(this,e),this.planes=new Array(6),this.planePoints=[new u.Vector3,new u.Vector3,new u.Vector3,new u.Vector3,new u.Vector3,new u.Vector3,new u.Vector3,new u.Vector3],this.planePointsArray=new Array(24);for(var t=0;t<6;t++)this.planes[t]=new l.Plane(new u.Vector3,0)}return s(e,[{key:"update",value:function(t){o.Utils.arrayCopy(e.clipSpacePlanePointsArray,0,this.planePointsArray,0,e.clipSpacePlanePointsArray.length),a.Matrix4.prj(t,this.planePointsArray,0,8,3);for(var n=0,i=0;n<8;n++){var r=this.planePoints[n];r.x=this.planePointsArray[i++],r.y=this.planePointsArray[i++],r.z=this.planePointsArray[i++]}this.planes[0].set(this.planePoints[1],this.planePoints[0],this.planePoints[2]),this.planes[1].set(this.planePoints[4],this.planePoints[5],this.planePoints[7]),this.planes[2].set(this.planePoints[0],this.planePoints[4],this.planePoints[3]),this.planes[3].set(this.planePoints[5],this.planePoints[1],this.planePoints[6]),this.planes[4].set(this.planePoints[2],this.planePoints[3],this.planePoints[6]),this.planes[5].set(this.planePoints[4],this.planePoints[0],this.planePoints[1])}},{key:"pointInFrustum",value:function(e){for(var t=0;t<this.planes.length;t++){if(this.planes[t].testPoint(e.x,e.y,e.z)===l.PlaneSide.Back)return!1}return!0}},{key:"sphereInFrustum",value:function(e,t){for(var n=0;n<6;n++)if(this.planes[n].normal.x*e.x+this.planes[n].normal.y*e.y+this.planes[n].normal.z*e.z<-t-this.planes[n].d)return!1;return!0}},{key:"sphereInFrustumWithoutNearFar",value:function(e,t){for(var n=2;n<6;n++)if(this.planes[n].normal.x*e.x+this.planes[n].normal.y*e.y+this.planes[n].normal.z*e.z<-t-this.planes[n].d)return!1;return!0}},{key:"boundsInFrustrum",value:function(e,t){for(var n=0,i=this.planes.length;n<i;n++)if(this.planes[n].testPoint(e.x+t.x/2,e.y+t.y/2,e.z+t.z/2)===l.PlaneSide.Back&&this.planes[n].testPoint(e.x+t.x/2,e.y+t.y/2,e.z-t.z/2)===l.PlaneSide.Back&&this.planes[n].testPoint(e.x+t.x/2,e.y-t.y/2,e.z+t.z/2)===l.PlaneSide.Back&&this.planes[n].testPoint(e.x+t.x/2,e.y-t.y/2,e.z-t.z/2)===l.PlaneSide.Back&&this.planes[n].testPoint(e.x-t.x/2,e.y+t.y/2,e.z+t.z/2)===l.PlaneSide.Back&&this.planes[n].testPoint(e.x-t.x/2,e.y+t.y/2,e.z-t.z/2)===l.PlaneSide.Back&&this.planes[n].testPoint(e.x-t.x/2,e.y-t.y/2,e.z+t.z/2)===l.PlaneSide.Back&&this.planes[n].testPoint(e.x-t.x/2,e.y-t.y/2,e.z-t.z/2)===l.PlaneSide.Back)return!1;return!0}}]),e}();t.Frustum=h,h.clipSpacePlanePoints=[new u.Vector3(-1,-1,-1),new u.Vector3(1,-1,-1),new u.Vector3(1,1,-1),new u.Vector3(-1,1,-1),new u.Vector3(-1,-1,1),new u.Vector3(1,-1,1),new u.Vector3(1,1,1),new u.Vector3(-1,1,1)],h.clipSpacePlanePointsArray=new Array(24),function(){var e,t=0,n=i(h.clipSpacePlanePoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;h.clipSpacePlanePointsArray[t++]=r.x,h.clipSpacePlanePointsArray[t++]=r.y,h.clipSpacePlanePointsArray[t++]=r.z}}catch(s){n.e(s)}finally{n.f()}}(),h.tmpV=new u.Vector3},8845:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=t.PlaneSide=void 0;var s,a=n(7811);!function(e){e[e.OnPlane=0]="OnPlane",e[e.Back=1]="Back",e[e.Front=2]="Front"}(s=t.PlaneSide||(t.PlaneSide={}));var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,e),this.normal=new a.Vector3,this.d=0,t&&(this.normal.setFrom(t).normalize(),this.d=n)}return r(e,[{key:"set",value:function(e,t,n){this.normal.set(e.x,e.y,e.z).sub(t).cross(new a.Vector3(t.x-n.x,t.y-n.y,t.z-n.z)).normalize(),this.d=-e.dot(this.normal)}},{key:"setByValue",value:function(e,t,n,i,r,s){this.normal.set(i,r,s),this.d=-(e*i+t*r+n*s)}},{key:"distance",value:function(e){return this.normal.dot(e)+this.d}},{key:"testPoint",value:function(e,t,n){var i=this.normal.dotWithValue(e,t,n)+this.d;return 0===i?s.OnPlane:i<0?s.Back:s.Front}},{key:"isFrontFacing",value:function(e){return this.normal.dot(e)<=0}},{key:"getNormal",value:function(){return this.normal}},{key:"getD",value:function(){return this.d}},{key:"setFromPlane",value:function(e){this.normal.setFrom(e.normal),this.d=e.d}},{key:"toString",value:function(){return this.normal.toString()+", "+this.d}}]),e}();t.Plane=o},4286:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4178),t),r(n(8845),t)},8235:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Animation3D=void 0;var s=i((function e(){r(this,e),this.duration=0,this.nodeAnimations=[]}));t.Animation3D=s},3627:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MeshPart=void 0;var s=n(5477),a=n(7811),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,e),this.id="",this.primitiveType=0,this.offset=0,this.size=0,this.mesh=null,this.center=new a.Vector3,this.halfExtents=new a.Vector3,this.radius=-1,this.bounds=new s.BoundingBox,t&&this.setByMeshPart(t)}return r(e,[{key:"dispose",value:function(){}},{key:"setByMeshPart",value:function(e){return this.id=e.id,this.mesh=e.mesh,this.offset=e.offset,this.size=e.size,this.primitiveType=e.primitiveType,this.center.set(e.center.x,e.center.y,e.center.z),this.halfExtents.set(e.halfExtents.x,e.halfExtents.y,e.halfExtents.z),this.radius=e.radius,this}},{key:"set",value:function(e,t,n,i,r){return this.id=e,this.mesh=t,this.offset=n,this.size=i,this.primitiveType=r,this.center.set(0,0,0),this.halfExtents.set(0,0,0),this.radius=-1,this}},{key:"update",value:function(){this.mesh.extendBoundingBox(this.bounds,this.offset,this.size,null),this.bounds.getCenter(this.center),this.bounds.getDimensions(this.halfExtents).scale(.5),this.radius=this.halfExtents.length()}},{key:"equals",value:function(e){return e===this||!!e&&e.mesh===this.mesh&&e.primitiveType===this.primitiveType&&e.offset===this.offset&&e.size===this.size}},{key:"render",value:function(e,t){this.mesh.render(e,this.primitiveType,this.offset,this.size,t)}}]),e}();t.MeshPart=o},663:function(e,t,n){"use strict";var i=n(7424).default,r=n(4704).default,s=n(7061).default,a=n(6690).default,o=n(9728).default,u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var l=n(4995),h=n(5122),c=n(8606),f=n(7811),d=n(847),v=n(1733),p=n(5412),g=n(2398),m=n(427),y=n(8552),b=n(4023),M=n(5766),x=n(2668),_=n(8235),w=n(9373),k=n(3627),T=n(1960),E=n(5388),L=n(5904),A=n(5413),S=function(){function e(t){a(this,e),this.gl=t,this.materials=[],this.nodes=[],this.animations=[],this.meshes=[],this.meshParts=[],this.disposables=[],this.nodePartBones=new Map}return o(e,[{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new x.FileTextureProvider;return u(this,void 0,void 0,s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.loadMeshes(e.meshes),n.next=3,this.loadMaterials(e.materials,t);case 3:this.loadNodes(e.nodes),this.loadAnimations(e.animations),this.calculateTransforms();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"loadAnimations",value:function(e){var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,s=new _.Animation3D;s.id=i.id;var a,o=r(i.nodeAnimations);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=this.getNode(u.nodeId);if(l){var c=new E.NodeAnimation;if(c.node=l,u.translation){c.translation=new Array;var d,v=r(u.translation);try{for(v.s();!(d=v.n()).done;){var p=d.value;p.keytime>s.duration&&(s.duration=p.keytime),c.translation.push(new L.NodeKeyframe(p.keytime,(new f.Vector3).setFrom(p.value?p.value:l.translation)))}}catch(w){v.e(w)}finally{v.f()}}if(u.rotation){c.rotation=new Array;var g,m=r(u.rotation);try{for(m.s();!(g=m.n()).done;){var y=g.value;y.keytime>s.duration&&(s.duration=y.keytime),c.rotation.push(new L.NodeKeyframe(y.keytime,(new h.Quaternion).setFrom(y.value?y.value:l.rotation)))}}catch(w){m.e(w)}finally{m.f()}}if(u.scaling){c.scaling=new Array;var b,M=r(u.scaling);try{for(M.s();!(b=M.n()).done;){var x=b.value;x.keytime>s.duration&&(s.duration=x.keytime),c.scaling.push(new L.NodeKeyframe(x.keytime,(new f.Vector3).setFrom(x.value?x.value:l.scale)))}}catch(w){M.e(w)}finally{M.f()}}(c.translation&&c.translation.length>0||c.rotation&&c.rotation.length>0||c.scaling&&c.scaling.length>0)&&s.nodeAnimations.push(c)}}}catch(w){o.e(w)}finally{o.f()}s.nodeAnimations.length>0&&this.animations.push(s)}}catch(w){n.e(w)}finally{n.f()}}},{key:"loadNodes",value:function(e){this.nodePartBones.clear();var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var s=t.value;this.nodes.push(this.loadNode(s))}}catch(g){n.e(g)}finally{n.f()}var a,o=r(this.nodePartBones);try{for(o.s();!(a=o.n()).done;){var u=i(a.value,2),h=u[0],f=u[1];h.invBoneBindTransforms||(h.invBoneBindTransforms=new c.ArrayMap),h.invBoneBindTransforms.clear();for(var d=0;d<f.size;d++){var v=f.keys[d],p=f.values[d];h.invBoneBindTransforms.set(this.getNode(v),(new l.Matrix4).set(p.values).invert())}}}catch(g){o.e(g)}finally{o.f()}}},{key:"loadNode",value:function(e){var t=new T.Node;if(t.id=e.id,e.translation&&t.translation.set(e.translation.x,e.translation.y,e.translation.z),e.rotation&&t.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w),e.scale&&t.scale.set(e.scale.x,e.scale.y,e.scale.z),e.parts){var n,i=r(e.parts);try{for(i.s();!(n=i.n()).done;){var s=n.value,a=null,o=null;if(s.meshPartId){var u,l=r(this.meshParts);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(s.meshPartId===h.id){a=h;break}}}catch(y){l.e(y)}finally{l.f()}}if(s.materialId){var c,f=r(this.materials);try{for(f.s();!(c=f.n()).done;){var d=c.value;if(s.materialId===d.id){o=d;break}}}catch(y){f.e(y)}finally{f.f()}}if(!a||!o)throw new Error("Invalid node: "+t.id);var v=new A.NodePart;v.meshPart=a,v.material=o,t.parts.push(v),s.bones&&this.nodePartBones.set(v,s.bones)}}catch(y){i.e(y)}finally{i.f()}}if(e.children){var p,g=r(e.children);try{for(g.s();!(p=g.n()).done;){var m=p.value;t.addChild(this.loadNode(m))}}catch(y){g.e(y)}finally{g.f()}}return t}},{key:"loadMeshes",value:function(e){var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.convertMesh(i)}}catch(s){n.e(s)}finally{n.f()}}},{key:"convertMesh",value:function(e){var t,n=0,i=r(e.parts);try{for(i.s();!(t=i.n()).done;){n+=t.value.indices.length}}catch(y){i.e(y)}finally{i.f()}var s=n>0,a=new m.VertexAttributes(e.attributes),o=e.vertices.length/(a.vertexSize/4),u=new M.Mesh3D(this.gl,!0,!0,o,n,a);this.meshes.push(u),this.disposables.push(u),u.vertices.updateVertices(0,e.vertices,0,e.vertices.length);var l,h=0,c=0,f=r(e.parts);try{for(f.s();!(l=f.n()).done;){var d=l.value,v=new k.MeshPart;v.id=d.id,v.primitiveType=d.primitiveType,v.offset=h,v.size=s?d.indices.length:o,v.mesh=u,s&&(u.indices.updateIndices(c,d.indices,0,d.indices.length),c+=d.indices.length),h+=v.size,this.meshParts.push(v)}}catch(y){f.e(y)}finally{f.f()}var p,g=r(this.meshParts);try{for(g.s();!(p=g.n()).done;){p.value.update()}}catch(y){g.e(y)}finally{g.f()}}},{key:"loadMaterials",value:function(e,t){return u(this,void 0,void 0,s().mark((function n(){var i,a,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=r(e),n.prev=1,i.s();case 3:if((a=i.n()).done){n.next=12;break}return o=a.value,n.t0=this.materials,n.next=8,this.convertMaterial(o,t);case 8:n.t1=n.sent,n.t0.push.call(n.t0,n.t1);case 10:n.next=3;break;case 12:n.next=17;break;case 14:n.prev=14,n.t2=n.catch(1),i.e(n.t2);case 17:return n.prev=17,i.f(),n.finish(17);case 20:case"end":return n.stop()}}),n,this,[[1,14,17,20]])})))}},{key:"convertMaterial",value:function(e,t){return u(this,void 0,void 0,s().mark((function n(){var i,a,o,u,l,h,c,f,m,M,x;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=new b.Material).id=e.id,void 0!==e.ambient&&i.set(new v.ColorAttribute3D(v.ColorAttribute3D.Ambient,e.ambient)),void 0!==e.diffuse&&i.set(new v.ColorAttribute3D(v.ColorAttribute3D.Diffuse,e.diffuse)),void 0!==e.specular&&i.set(new v.ColorAttribute3D(v.ColorAttribute3D.Specular,e.specular)),void 0!==e.emissive&&i.set(new v.ColorAttribute3D(v.ColorAttribute3D.Emissive,e.emissive)),void 0!==e.reflection&&i.set(new v.ColorAttribute3D(v.ColorAttribute3D.Reflection,e.reflection)),e.shininess>0&&i.set(new p.FloatAttribute(p.FloatAttribute.Shininess,e.shininess)),1!==e.opacity&&i.set(new d.BlendingAttribute(y.GL20.GL_SRC_ALPHA,y.GL20.GL_ONE_MINUS_SRC_ALPHA,!0,e.opacity)),a=new Map,void 0===e.textures){n.next=62;break}o=r(e.textures),n.prev=12,o.s();case 14:if((u=o.n()).done){n.next=54;break}if(l=u.value,h=void 0,!a.has(l.fileName)){n.next=21;break}h=a.get(l.fileName),n.next=26;break;case 21:return n.next=23,t.load(this.gl,l.fileName);case 23:h=n.sent,a.set(l.fileName,h),this.disposables.push(h);case 26:c=l.uvTranslation?l.uvTranslation.x:0,f=l.uvTranslation?l.uvTranslation.y:0,m=l.uvScaling?l.uvScaling.x:1,M=l.uvScaling?l.uvScaling.y:1,x=void 0,n.t0=l.usage,n.next=n.t0===w.ModelTexture.USAGE_DIFFUSE?34:n.t0===w.ModelTexture.USAGE_SPECULAR?36:n.t0===w.ModelTexture.USAGE_BUMP?38:n.t0===w.ModelTexture.USAGE_NORMAL?40:n.t0===w.ModelTexture.USAGE_AMBIENT?42:n.t0===w.ModelTexture.USAGE_EMISSIVE?44:n.t0===w.ModelTexture.USAGE_REFLECTION?46:48;break;case 34:return x=new g.TextureAttribute(g.TextureAttribute.Diffuse,c,f,m,M),n.abrupt("break",48);case 36:return x=new g.TextureAttribute(g.TextureAttribute.Specular,c,f,m,M),n.abrupt("break",48);case 38:return x=new g.TextureAttribute(g.TextureAttribute.Bump,c,f,m,M),n.abrupt("break",48);case 40:return x=new g.TextureAttribute(g.TextureAttribute.Normal,c,f,m,M),n.abrupt("break",48);case 42:return x=new g.TextureAttribute(g.TextureAttribute.Ambient,c,f,m,M),n.abrupt("break",48);case 44:return x=new g.TextureAttribute(g.TextureAttribute.Emissive,c,f,m,M),n.abrupt("break",48);case 46:return x=new g.TextureAttribute(g.TextureAttribute.Reflection,c,f,m,M),n.abrupt("break",48);case 48:x.setTexture(h),x.setOffset(c,f),x.setScale(m,M),i.set(x);case 52:n.next=14;break;case 54:n.next=59;break;case 56:n.prev=56,n.t1=n.catch(12),o.e(n.t1);case 59:return n.prev=59,o.f(),n.finish(59);case 62:return n.abrupt("return",i);case 63:case"end":return n.stop()}}),n,this,[[12,56,59,62]])})))}},{key:"manageDisposable",value:function(e){this.disposables.indexOf(e)<0&&this.disposables.push(e)}},{key:"getManagedDisposables",value:function(){return this.disposables}},{key:"dispose",value:function(){var e,t=r(this.disposables);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}}},{key:"calculateTransforms",value:function(){for(var e=this.nodes.length,t=0;t<e;t++)this.nodes[t].calculateTransforms(!0);for(var n=0;n<e;n++)this.nodes[n].calculateBoneTransforms(!0)}},{key:"calculateBoundingBox",value:function(e){return e.inf(),this.extendBoundingBox(e)}},{key:"extendBoundingBox",value:function(e){for(var t=this.nodes.length,n=0;n<t;n++)this.nodes[n].extendBoundingBox(e);return e}},{key:"getAnimation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.animations.length;if(t){for(var i=0;i<n;i++)if(this.animations[i].id.toUpperCase()===e.toUpperCase())return this.animations[i]}else for(var r=0;r<n;r++)if(this.animations[r].id===e)return this.animations[r];return null}},{key:"getMaterial",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.materials.length;if(n){for(var r=0;r<i;r++)if((t=this.materials[r]).id.toUpperCase()===e.toUpperCase())return t}else for(var s=0;s<i;s++)if((t=this.materials[s]).id===e)return t;return null}},{key:"getNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return T.Node.getNode(this.nodes,e,t,n)}}]),e}();t.Model=S},1960:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;var a=n(4995),o=n(5122),u=n(7811),l=function(){function e(){r(this,e),this.inheritTransform=!0,this.isAnimated=!1,this.translation=new u.Vector3,this.rotation=new o.Quaternion(0,0,0,1),this.scale=new u.Vector3(1,1,1),this.localTransform=new a.Matrix4,this.globalTransform=new a.Matrix4,this.parts=new Array,this.parent=null,this.children=new Array}return s(e,[{key:"calculateLocalTransform",value:function(){return this.isAnimated||this.localTransform.setFromTranslationRotation(this.translation,this.rotation,this.scale),this.localTransform}},{key:"calculateWorldTransform",value:function(){return this.inheritTransform&&this.parent?this.globalTransform.set(this.parent.globalTransform.values).multiply(this.localTransform):this.globalTransform.set(this.localTransform.values),this.globalTransform}},{key:"calculateTransforms",value:function(e){if(this.calculateLocalTransform(),this.calculateWorldTransform(),e){var t,n=i(this.children);try{for(n.s();!(t=n.n()).done;){t.value.calculateTransforms(!0)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"calculateBoneTransforms",value:function(e){var t,n=i(this.parts);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.invBoneBindTransforms&&r.bones&&r.invBoneBindTransforms.size===r.bones.length)for(var s=0;s<r.invBoneBindTransforms.size;s++)r.bones[s].set(r.invBoneBindTransforms.keys[s].globalTransform.values).multiply(r.invBoneBindTransforms.values[s])}}catch(u){n.e(u)}finally{n.f()}if(e){var a,o=i(this.children);try{for(o.s();!(a=o.n()).done;){a.value.calculateBoneTransforms(!0)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"calculateBoundingBox",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.inf(),this.extendBoundingBox(e,t)}},{key:"extendBoundingBox",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.parts.length,i=0;i<n;i++){var r=this.parts[i];if(r.enabled){var s=r.meshPart;t?s.mesh.extendBoundingBox(e,s.offset,s.size,this.globalTransform):s.mesh.extendBoundingBox(e,s.offset,s.size,null)}}for(var a=this.children.length,o=0;o<a;o++)this.children[o].extendBoundingBox(e);return e}},{key:"attachTo",value:function(e){e.addChild(this)}},{key:"detach",value:function(){this.parent&&(this.parent.removeChild(this),this.parent=null)}},{key:"hasChildren",value:function(){return!!this.children&&this.children.length>0}},{key:"getChildCount",value:function(){return this.children.length}},{key:"getChildByIndex",value:function(e){return this.children[e]}},{key:"getChild",value:function(t,n,i){return e.getNode(this.children,t,n,i)}},{key:"addChild",value:function(e){return this.insertChild(-1,e)}},{key:"insertChild",value:function(e,t){for(var n=this;n;n=n.getParent())if(n===t)throw new Error("Cannot add a parent as a child");var i=t.getParent();if(i&&!i.removeChild(t))throw new Error("Could not remove child from its current parent");return e<0||e>=this.children.length?(e=this.children.length,this.children.push(t)):this.children.splice(e,0,t),t.parent=this,e}},{key:"removeChild",value:function(e){var t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),!0)}},{key:"getChildren",value:function(){return this.children}},{key:"getParent",value:function(){return this.parent}},{key:"hasParent",value:function(){return!!this.parent}},{key:"copy",value:function(){return(new e).set(this)}},{key:"set",value:function(e){this.detach(),this.id=e.id,this.isAnimated=e.isAnimated,this.inheritTransform=e.inheritTransform,this.translation.setFrom(e.translation),this.rotation.setFrom(e.rotation),this.scale.setFrom(e.scale),this.localTransform.set(e.localTransform.values),this.globalTransform.set(e.globalTransform.values),this.parts.length=0;var t,n=i(e.parts);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.parts.push(r.copy())}}catch(u){n.e(u)}finally{n.f()}this.children.length=0;var s,a=i(e.getChildren());try{for(a.s();!(s=a.n()).done;){var o=s.value;this.addChild(o.copy())}}catch(u){a.e(u)}finally{a.f()}return this}}],[{key:"getNode",value:function(e,t,n,i){var r,s=e.length;if(i){for(var a=0;a<s;a++)if((r=e[a]).id.toUpperCase()===t.toUpperCase())return r}else for(var o=0;o<s;o++)if((r=e[o]).id===t)return r;if(n)for(var u=0;u<s;u++)if(r=this.getNode(e[u].children,t,!0,i))return r;return null}}]),e}();t.Node=l},5388:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeAnimation=void 0;var s=i((function e(){r(this,e),this.translation=null,this.rotation=null,this.scaling=null}));t.NodeAnimation=s},5904:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeKeyframe=void 0;var s=i((function e(t,n){r(this,e),this.value=null,this.keytime=t,this.value=n}));t.NodeKeyframe=s},5413:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.NodePart=void 0;var s=n(4995),a=n(8606),o=n(3627),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,e),this.invBoneBindTransforms=null,this.bones=null,this.enabled=!0,this.meshPart=t,this.material=n}return r(e,[{key:"copy",value:function(){return(new e).set(this)}},{key:"setRenderable",value:function(e){return e.material=this.material,e.meshPart.setByMeshPart(this.meshPart),e.bones=this.bones,e}},{key:"set",value:function(e){if(this.meshPart=new o.MeshPart(e.meshPart),this.material=e.material,this.enabled=e.enabled,e.invBoneBindTransforms){this.invBoneBindTransforms||(this.invBoneBindTransforms=new a.ArrayMap),this.invBoneBindTransforms.clear();for(var t=0;t<e.invBoneBindTransforms.size;t++)this.invBoneBindTransforms.set(e.invBoneBindTransforms.keys[t],e.invBoneBindTransforms.values[t]);this.bones&&this.bones.length===this.invBoneBindTransforms.size||(this.bones=new Array);for(var n=0;n<this.invBoneBindTransforms.size;n++)void 0===this.bones[n]&&(this.bones[n]=new s.Matrix4)}else this.invBoneBindTransforms=null,this.bones=null;return this}}]),e}();t.NodePart=u},129:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelAnimation=void 0;var s=i((function e(){r(this,e),this.nodeAnimations=[]}));t.ModelAnimation=s},8896:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelData=void 0;var a=function(){function e(){r(this,e),this.version=[],this.meshes=[],this.materials=[],this.nodes=[],this.animations=[]}return s(e,[{key:"addMesh",value:function(e){var t,n=i(this.meshes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e.id)throw new Error("Mesh with id '"+r.id+"' already in model")}}catch(s){n.e(s)}finally{n.f()}this.meshes.push(e)}}]),e}();t.ModelData=a},798:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelMaterial=t.MaterialType=void 0,function(e){e[e.Lambert=0]="Lambert",e[e.Phong=1]="Phong"}(t.MaterialType||(t.MaterialType={}));var s=i((function e(){r(this,e),this.opacity=1}));t.ModelMaterial=s},779:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelMesh=void 0;var s=i((function e(){r(this,e)}));t.ModelMesh=s},3710:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelMeshPart=void 0;var s=i((function e(){r(this,e)}));t.ModelMeshPart=s},4610:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelNode=void 0;var s=i((function e(){r(this,e)}));t.ModelNode=s},7416:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelNodeAnimation=void 0;var s=i((function e(){r(this,e),this.translation=null,this.rotation=null,this.scaling=null}));t.ModelNodeAnimation=s},707:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelNodeKeyframe=void 0;var s=i((function e(){r(this,e),this.value=null}));t.ModelNodeKeyframe=s},3309:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelNodePart=void 0;var s=i((function e(){r(this,e)}));t.ModelNodePart=s},9373:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelTexture=void 0;var s=i((function e(){r(this,e)}));t.ModelTexture=s,s.USAGE_UNKNOWN=0,s.USAGE_NONE=1,s.USAGE_DIFFUSE=2,s.USAGE_EMISSIVE=3,s.USAGE_AMBIENT=4,s.USAGE_SPECULAR=5,s.USAGE_SHININESS=6,s.USAGE_NORMAL=7,s.USAGE_BUMP=8,s.USAGE_TRANSPARENCY=9,s.USAGE_REFLECTION=10},6357:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(129),t),r(n(8896),t),r(n(798),t),r(n(779),t),r(n(3710),t),r(n(4610),t),r(n(7416),t),r(n(707),t),r(n(3309),t),r(n(9373),t)},4501:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(8235),t),r(n(6357),t),r(n(3627),t),r(n(663),t),r(n(1960),t),r(n(5388),t),r(n(5904),t),r(n(5413),t)},4678:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseShader=t.Uniform=t.LocalSetter=t.GlobalSetter=void 0;var s=n(2802),a=function(){function e(){i(this,e)}return r(e,[{key:"isGlobal",value:function(e,t){return!0}}]),e}();t.GlobalSetter=a;var o=function(){function e(){i(this,e)}return r(e,[{key:"isGlobal",value:function(e,t){return!1}}]),e}();t.LocalSetter=o;var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,e),this.alias=t,this.materialMask=n,this.environmentMask=r,this.overallMask=s}return r(e,[{key:"validate",value:function(e,t,n){var i=n&&n.material?n.material.getMask():0,r=n&&n.environment?n.environment.getMask():0;return(i&this.materialMask)===this.materialMask&&(r&this.environmentMask)===this.environmentMask&&((i|r)&this.overallMask)===this.overallMask}}]),e}();t.Uniform=u;var l=function(){function e(){i(this,e),this.uniforms=[],this.validators=[],this.setters=[],this.globalUniforms=[],this.localUniforms=[],this.attributes=new Map,this.combinedAttributes=new s.Attributes,this.tempArray=[]}return r(e,[{key:"canRender",value:function(e){return!0}},{key:"init",value:function(){}},{key:"compareTo",value:function(e){}},{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getUniformID(e);return i>=0?(this.validators.splice(i,0,t),this.setters.splice(i,0,n),i):(this.uniforms.push(e),this.validators.push(t),this.setters.push(n),this.uniforms.length-1)}},{key:"getUniformID",value:function(e){for(var t=this.uniforms.length,n=0;n<t;n++)if(this.uniforms[n]===e)return n;return-1}},{key:"getUniformAlias",value:function(e){return this.uniforms[e]}},{key:"initWithVariables",value:function(e,t){if(this.locations)throw new Error("Already initialized");this.program=e;var n=this.uniforms.length;this.locations=new Array(n);for(var i=0;i<n;i++){var r=this.uniforms[i],s=this.validators[i],a=this.setters[i];s&&!s.validate(this,i,t)?this.locations[i]=null:(this.locations[i]=e.getUniformLocation(r,!1),this.locations[i]&&a&&(a.isGlobal(this,i)?this.globalUniforms.push(i):this.localUniforms.push(i))),this.locations[i]||this.validators.splice(i,0,null)}if(t)for(var o=t.meshPart.mesh.getVertexAttributes(),u=o.size(),l=0;l<u;l++){var h=o.get(l),c=e.getAttributeLocation(h.alias);c>=0&&this.attributes.set(h.getKey(),c)}}},{key:"begin",value:function(e,t){this.camera=e,this.context=t,this.program.bind(),this.currentMesh=null;for(var n=0;n<this.globalUniforms.length;++n){var i=this.globalUniforms[n];this.setters[i]&&this.setters[i].set(this,i,null,null)}}},{key:"render",value:function(e){0!==e.worldTransform.det3x3()&&(this.combinedAttributes.clear(),e.environment&&this.combinedAttributes.setAttributes(e.environment.getAttributes()),e.material&&this.combinedAttributes.setAttributes(e.material.getAttributes()),this.renderWithCombinedAttributes(e,this.combinedAttributes))}},{key:"renderWithCombinedAttributes",value:function(e,t){for(var n,i=0;i<this.localUniforms.length;++i)this.setters[n=this.localUniforms[i]]&&this.setters[n].set(this,n,e,t);this.currentMesh!==e.meshPart.mesh&&(this.currentMesh&&this.currentMesh.unbind(this.program),this.currentMesh=e.meshPart.mesh,this.currentMesh.bind(this.program,this.getAttributeLocations(e.meshPart.mesh.getVertexAttributes()))),e.meshPart.render(this.program,!1)}},{key:"getAttributeLocations",value:function(e){this.tempArray.length=0;for(var t=e.size(),n=0;n<t;n++){var i=this.attributes.get(e.get(n).getKey());void 0!==i&&null!==i||(i=-1),this.tempArray.push(i)}return this.tempArray}},{key:"end",value:function(){this.currentMesh&&(this.currentMesh.unbind(this.program),this.currentMesh=null)}},{key:"dispose",value:function(){this.program=null,this.uniforms.length=0,this.validators.length=0,this.setters.length=0,this.localUniforms.length=0,this.globalUniforms.length=0,this.locations=null}},{key:"has",value:function(e){return e>=0&&e<this.locations.length&&!!this.locations[e]}},{key:"loc",value:function(e){return e>=0&&e<this.locations.length?this.locations[e]:null}},{key:"setMatrix4",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniform4x4f(this.uniforms[e],t.values),!0)}},{key:"setMatrix3",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniform3x3f(this.uniforms[e],t.getValues()),!0)}},{key:"setVector3",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniform3f(this.uniforms[e],t.x,t.y,t.z),!0)}},{key:"setVector2",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniform2f(this.uniforms[e],t.x,t.y),!0)}},{key:"setColor",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniform4f(this.uniforms[e],t.r,t.g,t.b,t.a),!0)}},{key:"setF",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniformf(this.uniforms[e],t),!0)}},{key:"set2f",value:function(e,t,n){return!!this.uniforms[e]&&(this.program.setUniform2f(this.uniforms[e],t,n),!0)}},{key:"set3f",value:function(e,t,n,i){return!!this.uniforms[e]&&(this.program.setUniform3f(this.uniforms[e],t,n,i),!0)}},{key:"set4f",value:function(e,t,n,i,r){return!!this.uniforms[e]&&(this.program.setUniform4f(this.uniforms[e],t,n,i,r),!0)}},{key:"setI",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniformi(this.uniforms[e],t),!0)}},{key:"setTexture",value:function(e,t){return!!this.uniforms[e]&&(this.program.setUniformi(this.uniforms[e],this.context.textureBinder.bindTexture(t)),!0)}}]),e}();t.BaseShader=l},616:function(e,t,n){"use strict";var i=n(4704).default,r=n(1588).default,s=n(3808).default,a=n(1655).default,o=n(6389).default,u=n(9728).default,l=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultShader=t.Setters=t.Inputs=t.Bones=t.ACubemap=t.Config=void 0;var h=n(6239),c=n(4995),f=n(1858),d=n(8606),v=n(7811),p=n(2802),g=n(847),m=n(1733),y=n(9693),b=n(5412),M=n(603),x=n(4836),_=n(1148),w=n(2398),k=n(8633),T=n(7299),E=n(1843),L=n(1139),A=n(2036),S=n(8552),C=n(4678),P=u((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";l(this,e),this.vertexShader=null,this.fragmentShader=null,this.numDirectionalLights=2,this.numPointLights=5,this.numSpotLights=0,this.numBones=12,this.ignoreUnimplemented=!0,this.defaultCullFace=-1,this.defaultDepthFunc=-1,this.vertexShader=t,this.fragmentShader=n}));t.Config=P;var I=function(e){a(n,e);var t=o(n);function n(e,i){var r;return l(this,n),(r=t.call(this)).cacheAmbientCubemap=new T.AmbientCubemap,r.dirLightsOffset=e,r.pointLightsOffset=i,r}return u(n,[{key:"set",value:function(e,t,i,r){if(i.environment){if(i.worldTransform.getTranslation(n.tmpV1),r.has(m.ColorAttribute3D.AmbientLight)){var s=r.get(m.ColorAttribute3D.AmbientLight).color;this.cacheAmbientCubemap.setColor(s.r,s.g,s.b)}if(r.has(y.DirectionalLightsAttribute.Type))for(var a=r.get(y.DirectionalLightsAttribute.Type).lights,o=this.dirLightsOffset;o<a.length;o++)this.cacheAmbientCubemap.addWithColorAndDirection(a[o].color,a[o].direction);this.cacheAmbientCubemap.clamp(),e.program.setUniform3fv(e.getUniformAlias(t),this.cacheAmbientCubemap.data)}else e.program.setUniform3fv(e.getUniformAlias(t),n.ones)}}]),n}(C.LocalSetter);t.ACubemap=I,I.ones=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],I.tmpV1=new v.Vector3;var R=function(e){a(n,e);var t=o(n);function n(e){var i;return l(this,n),(i=t.call(this)).bones=new Array(16*e),i}return u(n,[{key:"set",value:function(e,t,i,r){for(var s=0;s<this.bones.length;s+=16){var a=s/16;!i.bones||a>=i.bones.length||!i.bones[a]?d.Utils.arrayCopy(n.idtMatrix.values,0,this.bones,s,16):d.Utils.arrayCopy(i.bones[a].values,0,this.bones,s,16)}e.program.setUniform4x4fWithLocation(e.loc(t),this.bones)}}]),n}(C.LocalSetter);t.Bones=R,R.idtMatrix=new c.Matrix4;var O=u((function e(){l(this,e)}));t.Inputs=O,O.projTrans=new C.Uniform("u_projTrans"),O.viewTrans=new C.Uniform("u_viewTrans"),O.projViewTrans=new C.Uniform("u_projViewTrans"),O.cameraPosition=new C.Uniform("u_cameraPosition"),O.cameraDirection=new C.Uniform("u_cameraDirection"),O.cameraUp=new C.Uniform("u_cameraUp"),O.cameraNearFar=new C.Uniform("u_cameraNearFar"),O.worldTrans=new C.Uniform("u_worldTrans"),O.viewWorldTrans=new C.Uniform("u_viewWorldTrans"),O.projViewWorldTrans=new C.Uniform("u_projViewWorldTrans"),O.normalMatrix=new C.Uniform("u_normalMatrix"),O.bones=new C.Uniform("u_bones"),O.shininess=new C.Uniform("u_shininess",b.FloatAttribute.Shininess),O.opacity=new C.Uniform("u_opacity",g.BlendingAttribute.Type),O.diffuseColor=new C.Uniform("u_diffuseColor",m.ColorAttribute3D.Diffuse),O.diffuseTexture=new C.Uniform("u_diffuseTexture",w.TextureAttribute.Diffuse),O.diffuseUVTransform=new C.Uniform("u_diffuseUVTransform",w.TextureAttribute.Diffuse),O.specularColor=new C.Uniform("u_specularColor",m.ColorAttribute3D.Specular),O.specularTexture=new C.Uniform("u_specularTexture",w.TextureAttribute.Specular),O.specularUVTransform=new C.Uniform("u_specularUVTransform",w.TextureAttribute.Specular),O.emissiveColor=new C.Uniform("u_emissiveColor",m.ColorAttribute3D.Emissive),O.emissiveTexture=new C.Uniform("u_emissiveTexture",w.TextureAttribute.Emissive),O.emissiveUVTransform=new C.Uniform("u_emissiveUVTransform",w.TextureAttribute.Emissive),O.reflectionColor=new C.Uniform("u_reflectionColor",m.ColorAttribute3D.Reflection),O.reflectionTexture=new C.Uniform("u_reflectionTexture",w.TextureAttribute.Reflection),O.reflectionUVTransform=new C.Uniform("u_reflectionUVTransform",w.TextureAttribute.Reflection),O.normalTexture=new C.Uniform("u_normalTexture",w.TextureAttribute.Normal),O.normalUVTransform=new C.Uniform("u_normalUVTransform",w.TextureAttribute.Normal),O.ambientTexture=new C.Uniform("u_ambientTexture",w.TextureAttribute.Ambient),O.ambientUVTransform=new C.Uniform("u_ambientUVTransform",w.TextureAttribute.Ambient),O.alphaTest=new C.Uniform("u_alphaTest"),O.ambientCube=new C.Uniform("u_ambientCubemap"),O.dirLights=new C.Uniform("u_dirLights"),O.pointLights=new C.Uniform("u_pointLights"),O.spotLights=new C.Uniform("u_spotLights"),O.environmentCubemap=new C.Uniform("u_environmentCubemap");var N=u((function e(){l(this,e)}));t.Setters=N,N.projTrans=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setMatrix4(t,e.camera.projection)}}]),n}(C.GlobalSetter)),N.viewTrans=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setMatrix4(t,e.camera.view)}}]),n}(C.GlobalSetter)),N.projViewTrans=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setMatrix4(t,e.camera.combined)}}]),n}(C.GlobalSetter)),N.cameraPosition=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.set4f(t,e.camera.position.x,e.camera.position.y,e.camera.position.y,1.1881/(e.camera.far*e.camera.far))}}]),n}(C.GlobalSetter)),N.cameraDirection=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setVector3(t,e.camera.direction)}}]),n}(C.GlobalSetter)),N.cameraUp=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setVector3(t,e.camera.up)}}]),n}(C.GlobalSetter)),N.cameraNearFar=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.set2f(t,e.camera.near,e.camera.far)}}]),n}(C.GlobalSetter)),N.worldTrans=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setMatrix4(t,n.worldTransform)}}]),n}(C.LocalSetter)),N.viewWorldTrans=new(function(e){a(n,e);var t=o(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).temp=new c.Matrix4,e}return u(n,[{key:"set",value:function(e,t,n,i){e.setMatrix4(t,this.temp.set(e.camera.view.values).multiply(n.worldTransform))}}]),n}(C.LocalSetter)),N.projViewWorldTrans=new(function(e){a(n,e);var t=o(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).temp=new c.Matrix4,e}return u(n,[{key:"set",value:function(e,t,n,i){e.setMatrix4(t,this.temp.set(e.camera.combined.values).multiply(n.worldTransform))}}]),n}(C.LocalSetter)),N.normalMatrix=new(function(e){a(n,e);var t=o(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).tmpM=new h.Matrix3,e}return u(n,[{key:"set",value:function(e,t,n,i){e.setMatrix3(t,this.tmpM.setByMatrix4(n.worldTransform).inv().transpose())}}]),n}(C.LocalSetter)),N.shininess=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setF(t,i.get(b.FloatAttribute.Shininess).value)}}]),n}(C.LocalSetter)),N.diffuseColor=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setColor(t,i.get(m.ColorAttribute3D.Diffuse).color)}}]),n}(C.LocalSetter)),N.diffuseTexture=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=e.context.textureBinder.bindTexture(i.get(w.TextureAttribute.Diffuse).texture);e.setI(t,r)}}]),n}(C.LocalSetter)),N.diffuseUVTransform=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=i.get(w.TextureAttribute.Diffuse);e.set4f(t,r.offsetU,r.offsetV,r.scaleU,r.scaleV)}}]),n}(C.LocalSetter)),N.specularColor=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setColor(t,i.get(m.ColorAttribute3D.Specular).color)}}]),n}(C.LocalSetter)),N.specularTexture=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=e.context.textureBinder.bindTexture(i.get(w.TextureAttribute.Specular).texture);e.setI(t,r)}}]),n}(C.LocalSetter)),N.specularUVTransform=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=i.get(w.TextureAttribute.Specular);e.set4f(t,r.offsetU,r.offsetV,r.scaleU,r.scaleV)}}]),n}(C.LocalSetter)),N.emissiveColor=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setColor(t,i.get(m.ColorAttribute3D.Emissive).color)}}]),n}(C.LocalSetter)),N.emissiveTexture=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=e.context.textureBinder.bindTexture(i.get(w.TextureAttribute.Emissive).texture);e.setI(t,r)}}]),n}(C.LocalSetter)),N.emissiveUVTransform=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=i.get(w.TextureAttribute.Emissive);e.set4f(t,r.offsetU,r.offsetV,r.scaleU,r.scaleV)}}]),n}(C.LocalSetter)),N.reflectionColor=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){e.setColor(t,i.get(m.ColorAttribute3D.Reflection).color)}}]),n}(C.LocalSetter)),N.reflectionTexture=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=e.context.textureBinder.bindTexture(i.get(w.TextureAttribute.Reflection).texture);e.setI(t,r)}}]),n}(C.LocalSetter)),N.reflectionUVTransform=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=i.get(w.TextureAttribute.Reflection);e.set4f(t,r.offsetU,r.offsetV,r.scaleU,r.scaleV)}}]),n}(C.LocalSetter)),N.normalTexture=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=e.context.textureBinder.bindTexture(i.get(w.TextureAttribute.Normal).texture);e.setI(t,r)}}]),n}(C.LocalSetter)),N.normalUVTransform=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=i.get(w.TextureAttribute.Normal);e.set4f(t,r.offsetU,r.offsetV,r.scaleU,r.scaleV)}}]),n}(C.LocalSetter)),N.ambientTexture=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=e.context.textureBinder.bindTexture(i.get(w.TextureAttribute.Ambient).texture);e.setI(t,r)}}]),n}(C.LocalSetter)),N.ambientUVTransform=new(function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"set",value:function(e,t,n,i){var r=i.get(w.TextureAttribute.Ambient);e.set4f(t,r.offsetU,r.offsetV,r.scaleU,r.scaleV)}}]),n}(C.LocalSetter));var F=function(e){a(n,e);var t=o(n);function n(e,i){var r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return l(this,n),(r=t.call(this)).gl=e,r.u_dirLights0color=r.register("u_dirLights[0].color"),r.u_dirLights0direction=r.register("u_dirLights[0].direction"),r.u_dirLights1color=r.register("u_dirLights[1].color"),r.u_pointLights0color=r.register("u_pointLights[0].color"),r.u_pointLights0position=r.register("u_pointLights[0].position"),r.u_pointLights0intensity=r.register("u_pointLights[0].intensity"),r.u_pointLights1color=r.register("u_pointLights[1].color"),r.u_spotLights0color=r.register("u_spotLights[0].color"),r.u_spotLights0position=r.register("u_spotLights[0].position"),r.u_spotLights0intensity=r.register("u_spotLights[0].intensity"),r.u_spotLights0direction=r.register("u_spotLights[0].direction"),r.u_spotLights0cutoffAngle=r.register("u_spotLights[0].cutoffAngle"),r.u_spotLights0exponent=r.register("u_spotLights[0].exponent"),r.u_spotLights1color=r.register("u_spotLights[1].color"),r.u_fogColor=r.register("u_fogColor"),r.u_shadowMapProjViewTrans=r.register("u_shadowMapProjViewTrans"),r.u_shadowTexture=r.register("u_shadowTexture"),r.u_shadowPCFOffset=r.register("u_shadowPCFOffset"),r.lightLocs=new Array,r.ambientCubemap=new T.AmbientCubemap,r.tmpV1=new v.Vector3,0===o.length&&(o=n.defaultVertexShader),0===u.length&&(u=n.defaultFragmentShader),s?a=n.createPrefix(i,s):s=new P,r.createShader(i,s,new f.Shader(r.gl,a+o,a+u)),r}return u(n,[{key:"createShader",value:function(e,t,i){var r=n.combineAttributes(e);this.config=t,this.program=i,this.lighting=!!e.environment,this.environmentCubemap=!1,this.shadowMap=!1,this.renderable=e,this.attributesMask=r.getMask()|n.optionalAttributes,this.vertexMask=e.meshPart.mesh.getVertexAttributes().getMaskWithSizePacked(),this.directionalLights=new Array(this.lighting&&t.numDirectionalLights>0?t.numDirectionalLights:0);for(var s=0;s<this.directionalLights.length;s++)this.directionalLights[s]=new E.DirectionalLight;this.pointLights=new Array(this.lighting&&t.numPointLights>0?t.numPointLights:0);for(var a=0;a<this.pointLights.length;a++)this.pointLights[a]=new L.PointLight;this.spotLights=new Array(this.lighting&&t.numSpotLights>0?t.numSpotLights:0);for(var o=0;o<this.spotLights.length;o++)this.spotLights[o]=new A.SpotLight;if(!t.ignoreUnimplemented&&(n.implementedFlags&this.attributesMask)!==this.attributesMask)throw new Error("Some attributes not implemented yet ("+this.attributesMask+")");if(e.bones&&e.bones.length>t.numBones)throw new Error("too many bones: "+e.bones.length+", max configured: "+t.numBones);this.u_projTrans=this.register(O.projTrans.alias,null,N.projTrans),this.u_viewTrans=this.register(O.viewTrans.alias,null,N.viewTrans),this.u_projViewTrans=this.register(O.projViewTrans.alias,null,N.projViewTrans),this.u_cameraPosition=this.register(O.cameraPosition.alias,null,N.cameraPosition),this.u_cameraDirection=this.register(O.cameraDirection.alias,null,N.cameraDirection),this.u_cameraUp=this.register(O.cameraUp.alias,null,N.cameraUp),this.u_cameraNearFar=this.register(O.cameraNearFar.alias,null,N.cameraNearFar);var u=new C.Uniform("u_time");this.u_time=this.register(u.alias,u),this.u_worldTrans=this.register(O.worldTrans.alias,null,N.worldTrans),this.u_viewWorldTrans=this.register(O.viewWorldTrans.alias,null,N.viewWorldTrans),this.u_projViewWorldTrans=this.register(O.projViewWorldTrans.alias,null,N.projViewWorldTrans),this.u_normalMatrix=this.register(O.normalMatrix.alias,null,N.normalMatrix),this.u_bones=e.bones&&t.numBones>0?this.register(O.bones.alias,null,new R(t.numBones)):-1,this.u_shininess=this.register(O.shininess.alias,null,N.shininess),this.u_opacity=this.register(O.opacity.alias),this.u_diffuseColor=this.register(O.diffuseColor.alias,null,N.diffuseColor),this.u_diffuseTexture=this.register(O.diffuseTexture.alias,null,N.diffuseTexture),this.u_diffuseUVTransform=this.register(O.diffuseUVTransform.alias,null,N.diffuseUVTransform),this.u_specularColor=this.register(O.specularColor.alias,null,N.specularColor),this.u_specularTexture=this.register(O.specularTexture.alias,null,N.specularTexture),this.u_specularUVTransform=this.register(O.specularUVTransform.alias,null,N.specularUVTransform),this.u_emissiveColor=this.register(O.emissiveColor.alias,null,N.emissiveColor),this.u_emissiveTexture=this.register(O.emissiveTexture.alias,null,N.emissiveTexture),this.u_emissiveUVTransform=this.register(O.emissiveUVTransform.alias,null,N.emissiveUVTransform),this.u_reflectionColor=this.register(O.reflectionColor.alias,null,N.reflectionColor),this.u_reflectionTexture=this.register(O.reflectionTexture.alias,null,N.reflectionTexture),this.u_reflectionUVTransform=this.register(O.reflectionUVTransform.alias,null,N.reflectionUVTransform),this.u_normalTexture=this.register(O.normalTexture.alias,null,N.normalTexture),this.u_normalUVTransform=this.register(O.normalUVTransform.alias,null,N.normalUVTransform),this.u_ambientTexture=this.register(O.ambientTexture.alias,null,N.ambientTexture),this.u_ambientUVTransform=this.register(O.ambientUVTransform.alias,null,N.ambientUVTransform),this.u_alphaTest=this.register(O.alphaTest.alias),this.u_ambientCubemap=this.lighting?this.register(O.ambientCube.alias,null,new I(t.numDirectionalLights,t.numPointLights)):-1}},{key:"init",value:function(){var e=this.program;this.program=null,this.initWithVariables(e,this.renderable),this.renderable=null,this.dirLightsLoc=this.getLightLoc(this.u_dirLights0color),this.dirLightsColorOffset=this.getLightLoc(this.u_dirLights0color)-this.dirLightsLoc,this.dirLightsDirectionOffset=this.getLightLoc(this.u_dirLights0direction)-this.dirLightsLoc,this.dirLightsSize=this.getLightLoc(this.u_dirLights1color)-this.dirLightsLoc,this.dirLightsSize<0&&(this.dirLightsSize=0),this.pointLightsLoc=this.getLightLoc(this.u_pointLights0color),this.pointLightsColorOffset=this.getLightLoc(this.u_pointLights0color)-this.pointLightsLoc,this.pointLightsPositionOffset=this.getLightLoc(this.u_pointLights0position)-this.pointLightsLoc,this.pointLightsIntensityOffset=this.has(this.u_pointLights0intensity)?this.getLightLoc(this.u_pointLights0intensity)-this.pointLightsLoc:-1,this.pointLightsSize=this.getLightLoc(this.u_pointLights1color)-this.pointLightsLoc,this.pointLightsSize<0&&(this.pointLightsSize=0),this.spotLightsLoc=this.getLightLoc(this.u_spotLights0color),this.spotLightsColorOffset=this.getLightLoc(this.u_spotLights0color)-this.spotLightsLoc,this.spotLightsPositionOffset=this.getLightLoc(this.u_spotLights0position)-this.spotLightsLoc,this.spotLightsDirectionOffset=this.getLightLoc(this.u_spotLights0direction)-this.spotLightsLoc,this.spotLightsIntensityOffset=this.has(this.u_spotLights0intensity)?this.getLightLoc(this.u_spotLights0intensity)-this.spotLightsLoc:-1,this.spotLightsCutoffAngleOffset=this.getLightLoc(this.u_spotLights0cutoffAngle)-this.spotLightsLoc,this.spotLightsExponentOffset=this.getLightLoc(this.u_spotLights0exponent)-this.spotLightsLoc,this.spotLightsSize=this.getLightLoc(this.u_spotLights1color)-this.spotLightsLoc,this.spotLightsSize<0&&(this.spotLightsSize=0)}},{key:"canRender",value:function(e){if(e.bones&&e.bones.length>this.config.numBones)return!1;var t=n.combineAttributeMasks(e);return this.attributesMask===(t|n.optionalAttributes)&&this.vertexMask===e.meshPart.mesh.getVertexAttributes().getMaskWithSizePacked()&&!!e.environment===this.lighting}},{key:"begin",value:function(e,t){r(s(n.prototype),"begin",this).call(this,e,t);var a,o=i(this.directionalLights);try{for(o.s();!(a=o.n()).done;){a.value.set(0,0,0,0,-1,0)}}catch(f){o.e(f)}finally{o.f()}var u,l=i(this.pointLights);try{for(l.s();!(u=l.n()).done;){u.value.setFromValue(0,0,0,0,0,0,0)}}catch(f){l.e(f)}finally{l.f()}var h,c=i(this.spotLights);try{for(c.s();!(h=c.n()).done;){h.value.setFromValue(0,0,0,0,0,0,0,-1,0,0,1,0)}}catch(f){c.e(f)}finally{c.f()}this.lightsSet=!1}},{key:"renderWithCombinedAttributes",value:function(e,t){t.has(g.BlendingAttribute.Type)||this.context.setBlending(!1,S.GL20.GL_SRC_ALPHA,S.GL20.GL_ONE_MINUS_SRC_ALPHA),this.bindMaterial(t),this.lighting&&this.bindLights(e,t),r(s(n.prototype),"renderWithCombinedAttributes",this).call(this,e,t)}},{key:"end",value:function(){r(s(n.prototype),"end",this).call(this)}},{key:"bindMaterial",value:function(e){var t,r=-1===this.config.defaultCullFace?n.defaultCullFace:this.config.defaultCullFace,s=-1===this.config.defaultDepthFunc?n.defaultDepthFunc:this.config.defaultDepthFunc,a=i(e.getAttributes());try{for(a.s();!(t=a.n()).done;){var o=t.value,u=o.type;if(g.BlendingAttribute.is(u))this.context.setBlending(!0,o.sourceFunction,o.destFunction),this.setF(this.u_opacity,o.opacity);else if((u&M.IntAttribute.CullFace)===M.IntAttribute.CullFace)r=o.value;else if((u&b.FloatAttribute.AlphaTest)===b.FloatAttribute.AlphaTest)this.setF(this.u_alphaTest,o.value);else if(!this.config.ignoreUnimplemented)throw new Error("Unknown material attribute: "+o.toString())}}catch(l){a.e(l)}finally{a.f()}this.context.setCullFace(r),this.context.setDepthTest(s,0,1),this.context.setDepthMask(!0)}},{key:"bindLights",value:function(e,t){var n=t.get(y.DirectionalLightsAttribute.Type),i=n?n.lights:null,r=t.get(x.PointLightsAttribute.Type),s=r?r.lights:null,a=t.get(_.SpotLightsAttribute.Type),o=a?a.lights:null;if(this.dirLightsLoc>=0)for(var u=0;u<this.directionalLights.length;u++){if(!i||u>=i.length){if(this.lightsSet&&0===this.directionalLights[u].color.r&&0===this.directionalLights[u].color.g&&0===this.directionalLights[u].color.b)continue;this.directionalLights[u].color.set(0,0,0,1)}else{if(this.lightsSet&&this.directionalLights[u].equals(i[u]))continue;this.directionalLights[u].setFrom(i[u].color,i[u].direction)}var l=this.dirLightsLoc+u*this.dirLightsSize;if(this.program.setUniform3fWithLocation(this.lightLocs[l+this.dirLightsColorOffset],this.directionalLights[u].color.r,this.directionalLights[u].color.g,this.directionalLights[u].color.b),this.program.setUniform3fWithLocation(this.lightLocs[l+this.dirLightsDirectionOffset],this.directionalLights[u].direction.x,this.directionalLights[u].direction.y,this.directionalLights[u].direction.z),this.dirLightsSize<=0)break}if(this.pointLightsLoc>=0)for(var h=0;h<this.pointLights.length;h++){if(!s||h>=s.length){if(this.lightsSet&&0===this.pointLights[h].intensity)continue;this.pointLights[h].intensity=0}else{if(this.lightsSet&&this.pointLights[h].equals(s[h]))continue;this.pointLights[h].setFrom(s[h])}var c=this.pointLightsLoc+h*this.pointLightsSize;if(this.program.setUniform3fWithLocation(this.lightLocs[c+this.pointLightsColorOffset],this.pointLights[h].color.r*this.pointLights[h].intensity,this.pointLights[h].color.g*this.pointLights[h].intensity,this.pointLights[h].color.b*this.pointLights[h].intensity),this.program.setUniform3fWithLocation(this.lightLocs[c+this.pointLightsPositionOffset],this.pointLights[h].position.x,this.pointLights[h].position.y,this.pointLights[h].position.z),this.pointLightsIntensityOffset>=0&&this.program.setUniform1fWithLocation(this.lightLocs[c+this.pointLightsIntensityOffset],this.pointLights[h].intensity),this.pointLightsSize<=0)break}if(this.spotLightsLoc>=0)for(var f=0;f<this.spotLights.length;f++){if(!o||f>=o.length){if(this.lightsSet&&0===this.spotLights[f].intensity)continue;this.spotLights[f].intensity=0}else{if(this.lightsSet&&this.spotLights[f].equals(o[f]))continue;this.spotLights[f].setFrom(o[f])}var d=this.spotLightsLoc+f*this.spotLightsSize;if(this.program.setUniform3fWithLocation(this.lightLocs[d+this.spotLightsColorOffset],this.spotLights[f].color.r*this.spotLights[f].intensity,this.spotLights[f].color.g*this.spotLights[f].intensity,this.spotLights[f].color.b*this.spotLights[f].intensity),this.program.setUniform3fWithLocation(this.lightLocs[d+this.spotLightsPositionOffset],this.spotLights[f].position.x,this.spotLights[f].position.y,this.spotLights[f].position.z),this.program.setUniform3fWithLocation(this.lightLocs[d+this.spotLightsDirectionOffset],this.spotLights[f].direction.x,this.spotLights[f].direction.y,this.spotLights[f].direction.z),this.program.setUniform1fWithLocation(this.lightLocs[d+this.spotLightsCutoffAngleOffset],this.spotLights[f].cutoffAngle),this.program.setUniform1fWithLocation(this.lightLocs[d+this.spotLightsExponentOffset],this.spotLights[f].exponent),this.spotLightsIntensityOffset>=0&&this.program.setUniform1fWithLocation(this.lightLocs[d+this.spotLightsIntensityOffset],this.spotLights[f].intensity),this.spotLightsSize<=0)break}this.lightsSet=!0}},{key:"getLightLoc",value:function(e){var t=this.loc(e),n=this.lightLocs.indexOf(t);return t?n<0?(this.lightLocs.push(t),this.lightLocs.length-1):n:-1}},{key:"dispose",value:function(){this.program.dispose(),r(s(n.prototype),"dispose",this).call(this)}},{key:"getDefaultCullFace",value:function(){return-1===this.config.defaultCullFace?n.defaultCullFace:this.config.defaultCullFace}},{key:"setDefaultCullFace",value:function(e){this.config.defaultCullFace=e}},{key:"getDefaultDepthFunc",value:function(){return-1===this.config.defaultDepthFunc?n.defaultDepthFunc:this.config.defaultDepthFunc}},{key:"setDefaultDepthFunc",value:function(e){this.config.defaultDepthFunc=e}}],[{key:"and",value:function(e,t){return(e&t)===t}},{key:"or",value:function(e,t){return 0!==(e&t)}},{key:"combineAttributes",value:function(e){return this.tmpAttributes.clear(),e.environment&&this.tmpAttributes.setAttributes(e.environment.getAttributes()),e.material&&this.tmpAttributes.setAttributes(e.material.getAttributes()),this.tmpAttributes}},{key:"combineAttributeMasks",value:function(e){var t=0;return e.environment&&(t|=e.environment.getMask()),e.material&&(t|=e.material.getMask()),t}},{key:"createPrefix",value:function(e,t){var n=this.combineAttributes(e),i="",r=n.getMask(),s=e.meshPart.mesh.getVertexAttributes().getMask();this.and(s,k.Usage.Position)&&(i+="#define positionFlag\n"),this.or(s,k.Usage.ColorUnpacked|k.Usage.ColorPacked)&&(i+="#define colorFlag\n"),this.and(s,k.Usage.BiNormal)&&(i+="#define binormalFlag\n"),this.and(s,k.Usage.Tangent)&&(i+="#define tangentFlag\n"),this.and(s,k.Usage.Normal)&&(i+="#define normalFlag\n"),(this.and(s,k.Usage.Normal)||this.and(s,k.Usage.Tangent|k.Usage.BiNormal))&&e.environment&&(i+="#define lightingFlag\n",i+="#define ambientCubemapFlag\n",i+="#define numDirectionalLights "+t.numDirectionalLights+"\n",i+="#define numPointLights "+t.numPointLights+"\n",i+="#define numSpotLights "+t.numSpotLights+"\n",n.has(m.ColorAttribute3D.Fog)&&(i+="#define fogFlag\n"));for(var a=e.meshPart.mesh.getVertexAttributes().size(),o=0;o<a;o++){var u=e.meshPart.mesh.getVertexAttributes().get(o);u.usage===k.Usage.BoneWeight?i+="#define boneWeight"+u.unit+"Flag\n":u.usage===k.Usage.TextureCoordinates&&(i+="#define texCoords"+u.unit+"Flag\n")}return(r&g.BlendingAttribute.Type)===g.BlendingAttribute.Type&&(i+="#define "+g.BlendingAttribute.Alias+"Flag\n"),(r&w.TextureAttribute.Diffuse)===w.TextureAttribute.Diffuse&&(i+="#define "+w.TextureAttribute.DiffuseAlias+"Flag\n",i+="#define "+w.TextureAttribute.DiffuseAlias+"Coord texCoords0\n"),(r&w.TextureAttribute.Specular)===w.TextureAttribute.Specular&&(i+="#define "+w.TextureAttribute.SpecularAlias+"Flag\n",i+="#define "+w.TextureAttribute.SpecularAlias+"Coord texCoords0\n"),(r&w.TextureAttribute.Normal)===w.TextureAttribute.Normal&&(i+="#define "+w.TextureAttribute.NormalAlias+"Flag\n",i+="#define "+w.TextureAttribute.NormalAlias+"Coord texCoords0\n"),(r&w.TextureAttribute.Emissive)===w.TextureAttribute.Emissive&&(i+="#define "+w.TextureAttribute.EmissiveAlias+"Flag\n",i+="#define "+w.TextureAttribute.EmissiveAlias+"Coord texCoords0\n"),(r&w.TextureAttribute.Reflection)===w.TextureAttribute.Reflection&&(i+="#define "+w.TextureAttribute.ReflectionAlias+"Flag\n",i+="#define "+w.TextureAttribute.ReflectionAlias+"Coord texCoords0\n"),(r&w.TextureAttribute.Ambient)===w.TextureAttribute.Ambient&&(i+="#define "+w.TextureAttribute.AmbientAlias+"Flag\n",i+="#define "+w.TextureAttribute.AmbientAlias+"Coord texCoords0\n"),(r&m.ColorAttribute3D.Diffuse)===m.ColorAttribute3D.Diffuse&&(i+="#define "+m.ColorAttribute3D.DiffuseAlias+"Flag\n"),(r&m.ColorAttribute3D.Specular)===m.ColorAttribute3D.Specular&&(i+="#define "+m.ColorAttribute3D.SpecularAlias+"Flag\n"),(r&m.ColorAttribute3D.Emissive)===m.ColorAttribute3D.Emissive&&(i+="#define "+m.ColorAttribute3D.EmissiveAlias+"Flag\n"),(r&m.ColorAttribute3D.Reflection)===m.ColorAttribute3D.Reflection&&(i+="#define "+m.ColorAttribute3D.ReflectionAlias+"Flag\n"),(r&b.FloatAttribute.Shininess)===b.FloatAttribute.Shininess&&(i+="#define "+b.FloatAttribute.ShininessAlias+"Flag\n"),(r&b.FloatAttribute.AlphaTest)===b.FloatAttribute.AlphaTest&&(i+="#define "+b.FloatAttribute.AlphaTestAlias+"Flag\n"),e.bones&&t.numBones>0&&(i+="#define numBones "+t.numBones+"\n"),i}}]),n}(C.BaseShader);t.DefaultShader=F,F.defaultVertexShader="\n  #if defined(diffuseTextureFlag) || defined(specularTextureFlag) || defined(emissiveTextureFlag)\n  #define textureFlag\n  #endif\n\n  #if defined(specularTextureFlag) || defined(specularColorFlag)\n  #define specularFlag\n  #endif\n\n  #if defined(specularFlag) || defined(fogFlag)\n  #define cameraPositionFlag\n  #endif\n\n  attribute vec3 a_position;\n  uniform mat4 u_projViewTrans;\n\n  #if defined(colorFlag)\n  varying vec4 v_color;\n  attribute vec4 a_color;\n  #endif // colorFlag\n\n  #ifdef normalFlag\n  attribute vec3 a_normal;\n  uniform mat3 u_normalMatrix;\n  varying vec3 v_normal;\n  #endif // normalFlag\n\n  #ifdef textureFlag\n  attribute vec2 a_texCoords0;\n  #endif // textureFlag\n\n  #ifdef diffuseTextureFlag\n  uniform vec4 u_diffuseUVTransform;\n  varying vec2 v_diffuseUV;\n  #endif\n\n  #ifdef emissiveTextureFlag\n  uniform vec4 u_emissiveUVTransform;\n  varying vec2 v_emissiveUV;\n  #endif\n\n  #ifdef specularTextureFlag\n  uniform vec4 u_specularUVTransform;\n  varying vec2 v_specularUV;\n  #endif\n\n  #ifdef boneWeight0Flag\n  #define boneWeightsFlag\n  attribute vec2 a_boneWeight0;\n  #endif //boneWeight0Flag\n\n  #ifdef boneWeight1Flag\n  #ifndef boneWeightsFlag\n  #define boneWeightsFlag\n  #endif\n  attribute vec2 a_boneWeight1;\n  #endif //boneWeight1Flag\n\n  #ifdef boneWeight2Flag\n  #ifndef boneWeightsFlag\n  #define boneWeightsFlag\n  #endif\n  attribute vec2 a_boneWeight2;\n  #endif //boneWeight2Flag\n\n  #ifdef boneWeight3Flag\n  #ifndef boneWeightsFlag\n  #define boneWeightsFlag\n  #endif\n  attribute vec2 a_boneWeight3;\n  #endif //boneWeight3Flag\n\n  #ifdef boneWeight4Flag\n  #ifndef boneWeightsFlag\n  #define boneWeightsFlag\n  #endif\n  attribute vec2 a_boneWeight4;\n  #endif //boneWeight4Flag\n\n  #ifdef boneWeight5Flag\n  #ifndef boneWeightsFlag\n  #define boneWeightsFlag\n  #endif\n  attribute vec2 a_boneWeight5;\n  #endif //boneWeight5Flag\n\n  #ifdef boneWeight6Flag\n  #ifndef boneWeightsFlag\n  #define boneWeightsFlag\n  #endif\n  attribute vec2 a_boneWeight6;\n  #endif //boneWeight6Flag\n\n  #ifdef boneWeight7Flag\n  #ifndef boneWeightsFlag\n  #define boneWeightsFlag\n  #endif\n  attribute vec2 a_boneWeight7;\n  #endif //boneWeight7Flag\n\n  #if defined(numBones) && defined(boneWeightsFlag)\n  #if (numBones > 0) \n  #define skinningFlag\n  #endif\n  #endif\n\n  uniform mat4 u_worldTrans;\n\n  #if defined(numBones)\n  #if numBones > 0\n  uniform mat4 u_bones[numBones];\n  #endif //numBones\n  #endif\n\n  #ifdef shininessFlag\n  uniform float u_shininess;\n  #else\n  const float u_shininess = 20.0;\n  #endif // shininessFlag\n\n  #ifdef blendedFlag\n  uniform float u_opacity;\n  varying float v_opacity;\n\n  #ifdef alphaTestFlag\n  uniform float u_alphaTest;\n  varying float v_alphaTest;\n  #endif //alphaTestFlag\n  #endif // blendedFlag\n\n  #ifdef lightingFlag\n  varying vec3 v_lightDiffuse;\n\n  #ifdef ambientLightFlag\n  uniform vec3 u_ambientLight;\n  #endif // ambientLightFlag\n\n  #ifdef ambientCubemapFlag\n  uniform vec3 u_ambientCubemap[6];\n  #endif // ambientCubemapFlag \n\n  #ifdef sphericalHarmonicsFlag\n  uniform vec3 u_sphericalHarmonics[9];\n  #endif //sphericalHarmonicsFlag\n\n  #ifdef specularFlag\n  varying vec3 v_lightSpecular;\n  #endif // specularFlag\n\n  #ifdef cameraPositionFlag\n  uniform vec4 u_cameraPosition;\n  #endif // cameraPositionFlag\n\n  #ifdef fogFlag\n  varying float v_fog;\n  #endif // fogFlag\n\n\n  #if numDirectionalLights > 0\n  struct DirectionalLight\n  {\n    vec3 color;\n    vec3 direction;\n  };\n  uniform DirectionalLight u_dirLights[numDirectionalLights];\n  #endif // numDirectionalLights\n\n  #if numPointLights > 0\n  struct PointLight\n  {\n    vec3 color;\n    vec3 position;\n  };\n  uniform PointLight u_pointLights[numPointLights];\n  #endif // numPointLights\n\n  #if\tdefined(ambientLightFlag) || defined(ambientCubemapFlag) || defined(sphericalHarmonicsFlag)\n  #define ambientFlag\n  #endif //ambientFlag\n\n  #ifdef shadowMapFlag\n  uniform mat4 u_shadowMapProjViewTrans;\n  varying vec3 v_shadowMapUv;\n  #define separateAmbientFlag\n  #endif //shadowMapFlag\n\n  #if defined(ambientFlag) && defined(separateAmbientFlag)\n  varying vec3 v_ambientLight;\n  #endif //separateAmbientFlag\n\n  #endif // lightingFlag\n\n  void main() {\n    #ifdef diffuseTextureFlag\n      v_diffuseUV = u_diffuseUVTransform.xy + a_texCoords0 * u_diffuseUVTransform.zw;\n    #endif //diffuseTextureFlag\n    \n    #ifdef emissiveTextureFlag\n      v_emissiveUV = u_emissiveUVTransform.xy + a_texCoords0 * u_emissiveUVTransform.zw;\n    #endif //emissiveTextureFlag\n\n    #ifdef specularTextureFlag\n      v_specularUV = u_specularUVTransform.xy + a_texCoords0 * u_specularUVTransform.zw;\n    #endif //specularTextureFlag\n    \n    #if defined(colorFlag)\n      v_color = a_color;\n    #endif // colorFlag\n      \n    #ifdef blendedFlag\n      v_opacity = u_opacity;\n      #ifdef alphaTestFlag\n        v_alphaTest = u_alphaTest;\n      #endif //alphaTestFlag\n    #endif // blendedFlag\n    \n    #ifdef skinningFlag\n      mat4 skinning = mat4(0.0);\n      #ifdef boneWeight0Flag\n        skinning += (a_boneWeight0.y) * u_bones[int(a_boneWeight0.x)];\n      #endif //boneWeight0Flag\n      #ifdef boneWeight1Flag\t\t\t\t\n        skinning += (a_boneWeight1.y) * u_bones[int(a_boneWeight1.x)];\n      #endif //boneWeight1Flag\n      #ifdef boneWeight2Flag\t\t\n        skinning += (a_boneWeight2.y) * u_bones[int(a_boneWeight2.x)];\n      #endif //boneWeight2Flag\n      #ifdef boneWeight3Flag\n        skinning += (a_boneWeight3.y) * u_bones[int(a_boneWeight3.x)];\n      #endif //boneWeight3Flag\n      #ifdef boneWeight4Flag\n        skinning += (a_boneWeight4.y) * u_bones[int(a_boneWeight4.x)];\n      #endif //boneWeight4Flag\n      #ifdef boneWeight5Flag\n        skinning += (a_boneWeight5.y) * u_bones[int(a_boneWeight5.x)];\n      #endif //boneWeight5Flag\n      #ifdef boneWeight6Flag\n        skinning += (a_boneWeight6.y) * u_bones[int(a_boneWeight6.x)];\n      #endif //boneWeight6Flag\n      #ifdef boneWeight7Flag\n        skinning += (a_boneWeight7.y) * u_bones[int(a_boneWeight7.x)];\n      #endif //boneWeight7Flag\n    #endif //skinningFlag\n\n    #ifdef skinningFlag\n      vec4 pos = u_worldTrans * skinning * vec4(a_position, 1.0);\n    #else\n      vec4 pos = u_worldTrans * vec4(a_position, 1.0);\n    #endif\n      \n    gl_Position = u_projViewTrans * pos;\n      \n    #ifdef shadowMapFlag\n      vec4 spos = u_shadowMapProjViewTrans * pos;\n      v_shadowMapUv.xyz = (spos.xyz / spos.w) * 0.5 + 0.5;\n      v_shadowMapUv.z = min(v_shadowMapUv.z, 0.998);\n    #endif //shadowMapFlag\n    \n    #if defined(normalFlag)\n      #if defined(skinningFlag)\n        vec3 normal = normalize((u_worldTrans * skinning * vec4(a_normal, 0.0)).xyz);\n      #else\n        vec3 normal = normalize(u_normalMatrix * a_normal);\n      #endif\n      v_normal = normal;\n    #endif // normalFlag\n\n      #ifdef fogFlag\n          vec3 flen = u_cameraPosition.xyz - pos.xyz;\n          float fog = dot(flen, flen) * u_cameraPosition.w;\n          v_fog = min(fog, 1.0);\n      #endif\n\n    #ifdef lightingFlag\n      #if\tdefined(ambientLightFlag)\n            vec3 ambientLight = u_ambientLight;\n      #elif defined(ambientFlag)\n            vec3 ambientLight = vec3(0.0);\n      #endif\n        \n      #ifdef ambientCubemapFlag \t\t\n        vec3 squaredNormal = normal * normal;\n        vec3 isPositive  = step(0.0, normal);\n        ambientLight += squaredNormal.x * mix(u_ambientCubemap[0], u_ambientCubemap[1], isPositive.x) +\n            squaredNormal.y * mix(u_ambientCubemap[2], u_ambientCubemap[3], isPositive.y) +\n            squaredNormal.z * mix(u_ambientCubemap[4], u_ambientCubemap[5], isPositive.z);\n      #endif // ambientCubemapFlag\n\n      #ifdef sphericalHarmonicsFlag\n        ambientLight += u_sphericalHarmonics[0];\n        ambientLight += u_sphericalHarmonics[1] * normal.x;\n        ambientLight += u_sphericalHarmonics[2] * normal.y;\n        ambientLight += u_sphericalHarmonics[3] * normal.z;\n        ambientLight += u_sphericalHarmonics[4] * (normal.x * normal.z);\n        ambientLight += u_sphericalHarmonics[5] * (normal.z * normal.y);\n        ambientLight += u_sphericalHarmonics[6] * (normal.y * normal.x);\n        ambientLight += u_sphericalHarmonics[7] * (3.0 * normal.z * normal.z - 1.0);\n        ambientLight += u_sphericalHarmonics[8] * (normal.x * normal.x - normal.y * normal.y);\t\t\t\n      #endif // sphericalHarmonicsFlag\n\n      #ifdef ambientFlag\n        #ifdef separateAmbientFlag\n          v_ambientLight = ambientLight;\n          v_lightDiffuse = vec3(0.0);\n        #else\n          v_lightDiffuse = ambientLight;\n        #endif //separateAmbientFlag\n      #else\n            v_lightDiffuse = vec3(0.0);\n      #endif //ambientFlag\n\n        \n      #ifdef specularFlag\n        v_lightSpecular = vec3(0.0);\n        vec3 viewVec = normalize(u_cameraPosition.xyz - pos.xyz);\n      #endif // specularFlag\n        \n      #if (numDirectionalLights > 0) && defined(normalFlag)\n        for (int i = 0; i < numDirectionalLights; i++) {\n          vec3 lightDir = -u_dirLights[i].direction;\n          float NdotL = clamp(dot(normal, lightDir), 0.0, 1.0);\n          vec3 value = u_dirLights[i].color * NdotL;\n          v_lightDiffuse += value;\n          #ifdef specularFlag\n            float halfDotView = max(0.0, dot(normal, normalize(lightDir + viewVec)));\n            v_lightSpecular += value * pow(halfDotView, u_shininess);\n          #endif // specularFlag\n        }\n      #endif // numDirectionalLights\n\n      #if (numPointLights > 0) && defined(normalFlag)\n        for (int i = 0; i < numPointLights; i++) {\n          vec3 lightDir = u_pointLights[i].position - pos.xyz;\n          float dist2 = dot(lightDir, lightDir);\n          lightDir *= inversesqrt(dist2);\n          float NdotL = clamp(dot(normal, lightDir), 0.0, 1.0);\n          vec3 value = u_pointLights[i].color * (NdotL / (1.0 + dist2));\n          v_lightDiffuse += value;\n          #ifdef specularFlag\n            float halfDotView = max(0.0, dot(normal, normalize(lightDir + viewVec)));\n            v_lightSpecular += value * pow(halfDotView, u_shininess);\n          #endif // specularFlag\n        }\n      #endif // numPointLights\n    #endif // lightingFlag\n  }\n  ",F.defaultFragmentShader="\n  #ifdef GL_ES\n  #define LOWP lowp\n  #define MED mediump\n  #define HIGH highp\n  precision mediump float;\n  #else\n  #define MED\n  #define LOWP\n  #define HIGH\n  #endif\n\n  #if defined(specularTextureFlag) || defined(specularColorFlag)\n  #define specularFlag\n  #endif\n\n  #ifdef normalFlag\n  varying vec3 v_normal;\n  #endif //normalFlag\n\n  #if defined(colorFlag)\n  varying vec4 v_color;\n  #endif\n\n  #ifdef blendedFlag\n  varying float v_opacity;\n  #ifdef alphaTestFlag\n  varying float v_alphaTest;\n  #endif //alphaTestFlag\n  #endif //blendedFlag\n\n  #if defined(diffuseTextureFlag) || defined(specularTextureFlag) || defined(emissiveTextureFlag)\n  #define textureFlag\n  #endif\n\n  #ifdef diffuseTextureFlag\n  varying MED vec2 v_diffuseUV;\n  #endif\n\n  #ifdef specularTextureFlag\n  varying MED vec2 v_specularUV;\n  #endif\n\n  #ifdef emissiveTextureFlag\n  varying MED vec2 v_emissiveUV;\n  #endif\n\n  #ifdef diffuseColorFlag\n  uniform vec4 u_diffuseColor;\n  #endif\n\n  #ifdef diffuseTextureFlag\n  uniform sampler2D u_diffuseTexture;\n  #endif\n\n  #ifdef specularColorFlag\n  uniform vec4 u_specularColor;\n  #endif\n\n  #ifdef specularTextureFlag\n  uniform sampler2D u_specularTexture;\n  #endif\n\n  #ifdef normalTextureFlag\n  uniform sampler2D u_normalTexture;\n  #endif\n\n  #ifdef emissiveColorFlag\n  uniform vec4 u_emissiveColor;\n  #endif\n\n  #ifdef emissiveTextureFlag\n  uniform sampler2D u_emissiveTexture;\n  #endif\n\n  #ifdef lightingFlag\n  varying vec3 v_lightDiffuse;\n\n  #if\tdefined(ambientLightFlag) || defined(ambientCubemapFlag) || defined(sphericalHarmonicsFlag)\n  #define ambientFlag\n  #endif //ambientFlag\n\n  #ifdef specularFlag\n  varying vec3 v_lightSpecular;\n  #endif //specularFlag\n\n  #ifdef shadowMapFlag\n  uniform sampler2D u_shadowTexture;\n  uniform float u_shadowPCFOffset;\n  varying vec3 v_shadowMapUv;\n  #define separateAmbientFlag\n\n  float getShadowness(vec2 offset)\n  {\n      const vec4 bitShifts = vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0);\n      return step(v_shadowMapUv.z, dot(texture2D(u_shadowTexture, v_shadowMapUv.xy + offset), bitShifts));//+(1.0/255.0));\n  }\n\n  float getShadow()\n  {\n    return (//getShadowness(vec2(0,0)) +\n        getShadowness(vec2(u_shadowPCFOffset, u_shadowPCFOffset)) +\n        getShadowness(vec2(-u_shadowPCFOffset, u_shadowPCFOffset)) +\n        getShadowness(vec2(u_shadowPCFOffset, -u_shadowPCFOffset)) +\n        getShadowness(vec2(-u_shadowPCFOffset, -u_shadowPCFOffset))) * 0.25;\n  }\n  #endif //shadowMapFlag\n\n  #if defined(ambientFlag) && defined(separateAmbientFlag)\n  varying vec3 v_ambientLight;\n  #endif //separateAmbientFlag\n\n  #endif //lightingFlag\n\n  #ifdef fogFlag\n  uniform vec4 u_fogColor;\n  varying float v_fog;\n  #endif // fogFlag\n\n  void main() {\n    #if defined(normalFlag)\n      vec3 normal = v_normal;\n    #endif // normalFlag\n\n    #if defined(diffuseTextureFlag) && defined(diffuseColorFlag) && defined(colorFlag)\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV) * u_diffuseColor * v_color;\n    #elif defined(diffuseTextureFlag) && defined(diffuseColorFlag)\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV) * u_diffuseColor;\n    #elif defined(diffuseTextureFlag) && defined(colorFlag)\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV) * v_color;\n    #elif defined(diffuseTextureFlag)\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV);\n    #elif defined(diffuseColorFlag) && defined(colorFlag)\n      vec4 diffuse = u_diffuseColor * v_color;\n    #elif defined(diffuseColorFlag)\n      vec4 diffuse = u_diffuseColor;\n    #elif defined(colorFlag)\n      vec4 diffuse = v_color;\n    #else\n      vec4 diffuse = vec4(1.0);\n    #endif\n\n    #if defined(emissiveTextureFlag) && defined(emissiveColorFlag)\n      vec4 emissive = texture2D(u_emissiveTexture, v_emissiveUV) * u_emissiveColor;\n    #elif defined(emissiveTextureFlag)\n      vec4 emissive = texture2D(u_emissiveTexture, v_emissiveUV);\n    #elif defined(emissiveColorFlag)\n      vec4 emissive = u_emissiveColor;\n    #else\n      vec4 emissive = vec4(0.0);\n    #endif\n\n    #if (!defined(lightingFlag))\n      gl_FragColor.rgb = diffuse.rgb + emissive.rgb;\n    #elif (!defined(specularFlag))\n      #if defined(ambientFlag) && defined(separateAmbientFlag)\n        #ifdef shadowMapFlag\n          gl_FragColor.rgb = (diffuse.rgb * (v_ambientLight + getShadow() * v_lightDiffuse)) + emissive.rgb;\n          //gl_FragColor.rgb = texture2D(u_shadowTexture, v_shadowMapUv.xy);\n        #else\n          gl_FragColor.rgb = (diffuse.rgb * (v_ambientLight + v_lightDiffuse)) + emissive.rgb;\n        #endif //shadowMapFlag\n      #else\n        #ifdef shadowMapFlag\n          gl_FragColor.rgb = getShadow() * (diffuse.rgb * v_lightDiffuse) + emissive.rgb;\n        #else\n          gl_FragColor.rgb = (diffuse.rgb * v_lightDiffuse) + emissive.rgb;\n        #endif //shadowMapFlag\n      #endif\n    #else\n      #if defined(specularTextureFlag) && defined(specularColorFlag)\n        vec3 specular = texture2D(u_specularTexture, v_specularUV).rgb * u_specularColor.rgb * v_lightSpecular;\n      #elif defined(specularTextureFlag)\n        vec3 specular = texture2D(u_specularTexture, v_specularUV).rgb * v_lightSpecular;\n      #elif defined(specularColorFlag)\n        vec3 specular = u_specularColor.rgb * v_lightSpecular;\n      #else\n        vec3 specular = v_lightSpecular;\n      #endif\n\n      #if defined(ambientFlag) && defined(separateAmbientFlag)\n        #ifdef shadowMapFlag\n        gl_FragColor.rgb = (diffuse.rgb * (getShadow() * v_lightDiffuse + v_ambientLight)) + specular + emissive.rgb;\n          //gl_FragColor.rgb = texture2D(u_shadowTexture, v_shadowMapUv.xy);\n        #else\n          gl_FragColor.rgb = (diffuse.rgb * (v_lightDiffuse + v_ambientLight)) + specular + emissive.rgb;\n        #endif //shadowMapFlag\n      #else\n        #ifdef shadowMapFlag\n          gl_FragColor.rgb = getShadow() * ((diffuse.rgb * v_lightDiffuse) + specular) + emissive.rgb;\n        #else\n          gl_FragColor.rgb = (diffuse.rgb * v_lightDiffuse) + specular + emissive.rgb;\n        #endif //shadowMapFlag\n      #endif\n    #endif //lightingFlag\n\n    #ifdef fogFlag\n      gl_FragColor.rgb = mix(gl_FragColor.rgb, u_fogColor.rgb, v_fog);\n    #endif // end fogFlag\n\n    #ifdef blendedFlag\n      gl_FragColor.a = diffuse.a * v_opacity;\n      #ifdef alphaTestFlag\n        if (gl_FragColor.a <= v_alphaTest)\n          discard;\n      #endif\n    #else\n      gl_FragColor.a = 1.0;\n    #endif\n  }\n  ",F.implementedFlags=g.BlendingAttribute.Type|w.TextureAttribute.Diffuse|m.ColorAttribute3D.Diffuse|m.ColorAttribute3D.Specular|b.FloatAttribute.Shininess,F.defaultCullFace=S.GL20.GL_BACK,F.defaultDepthFunc=S.GL20.GL_LEQUAL,F.optionalAttributes=M.IntAttribute.CullFace,F.tmpAttributes=new p.Attributes},4954:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7452:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4678),t),r(n(616),t),r(n(4954),t)},6425:function(e,t,n){"use strict";var i=n(1655).default,r=n(6389).default,s=n(6690).default,a=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationController=t.AnimationDesc=void 0;var o=n(8606),u=n(4644),l=function(){function e(){s(this,e),this.listener=null,this.animation=null,this.speed=0,this.time=0,this.offset=0,this.duration=0,this.loopCount=0}return a(e,[{key:"update",value:function(e){if(0!==this.loopCount&&this.animation){var t,n=this.speed*e;if(o.MathUtils.isZero(this.duration))t=1;else if(this.time+=n,this.speed<0){var i=this.duration-this.time;t=Math.floor(Math.abs(i/this.duration)),i=Math.abs(i%this.duration),this.time=this.duration-i}else t=Math.floor(Math.abs(this.time/this.duration)),this.time=Math.abs(this.time%this.duration);for(var r=0;r<t;r++)if(this.loopCount>0&&this.loopCount--,0!==this.loopCount&&this.listener&&this.listener.onLoop(this),0===this.loopCount){var s=(t-1-r)*this.duration+(n<0?this.duration-this.time:this.time);return this.time=n<0?0:this.duration,this.listener&&this.listener.onEnd(this),s}return-1}return e}}]),e}();t.AnimationDesc=l;var h=function(e){i(n,e);var t=r(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).animationPool=new o.Pool((function(){return new l})),e.current=null,e.queued=null,e.queuedTransitionTime=0,e.previous=null,e.transitionCurrentTime=0,e.transitionTargetTime=0,e.inAction=!1,e.paused=!1,e.allowSameAnimation=!1,e.justChangedAnimation=!1,e}return a(n,[{key:"obtainAnimation",value:function(e,t,n,i,r,s){if(!e)return null;var a=this.animationPool.obtain();return a.animation=e,a.listener=s,a.loopCount=i,a.speed=r,a.offset=t,a.duration=n<0?e.duration-t:n,a.time=r<0?a.duration:0,a}},{key:"obtain",value:function(e,t,n,i,r,s){if(!e)return null;var a=this.target.getAnimation(e);if(!a)throw new Error("Unknown animation: "+e);return this.obtainAnimation(a,t,n,i,r,s)}},{key:"obtainAnimationDesc",value:function(e){return this.obtainAnimation(e.animation,e.offset,e.duration,e.loopCount,e.speed,e.listener)}},{key:"update",value:function(e){if(!this.paused&&(this.previous&&(this.transitionCurrentTime+=e)>=this.transitionTargetTime&&(this.removeAnimation(this.previous.animation),this.justChangedAnimation=!0,this.animationPool.free(this.previous),this.previous=null),this.justChangedAnimation&&(this.target.calculateTransforms(),this.justChangedAnimation=!1),this.current&&0!==this.current.loopCount&&this.current.animation)){var t=this.current.update(e);if(t>=0&&this.queued)return this.inAction=!1,this.actionWithAnimationDesc(this.queued,this.queuedTransitionTime),this.queued=null,void(t>0&&this.update(t));this.previous?this.applyAnimations(this.previous.animation,this.previous.offset+this.previous.time,this.current.animation,this.current.offset+this.current.time,this.transitionCurrentTime/this.transitionTargetTime):this.applyAnimation(this.current.animation,this.current.offset+this.current.time)}}},{key:"setAnimation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.setAnimationWithOffset(e,0,-1,t,n,i)}},{key:"setAnimationWithOffset",value:function(e,t,n,i,r,s){return this.setAnimationWithAnimationDesc(this.obtain(e,t,n,i,r,s))}},{key:"setAnimationWithAnimation",value:function(e,t,n,i,r,s){return this.setAnimationWithAnimationDesc(this.obtainAnimation(e,t,n,i,r,s))}},{key:"setAnimationWithAnimationDesc",value:function(e){return this.current?(!this.allowSameAnimation&&e&&this.current.animation===e.animation?e.time=this.current.time:this.removeAnimation(this.current.animation),this.animationPool.free(this.current),this.current=e):this.current=e,this.justChangedAnimation=!0,e}},{key:"animate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4?arguments[4]:void 0;return this.animateWithOffset(e,0,-1,t,n,i,r)}},{key:"animateWithOffset",value:function(e,t,n,i,r,s,a){return this.animateWithAnimationDesc(this.obtain(e,t,n,i,r,s),a)}},{key:"animateWithAnimation",value:function(e,t,n,i,r,s,a){return this.animateWithAnimationDesc(this.obtainAnimation(e,t,n,i,r,s),a)}},{key:"animateWithAnimationDesc",value:function(e,t){return this.current&&0!==this.current.loopCount?this.inAction?this.queueWithAnimationDesc(e,t):!this.allowSameAnimation&&e&&this.current.animation===e.animation?(e.time=this.current.time,this.animationPool.free(this.current),this.current=e):(this.previous&&(this.removeAnimation(this.previous.animation),this.animationPool.free(this.previous)),this.previous=this.current,this.current=e,this.transitionCurrentTime=0,this.transitionTargetTime=t):this.current=e,e}},{key:"queue",value:function(e,t,n,i,r){return this.queueWithOffset(e,0,-1,t,n,i,r)}},{key:"queueWithOffset",value:function(e,t,n,i,r,s,a){return this.queueWithAnimationDesc(this.obtain(e,t,n,i,r,s),a)}},{key:"queueWithAnimation",value:function(e,t,n,i,r,s,a){return this.queueWithAnimationDesc(this.obtainAnimation(e,t,n,i,r,s),a)}},{key:"queueWithAnimationDesc",value:function(e,t){return this.current&&0!==this.current.loopCount?(this.queued&&this.animationPool.free(this.queued),this.queued=e,this.queuedTransitionTime=t,this.current.loopCount<0&&(this.current.loopCount=1)):this.animateWithAnimationDesc(e,t),e}},{key:"action",value:function(e,t,n,i,r){return this.actionWithOffset(e,0,-1,t,n,i,r)}},{key:"actionWithOffset",value:function(e,t,n,i,r,s,a){return this.actionWithAnimationDesc(this.obtain(e,t,n,i,r,s),a)}},{key:"actionWithAnimation",value:function(e,t,n,i,r,s,a){return this.actionWithAnimationDesc(this.obtainAnimation(e,t,n,i,r,s),a)}},{key:"actionWithAnimationDesc",value:function(e,t){if(e.loopCount<0)throw new Error("An action cannot be continuous");if(this.current&&0!==this.current.loopCount){var n=this.inAction?null:this.obtainAnimationDesc(this.current);this.inAction=!1,this.animateWithAnimationDesc(e,t),this.inAction=!0,n&&this.queueWithAnimationDesc(n,t)}else this.animateWithAnimationDesc(e,t);return e}}]),n}(u.BaseAnimationController);t.AnimationController=h},4644:function(e,t,n){"use strict";var i=n(7424).default,r=n(4704).default,s=n(6690).default,a=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAnimationController=t.Transform=void 0;var o=n(5122),u=n(8606),l=n(7811),h=function(){function e(){s(this,e),this.translation=new l.Vector3,this.rotation=new o.Quaternion,this.scale=new l.Vector3(1,1,1)}return a(e,[{key:"idt",value:function(){return this.translation.set(0,0,0),this.rotation.idt(),this.scale.set(1,1,1),this}},{key:"set",value:function(e,t,n){return this.translation.setFrom(e),this.rotation.setFrom(t),this.scale.setFrom(n),this}},{key:"setFrom",value:function(e){return this.set(e.translation,e.rotation,e.scale)}},{key:"lerpWithTranform",value:function(e,t){return this.lerp(e.translation,e.rotation,e.scale,t)}},{key:"lerp",value:function(e,t,n,i){return this.translation.lerp(e,i),this.rotation.slerp(t,i),this.scale.lerp(n,i),this}},{key:"toMatrix4",value:function(e){return e.setFromTranslationRotation(this.translation,this.rotation,this.scale)}},{key:"reset",value:function(){this.idt()}},{key:"toString",value:function(){return this.translation.toString()+" - "+this.rotation.toString()+" - "+this.scale.toString()}}]),e}();t.Transform=h;var c=function(){function e(t){s(this,e),this.transformPool=new u.Pool((function(){return new h})),this.applying=!1,this.target=t}return a(e,[{key:"begin",value:function(){if(this.applying)throw new Error("You must call end() after each call to being()");this.applying=!0}},{key:"apply",value:function(t,n,i){if(!this.applying)throw new Error("You must call begin() before adding an animation");e.applyAnimation(e.transforms,this.transformPool,i,t,n)}},{key:"end",value:function(){if(!this.applying)throw new Error("You must call begin() first");var t,n=r(e.transforms);try{for(n.s();!(t=n.n()).done;){var s=i(t.value,2),a=s[0],o=s[1];o.toMatrix4(a.localTransform),this.transformPool.free(o)}}catch(u){n.e(u)}finally{n.f()}e.transforms.clear(),this.target.calculateTransforms(),this.applying=!1}},{key:"applyAnimation",value:function(t,n){if(this.applying)throw new Error("Call end() first");e.applyAnimation(null,null,1,t,n),this.target.calculateTransforms()}},{key:"applyAnimations",value:function(e,t,n,i,r){if(n&&0!==r)if(e&&1!==r){if(this.applying)throw new Error("Call end() first");this.begin(),this.apply(e,t,1),this.apply(n,i,r),this.end()}else this.applyAnimation(n,i);else this.applyAnimation(e,t)}},{key:"removeAnimation",value:function(e){var t,n=r(e.nodeAnimations);try{for(n.s();!(t=n.n()).done;){t.value.node.isAnimated=!1}}catch(i){n.e(i)}finally{n.f()}}}],[{key:"getFirstKeyframeIndexAtTime",value:function(e,t){var n=e.length-1;if(n<=0||t<e[0].keytime||t>e[n].keytime)return 0;for(var i=0,r=n;i<r;){var s=Math.floor((i+r)/2);if(t>e[s+1].keytime)i=s+1;else{if(!(t<e[s].keytime))return s;r=s-1}}return i}},{key:"getTranslationAtTime",value:function(e,t,n){if(!e.translation)return n.setFrom(e.node.translation);if(1===e.translation.length)return n.setFrom(e.translation[0].value);var i=this.getFirstKeyframeIndexAtTime(e.translation,t),r=e.translation[i];if(n.setFrom(r.value),++i<e.translation.length){var s=e.translation[i],a=(t-r.keytime)/(s.keytime-r.keytime);n.lerp(s.value,a)}return n}},{key:"getRotationAtTime",value:function(e,t,n){if(!e.rotation)return n.setFrom(e.node.rotation);if(1===e.rotation.length)return n.setFrom(e.rotation[0].value);var i=this.getFirstKeyframeIndexAtTime(e.rotation,t),r=e.rotation[i];if(n.setFrom(r.value),++i<e.rotation.length){var s=e.rotation[i],a=(t-r.keytime)/(s.keytime-r.keytime);n.slerp(s.value,a)}return n}},{key:"getScalingAtTime",value:function(e,t,n){if(!e.scaling)return n.setFrom(e.node.scale);if(1===e.scaling.length)return n.setFrom(e.scaling[0].value);var i=this.getFirstKeyframeIndexAtTime(e.scaling,t),r=e.scaling[i];if(n.setFrom(r.value),++i<e.scaling.length){var s=e.scaling[i],a=(t-r.keytime)/(s.keytime-r.keytime);n.lerp(s.value,a)}return n}},{key:"getNodeAnimationTransform",value:function(e,t){var n=this.tmpT;return this.getTranslationAtTime(e,t,n.translation),this.getRotationAtTime(e,t,n.rotation),this.getScalingAtTime(e,t,n.scale),n}},{key:"applyNodeAnimationDirectly",value:function(e,t){var n=e.node;n.isAnimated=!0,this.getNodeAnimationTransform(e,t).toMatrix4(n.localTransform)}},{key:"applyNodeAnimationBlending",value:function(e,t,n,i,r){var s=e.node;s.isAnimated=!0;var a=this.getNodeAnimationTransform(e,r),o=t.get(s);o?i>.999999?o.setFrom(a):o.lerpWithTranform(a,i):i>.999999?t.set(s,n.obtain().setFrom(a)):t.set(s,n.obtain().set(s.translation,s.rotation,s.scale).lerpWithTranform(a,i))}},{key:"applyAnimation",value:function(e,t,n,i,s){if(e){var a,o=r(e.keys());try{for(o.s();!(a=o.n()).done;){a.value.isAnimated=!1}}catch(m){o.e(m)}finally{o.f()}var u,l=r(i.nodeAnimations);try{for(l.s();!(u=l.n()).done;){var h=u.value;this.applyNodeAnimationBlending(h,e,t,n,s)}}catch(m){l.e(m)}finally{l.f()}var c,f=r(e.entries());try{for(f.s();!(c=f.n()).done;){var d=c.value;d[0].isAnimated||(d[0].isAnimated=!0,d[1].lerp(d[0].translation,d[0].rotation,d[0].scale,n))}}catch(m){f.e(m)}finally{f.f()}}else{var v,p=r(i.nodeAnimations);try{for(p.s();!(v=p.n()).done;){var g=v.value;this.applyNodeAnimationDirectly(g,s)}}catch(m){p.e(m)}finally{p.f()}}}}]),e}();t.BaseAnimationController=c,c.transforms=new Map,c.tmpT=new h},7083:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BoxShapeBuilder=void 0;var s=n(8606),a=n(7811),o=n(6506),u=n(8552),l=n(8633),h=function(){function e(){i(this,e)}return r(e,null,[{key:"obtainV3",value:function(){return e.vectorPool.obtain()}},{key:"freeAll",value:function(){e.vectorPool.flush()}},{key:"buildWithWidthHeight",value:function(e,t,n,i){this.buildWithRect(e,0,0,0,t,n,i)}},{key:"buildWithVertexInfo",value:function(e,t,n,i,r,s,a,o,l){var h=e.vertex(t),c=e.vertex(i),f=e.vertex(r),d=e.vertex(n),v=e.vertex(s),p=e.vertex(o),g=e.vertex(a),m=e.vertex(l),y=e.getPrimitiveType();y===u.GL20.GL_LINES?(e.rect(h,c,f,d),e.rect(p,v,g,m),e.index8Values(h,v,d,g,f,m,c,p)):y===u.GL20.GL_POINTS?(e.rect(h,c,f,d),e.rect(p,v,g,m)):(e.rect(h,c,f,d),e.rect(p,v,g,m),e.rect(h,d,g,v),e.rect(p,m,f,c),e.rect(p,c,h,v),e.rect(f,m,g,d))}},{key:"buildWithVectorCorner",value:function(e,t,n,i,r,s,a,o,u){if(0===(e.getAttributes().getMask()&(l.Usage.Normal|l.Usage.BiNormal|l.Usage.Tangent|l.Usage.TextureCoordinates)))this.buildWithVertexInfo(e,this.vertTmp1.set(t,null,null,null),this.vertTmp2.set(n,null,null,null),this.vertTmp3.set(i,null,null,null),this.vertTmp4.set(r,null,null,null),this.vertTmp5.set(s,null,null,null),this.vertTmp6.set(a,null,null,null),this.vertTmp7.set(o,null,null,null),this.vertTmp8.set(u,null,null,null));else{var h=this.tmpV1.set(t.x,t.y,t.z).lerp(r,.5).sub(this.tmpV2.set(s.x,s.y,s.z).lerp(u,.5)).normalize();e.rectWithVectorCorner(t,n,r,i,h),e.rectWithVectorCorner(a,s,o,u,h.scale(-1)),h=this.tmpV1.set(t.x,t.y,t.z).lerp(o,.5).sub(this.tmpV2.set(n.x,n.y,n.z).lerp(u,.5)).normalize(),e.rectWithVectorCorner(s,t,i,o,h),e.rectWithVectorCorner(n,a,u,r,h.scale(-1)),h=this.tmpV1.set(t.x,t.y,t.z).lerp(a,.5).sub(this.tmpV2.set(i.x,i.y,i.z).lerp(u,.5)).normalize(),e.rectWithVectorCorner(s,a,n,t,h),e.rectWithVectorCorner(i,r,u,o,h.scale(-1))}}},{key:"buildWithRect",value:function(e,t,n,i,r,s,a){var o=.5*r,u=.5*s,l=.5*a,h=t-o,c=n-u,f=i-l,d=t+o,v=n+u,p=i+l;this.buildWithVectorCorner(e,this.obtainV3().set(h,c,f),this.obtainV3().set(h,v,f),this.obtainV3().set(d,c,f),this.obtainV3().set(d,v,f),this.obtainV3().set(h,c,p),this.obtainV3().set(h,v,p),this.obtainV3().set(d,c,p),this.obtainV3().set(d,v,p)),this.freeAll()}}]),e}();t.BoxShapeBuilder=h,h.tmpV0=new a.Vector3,h.tmpV1=new a.Vector3,h.tmpV2=new a.Vector3,h.tmpV3=new a.Vector3,h.tmpV4=new a.Vector3,h.tmpV5=new a.Vector3,h.tmpV6=new a.Vector3,h.tmpV7=new a.Vector3,h.vertTmp0=new o.VertexInfo,h.vertTmp1=new o.VertexInfo,h.vertTmp2=new o.VertexInfo,h.vertTmp3=new o.VertexInfo,h.vertTmp4=new o.VertexInfo,h.vertTmp5=new o.VertexInfo,h.vertTmp6=new o.VertexInfo,h.vertTmp7=new o.VertexInfo,h.vertTmp8=new o.VertexInfo,h.vectorPool=new s.FlushablePool((function(){return new a.Vector3}))},5223:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.IndexBufferObject=void 0;var s=n(8552),a=function(){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];i(this,e),this.isDirty=!0,this.isBound=!1,this.indicesLength=0,this.gl=t,this.empty=0===n,this.empty&&(n=1),this.byteBuffer=new Uint16Array(n),this.isDirect=!0,this.ownsBuffer=!0,this.indicesLength=0,this.bufferHandle=this.gl.createBuffer(),this.usage=r?s.GL20.GL_STATIC_DRAW:s.GL20.GL_DYNAMIC_DRAW}return r(e,[{key:"getNumIndices",value:function(){return this.indicesLength}},{key:"getNumMaxIndices",value:function(){return this.byteBuffer.length}},{key:"setIndices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;this.isDirty=!0,this.byteBuffer.set(e.slice(t,t+n),0),this.indicesLength=n,this.isBound&&(this.gl.bufferData(s.GL20.GL_ELEMENT_ARRAY_BUFFER,this.byteBuffer,this.usage),this.isDirty=!1)}},{key:"updateIndices",value:function(e,t,n,i){this.isDirty=!0,this.byteBuffer.set(t.slice(n,n+i),e),this.indicesLength=e+i,this.isBound&&(this.gl.bufferData(s.GL20.GL_ELEMENT_ARRAY_BUFFER,this.byteBuffer.subarray(0,this.indicesLength),this.usage),this.isDirty=!1)}},{key:"getBuffer",value:function(){return this.isDirty=!0,this.byteBuffer}},{key:"bind",value:function(){if(0===this.bufferHandle)throw new Error("No buffer allocated!");this.gl.bindBuffer(s.GL20.GL_ELEMENT_ARRAY_BUFFER,this.bufferHandle),this.isDirty&&(this.gl.bufferData(s.GL20.GL_ELEMENT_ARRAY_BUFFER,this.byteBuffer,this.usage),this.isDirty=!1),this.isBound=!0}},{key:"unbind",value:function(){this.gl.bindBuffer(s.GL20.GL_ELEMENT_ARRAY_BUFFER,null),this.isBound=!1}},{key:"invalidate",value:function(){this.bufferHandle=this.gl.createBuffer(),this.isDirty=!0}},{key:"dispose",value:function(){this.gl.bindBuffer(s.GL20.GL_ELEMENT_ARRAY_BUFFER,null),this.gl.deleteBuffer(this.bufferHandle),this.bufferHandle=new WebGLBuffer}}]),e}();t.IndexBufferObject=a},3776:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MeshBuilder=void 0;var a=n(5477),o=n(6239),u=n(4995),l=n(9699),h=n(1858),c=n(8606),f=n(7811),d=n(8633),v=n(427),p=n(8552),g=n(5766),m=n(3627),y=n(7083),b=n(6506),M=function(){function e(t){r(this,e),this.gl=t,this.vertTmp1=new b.VertexInfo,this.vertTmp2=new b.VertexInfo,this.vertTmp3=new b.VertexInfo,this.vertTmp4=new b.VertexInfo,this.tempC1=new c.Color,this.vertices=[],this.indices=[],this.parts=[],this.color=c.Color.WHITE,this.hasColor=!1,this.uOffset=0,this.uScale=1,this.vOffset=0,this.vScale=1,this.hasUVTransform=!1,this.vertexTransformationEnabled=!1,this.positionTransform=new u.Matrix4,this.normalTransform=new o.Matrix3,this.bounds=new a.BoundingBox,this.lastIndex=-1,this.tmpNormal=new f.Vector3}return s(e,[{key:"begin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(this.attributes)throw new Error("Call end() first");this.attributes=e,this.parts.length=0,this.vindex=0,this.lastIndex=-1,this.istart=0,this.meshPart=null,this.stride=e.vertexSize/4,(!this._vertex||this.vertex.length<this.stride)&&(this._vertex=new Array(this.stride));var n=e.findByUsage(d.Usage.Position);if(!n)throw new Error("Cannot build mesh without position attribute");this.posOffset=n.offset/4,this.posSize=n.numComponents,n=e.findByUsage(d.Usage.Normal),this.norOffset=n?n.offset/4:-1,n=e.findByUsage(d.Usage.BiNormal),this.biNorOffset=n?n.offset/4:-1,n=e.findByUsage(d.Usage.Tangent),this.tangentOffset=n?n.offset/4:-1,n=e.findByUsage(d.Usage.ColorUnpacked),this.colOffset=n?n.offset/4:-1,this.colSize=n?n.numComponents:0,n=e.findByUsage(d.Usage.ColorPacked),this.cpOffset=n?n.offset/4:-1,n=e.findByUsage(d.Usage.TextureCoordinates),this.uvOffset=n?n.offset/4:-1,this.setColor(null),this.setVertexTransform(null),this.setUVRangeByRegion(null),this.primitiveType=t,this.bounds.inf()}},{key:"setColor",value:function(e){this.hasColor=!!e;var t=this.hasColor?e:c.Color.WHITE;this.color.set(t.r,t.g,t.b,t.a)}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getLastIndex",value:function(){return this.lastIndex}},{key:"endpart",value:function(){this.meshPart&&(this.bounds.getCenter(this.meshPart.center),this.bounds.getDimensions(this.meshPart.halfExtents).scale(.5),this.meshPart.radius=this.meshPart.halfExtents.length(),this.bounds.inf(),this.meshPart.offset=this.istart,this.meshPart.size=this.indices.length-this.istart,this.istart=this.indices.length,this.meshPart=null)}},{key:"part",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.attributes)throw new Error("Call begin() first");return n||(n=new m.MeshPart),this.endpart(),this.meshPart=n,this.meshPart.id=e,this.primitiveType=this.meshPart.primitiveType=t,this.parts.push(this.meshPart),this.setColor(null),this.setVertexTransform(null),this.setUVRangeByRegion(null),this.meshPart}},{key:"end",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t||(t=new g.Mesh3D(this.gl,!0,!0,Math.min(this.vertices.length/this.stride,e.MAX_VERTICES),this.indices.length,this.attributes)),this.endpart(),!this.attributes)throw new Error("Call begin() first");if(!this.attributes.equals(t.getVertexAttributes()))throw new Error("Mesh attributes don't match");if(t.getMaxVertices()*this.stride<this.vertices.length)throw new Error("Mesh can't hold enough vertices: "+t.getMaxVertices()+" * "+this.stride+" < "+this.vertices.length);if(t.getMaxIndices()<this.indices.length)throw new Error("Mesh can't hold enough indices: "+t.getMaxIndices()+" < "+this.indices.length);t.setVertices(this.vertices,0,this.vertices.length),t.setIndices(this.indices,0,this.indices.length);var n,r=i(this.parts);try{for(r.s();!(n=r.n()).done;){n.value.mesh=t}}catch(s){r.e(s)}finally{r.f()}return this.parts.length=0,this.attributes=null,this.vertices.length=0,this.indices.length=0,t}},{key:"clear",value:function(){this.vertices.length=0,this.indices.length=0,this.parts.length=0,this.vindex=0,this.lastIndex=-1,this.istart=0,this.meshPart=null}},{key:"getFloatsPerVertex",value:function(){return this.stride}},{key:"setUVRange",value:function(e,t,n,i){this.uOffset=e,this.vOffset=t,this.uScale=n-e,this.vScale=i-t,this.hasUVTransform=!(c.MathUtils.isZero(e)&&c.MathUtils.isZero(t)&&c.MathUtils.isEqual(n,1)&&c.MathUtils.isEqual(i,1))}},{key:"setUVRangeByRegion",value:function(e){e?(this.hasUVTransform=!0,this.setUVRange(e.u,e.v,e.u2,e.v2)):(this.hasUVTransform=!1,this.uOffset=this.vOffset=0,this.uScale=this.vScale=1)}},{key:"setVertexTransform",value:function(e){this.vertexTransformationEnabled=!!e,this.vertexTransformationEnabled?(this.positionTransform.set(e.values),this.normalTransform.setByMatrix4(e).inv().transpose()):(this.positionTransform.idt(),this.normalTransform.idt())}},{key:"addVertex",value:function(t,n){var i=this.vertices.length;c.Utils.arrayCopy(t,n,this.vertices,this.vertices.length,this.stride),this.lastIndex=this.vindex++,this.vertexTransformationEnabled&&(e.transformPosition(this.vertices,i+this.posOffset,this.posSize,this.positionTransform),this.norOffset>=0&&e.transformNormal(this.vertices,i+this.norOffset,3,this.normalTransform),this.biNorOffset>=0&&e.transformNormal(this.vertices,i+this.biNorOffset,3,this.normalTransform),this.tangentOffset>=0&&e.transformNormal(this.vertices,i+this.tangentOffset,3,this.normalTransform));var r=this.vertices[i+this.posOffset],s=this.posSize>1?this.vertices[i+this.posOffset+1]:0,a=this.posSize>2?this.vertices[i+this.posOffset+2]:0;if(this.bounds.ext(r,s,a),this.hasColor)if(this.colOffset>=0)this.vertices[i+this.colOffset]*=this.color.r,this.vertices[i+this.colOffset+1]*=this.color.g,this.vertices[i+this.colOffset+2]*=this.color.b,this.colSize>3&&(this.vertices[i+this.colOffset+3]*=this.color.a);else if(this.cpOffset>=0){c.Color.rgba8888ToColor(this.tempC1,this.vertices[i+this.cpOffset]);var o=this.tempC1.mul(this.color.r,this.color.g,this.color.b,this.color.a);l.NumberUtil.colorToFloat(o.r,o.g,o.b,o.a),this.vertices[i+this.cpOffset]=l.NumberUtil.colorToFloat(o.r,o.g,o.b,o.a)}this.hasUVTransform&&this.uvOffset>=0&&(this.vertices[i+this.uvOffset]=this.uOffset+this.uScale*this.vertices[i+this.uvOffset],this.vertices[i+this.uvOffset+1]=this.vOffset+this.vScale*this.vertices[i+this.uvOffset+1])}},{key:"box",value:function(e,t,n){y.BoxShapeBuilder.buildWithWidthHeight(this,e,t,n)}},{key:"vertexWithData",value:function(t,n,i,r){if(this.vindex>e.MAX_INDEX)throw new Error("Too many vertices used");return this._vertex[this.posOffset]=t.x,this.posSize>1&&(this._vertex[this.posOffset+1]=t.y),this.posSize>2&&(this._vertex[this.posOffset+2]=t.z),this.norOffset>=0&&(n||(n=this.tmpNormal.set(t.x,t.y,t.z).normalize()),this._vertex[this.norOffset]=n.x,this._vertex[this.norOffset+1]=n.y,this._vertex[this.norOffset+2]=n.z),this.colOffset>=0?(i||(i=c.Color.WHITE),this._vertex[this.colOffset]=i.r,this._vertex[this.colOffset+1]=i.g,this._vertex[this.colOffset+2]=i.b,this.colSize>3&&(this._vertex[this.colOffset+3]=i.a)):this.cpOffset>0&&(i||(i=c.Color.WHITE),this._vertex[this.cpOffset]=l.NumberUtil.colorToFloat(i.r,i.g,i.b,i.a)),r&&this.uvOffset>=0&&(this._vertex[this.uvOffset]=r.x,this._vertex[this.uvOffset+1]=r.y),this.addVertex(this._vertex,0),this.lastIndex}},{key:"vertex",value:function(e){return this.vertexWithData(e.hasPosition?e.position:null,e.hasNormal?e.normal:null,e.hasColor?e.color:null,e.hasUV?e.uv:null)}},{key:"index",value:function(e){this.indices.push(e)}},{key:"index2Values",value:function(e,t,n){this.indices.push(e),this.indices.push(t)}},{key:"index3Values",value:function(e,t,n){this.indices.push(e),this.indices.push(t),this.indices.push(n)}},{key:"index4Values",value:function(e,t,n,i){this.indices.push(e),this.indices.push(t),this.indices.push(n),this.indices.push(i)}},{key:"index6Values",value:function(e,t,n,i,r,s){this.indices.push(e),this.indices.push(t),this.indices.push(n),this.indices.push(i),this.indices.push(r),this.indices.push(s)}},{key:"index8Values",value:function(e,t,n,i,r,s,a,o){this.indices.push(e),this.indices.push(t),this.indices.push(n),this.indices.push(i),this.indices.push(r),this.indices.push(s),this.indices.push(a),this.indices.push(o)}},{key:"rect",value:function(e,t,n,i){if(this.primitiveType===p.GL20.GL_TRIANGLES)this.index6Values(e,t,n,n,i,e);else if(this.primitiveType===p.GL20.GL_LINES)this.index8Values(e,t,t,n,n,i,i,e);else{if(this.primitiveType!==p.GL20.GL_POINTS)throw new Error("Incorrect primitive type");this.index4Values(e,t,n,i)}}},{key:"rectWithVertexInfo",value:function(e,t,n,i){this.rect(this.vertex(e),this.vertex(t),this.vertex(n),this.vertex(i))}},{key:"rectWithVectorCorner",value:function(e,t,n,i,r){this.rectWithVertexInfo(this.vertTmp1.set(e,r,null,null).setUV(0,1),this.vertTmp2.set(t,r,null,null).setUV(1,1),this.vertTmp3.set(n,r,null,null).setUV(1,0),this.vertTmp4.set(i,r,null,null).setUV(0,0))}},{key:"rectWithValue",value:function(e,t,n,i,r,s,a,o,u,l,h,c,f,d,v){this.rectWithVertexInfo(this.vertTmp1.set(null,null,null,null).setPos(e,t,n).setNor(f,d,v).setUV(0,1),this.vertTmp2.set(null,null,null,null).setPos(i,r,s).setNor(f,d,v).setUV(1,1),this.vertTmp3.set(null,null,null,null).setPos(a,o,u).setNor(f,d,v).setUV(1,0),this.vertTmp4.set(null,null,null,null).setPos(l,h,c).setNor(f,d,v).setUV(0,0))}},{key:"getVertexTransform",value:function(e){return e.set(this.positionTransform.values)}},{key:"getPrimitiveType",value:function(){return this.primitiveType}}],[{key:"createAttributes",value:function(e){var t=[];return(e&d.Usage.Position)===d.Usage.Position&&t.push(d.VertexAttribute3D.Position()),(e&d.Usage.ColorUnpacked)===d.Usage.ColorUnpacked&&t.push(d.VertexAttribute3D.ColorUnpacked()),(e&d.Usage.ColorPacked)===d.Usage.ColorPacked&&t.push(d.VertexAttribute3D.ColorPacked()),(e&d.Usage.Normal)===d.Usage.Normal&&t.push(d.VertexAttribute3D.Normal()),(e&d.Usage.TextureCoordinates)===d.Usage.TextureCoordinates&&t.push(new d.VertexAttribute3D(d.Usage.TextureCoordinates,2,p.GL20.GL_FLOAT,!1,h.Shader.TEXCOORDS+"0")),new v.VertexAttributes(t)}},{key:"transformPosition",value:function(e,t,n,i){n>2?(this.vTmp.set(e[t],e[t+1],e[t+2]).multiply(i),e[t]=this.vTmp.x,e[t+1]=this.vTmp.y,e[t+2]=this.vTmp.z):n>1?(this.vTmp.set(e[t],e[t+1],0).multiply(i),e[t]=this.vTmp.x,e[t+1]=this.vTmp.y):e[t]=this.vTmp.set(e[t],0,0).multiply(i).x}},{key:"transformNormal",value:function(e,t,n,i){n>2?(this.vTmp.set(e[t],e[t+1],e[t+2]).multiplyMat3(i).normalize(),e[t]=this.vTmp.x,e[t+1]=this.vTmp.y,e[t+2]=this.vTmp.z):n>1?(this.vTmp.set(e[t],e[t+1],0).multiplyMat3(i).normalize(),e[t]=this.vTmp.x,e[t+1]=this.vTmp.y):e[t]=this.vTmp.set(e[t],0,0).multiplyMat3(i).normalize().x}}]),e}();t.MeshBuilder=M,M.MAX_VERTICES=65536,M.MAX_INDEX=M.MAX_VERTICES-1,M.vTmp=new f.Vector3,M.indicesMap=null},8128:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ModelBuilder=void 0;var a=n(4995),o=n(8552),u=n(663),l=n(1960),h=n(5413),c=n(3776),f=function(){function e(t){r(this,e),this.gl=t,this.builders=[],this.tmpTransform=new a.Matrix4}return s(e,[{key:"getBuilder",value:function(e){var t,n=i(this.builders);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.getAttributes().equals(e)&&r.getLastIndex()<16383.5)return r}}catch(a){n.e(a)}finally{n.f()}var s=new c.MeshBuilder(this.gl);return s.begin(e),this.builders.push(s),s}},{key:"begin",value:function(){if(this.model)throw new Error("Call end() first");this.node=null,this.model=new u.Model(this.gl),this.builders.length=0}},{key:"end",value:function(){if(!this.model)throw new Error("Call begin() first");var t=this.model;this.endnode(),this.model=null;var n,r=i(this.builders);try{for(r.s();!(n=r.n()).done;){n.value.end()}}catch(s){r.e(s)}finally{r.f()}return this.builders.length=0,e.rebuildReferencesWithModel(t),t}},{key:"createNode",value:function(){var e=new l.Node;return this.addNode(e),e.id="node"+this.model.nodes.length,e}},{key:"addNode",value:function(e){if(!this.model)throw new Error("Call begin() first");return this.endnode(),this.model.nodes.push(e),this.node=e,e}},{key:"endnode",value:function(){this.node&&(this.node=null)}},{key:"manage",value:function(e){if(!this.model)throw new Error("Call begin() first");this.model.manageDisposable(e)}},{key:"partByMeshPart",value:function(e,t){this.node||this.createNode(),this.node.parts.push(new h.NodePart(e,t))}},{key:"createBox",value:function(e,t,n,i,r){return this.begin(),this.part("box",o.GL20.GL_TRIANGLES,r,i).box(e,t,n),this.end()}},{key:"part",value:function(e,t,n,i){var r=this.getBuilder(c.MeshBuilder.createAttributes(n));return this.node||this.createNode(),this.node.parts.push(new h.NodePart(r.part(e,t),i)),r}}],[{key:"rebuildReferencesWithModel",value:function(t){t.materials.length=0,t.meshes.length=0,t.meshParts.length=0;var n,r=i(t.nodes);try{for(r.s();!(n=r.n()).done;){var s=n.value;e.rebuildReferences(t,s)}}catch(a){r.e(a)}finally{r.f()}}},{key:"rebuildReferences",value:function(e,t){var n,r=i(t.parts);try{for(r.s();!(n=r.n()).done;){var s=n.value;e.materials.includes(s.material)||e.materials.push(s.material),e.meshParts.includes(s.meshPart)||(e.meshParts.push(s.meshPart),e.meshes.includes(s.meshPart.mesh)||e.meshes.push(s.meshPart.mesh),e.manageDisposable(s.meshPart.mesh))}}catch(l){r.e(l)}finally{r.f()}var a,o=i(t.getChildren());try{for(o.s();!(a=o.n()).done;){var u=a.value;this.rebuildReferences(e,u)}}catch(l){o.e(l)}finally{o.f()}}}]),e}();t.ModelBuilder=f},2668:function(e,t,n){"use strict";var i=n(7061).default,r=n(6690).default,s=n(9728).default,a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileTextureProvider=void 0;var o=n(7139),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.TextureFilter.Linear,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.TextureFilter.Linear,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.TextureWrap.Repeat,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.TextureWrap.Repeat,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,e),this.minFilter=t,this.magFilter=n,this.uWrap=i,this.vWrap=s,this.useMipMaps=a}return s(e,[{key:"load",value:function(e,t){return a(this,void 0,void 0,i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Texture.load(e,t);case 2:return(r=n.sent).setFilters(this.minFilter,this.magFilter),r.setWraps(this.uWrap,this.vWrap),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n,this)})))}}]),e}();t.FileTextureProvider=u},9131:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VertexBufferObject=void 0;var s=n(8552),a=function(){function e(t,n,r,a){i(this,e),this.gl=t,this.verticesLength=0,this.isDirty=!1,this.isBound=!1,this.bufferHandle=this.gl.createBuffer();var o=new Float32Array(a.vertexSize*r);this.setBuffer(o,!0,a),this.setUsage(n?s.GL20.GL_STATIC_DRAW:s.GL20.GL_DYNAMIC_DRAW)}return r(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"getNumVertices",value:function(){return this.buffer.length/this.attributes.vertexSize}},{key:"getNumMaxVertices",value:function(){return this.buffer.length}},{key:"getBuffer",value:function(){return this.isDirty=!0,this.buffer}},{key:"setBuffer",value:function(e,t,n){if(this.isBound)throw new Error("Cannot change attributes while VBO is bound");this.attributes=n,this.ownsBuffer=t,this.buffer=e}},{key:"bufferChanged",value:function(){this.isBound&&(this.gl.bufferData(s.GL20.GL_ARRAY_BUFFER,this.buffer.subarray(0,this.verticesLength),this.usage),this.isDirty=!1)}},{key:"setVertices",value:function(e,t,n){this.isDirty=!0,this.buffer.set(e.slice(t,t+n),0),this.verticesLength<n&&(this.verticesLength=n),this.bufferChanged()}},{key:"updateVertices",value:function(e,t,n,i){this.isDirty=!0,this.buffer.set(t.slice(n,n+i),e),this.verticesLength=e+i,this.bufferChanged()}},{key:"getUsage",value:function(){return this.usage}},{key:"setUsage",value:function(e){if(this.isBound)throw new Error("Cannot change usage while VBO is bound");this.usage=e}},{key:"bind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.gl.bindBuffer(s.GL20.GL_ARRAY_BUFFER,this.bufferHandle),this.isDirty&&(this.gl.bufferData(s.GL20.GL_ARRAY_BUFFER,this.buffer.subarray(0,this.verticesLength),this.usage),this.isDirty=!1);var n=this.attributes.size();if(t)for(var i=0;i<n;i++){var r=this.attributes.get(i),a=t[i];a<0||(this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,r.numComponents,r.type,r.normalized,this.attributes.vertexSize,r.offset))}else for(var o=0;o<n;o++){var u=this.attributes.get(o),l=e.getAttributeLocation(u.alias);l<0||(this.gl.enableVertexAttribArray(l),this.gl.vertexAttribPointer(l,u.numComponents,u.type,u.normalized,this.attributes.vertexSize,u.offset))}this.isBound=!0}},{key:"unbind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.attributes.size();if(t)for(var i=0;i<n;i++){var r=t[i];r>=0&&this.gl.disableVertexAttribArray(r)}else for(var a=0;a<n;a++){var o=this.attributes.get(a).alias,u=e.getAttributeLocation(o);u>=0&&this.gl.disableVertexAttribArray(u)}this.gl.bindBuffer(s.GL20.GL_ARRAY_BUFFER,null),this.isBound=!1}},{key:"invalidate",value:function(){this.bufferHandle=this.gl.createBuffer(),this.isDirty=!0}},{key:"dispose",value:function(){this.gl.bindBuffer(s.GL20.GL_ARRAY_BUFFER,null),this.gl.deleteBuffer(this.bufferHandle)}}]),e}();t.VertexBufferObject=a},7243:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6506:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VertexInfo=void 0;var s=n(8606),a=n(2283),o=n(7811),u=function(){function e(){i(this,e),this.position=new o.Vector3,this.normal=new o.Vector3(0,1,0),this.color=new s.Color(1,1,1,1),this.uv=new a.Vector2}return r(e,[{key:"reset",value:function(){this.position.set(0,0,0),this.normal.set(0,1,0),this.color.set(1,1,1,1),this.uv.set(0,0)}},{key:"set",value:function(e,t,n,i){return this.reset(),this.hasPosition=!!e,this.hasPosition&&this.position.set(e.x,e.y,e.z),this.hasNormal=!!t,this.hasNormal&&this.normal.set(t.x,t.y,t.z),this.hasColor=!!n,this.hasColor&&this.color.set(n.r,n.g,n.b,n.a),this.hasUV=!!i,this.hasUV&&this.uv.set(i.x,i.y),this}},{key:"setWithVertextInfo",value:function(e){return e?(this.hasPosition=e.hasPosition,this.position.set(e.position.x,e.position.y,e.position.z),this.hasNormal=e.hasNormal,this.normal.set(e.normal.x,e.normal.y,e.normal.z),this.hasColor=e.hasColor,this.color.set(e.color.r,e.color.g,e.color.b,e.color.a),this.hasUV=e.hasUV,this.uv.set(e.uv.x,e.uv.y),this):this.set(null,null,null,null)}},{key:"setPos",value:function(e,t,n){return this.position.set(e,t,n),this.hasPosition=!0,this}},{key:"setNor",value:function(e,t,n){return this.normal.set(e,t,n),this.hasNormal=!0,this}},{key:"setCol",value:function(e,t,n,i){return this.color.set(e,t,n,i),this.hasColor=!0,this}},{key:"setUV",value:function(e,t){return this.uv.set(e,t),this.hasUV=!0,this}},{key:"lerp",value:function(e,t){return this.hasPosition&&e.hasPosition&&this.position.lerp(e.position,t),this.hasNormal&&e.hasNormal&&this.normal.lerp(e.normal,t),this.hasColor&&e.hasColor&&this.color.lerp(e.color,t),this.hasUV&&e.hasUV&&this.uv.lerp(e.uv,t),this}}]),e}();t.VertexInfo=u},3975:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(6425),t),r(n(4644),t),r(n(7083),t),r(n(5223),t),r(n(3776),t),r(n(8128),t),r(n(2668),t),r(n(9131),t),r(n(7243),t),r(n(6506),t)},1981:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Affine2=void 0;var s=n(6239),a=n(4995),o=function(){function e(){i(this,e),this.m00=1,this.m01=0,this.m02=0,this.m10=0,this.m11=1,this.m12=0}return r(e,[{key:"idt",value:function(){return this.m00=1,this.m01=0,this.m02=0,this.m10=0,this.m11=1,this.m12=0,this}},{key:"set",value:function(e){return this.m00=e.m00,this.m01=e.m01,this.m02=e.m02,this.m10=e.m10,this.m11=e.m11,this.m12=e.m12,this}},{key:"setMatrix3",value:function(e){var t=e.val;return this.m00=t[s.Matrix3.M00],this.m01=t[s.Matrix3.M01],this.m02=t[s.Matrix3.M02],this.m10=t[s.Matrix3.M10],this.m11=t[s.Matrix3.M11],this.m12=t[s.Matrix3.M12],this}},{key:"setMatrix4",value:function(e){var t=e.values;return this.m00=t[a.Matrix4.M00],this.m01=t[a.Matrix4.M01],this.m02=t[a.Matrix4.M03],this.m10=t[a.Matrix4.M10],this.m11=t[a.Matrix4.M11],this.m12=t[a.Matrix4.M13],this}},{key:"setToTranslation",value:function(e,t){return this.m00=1,this.m01=0,this.m02=e,this.m10=0,this.m11=1,this.m12=t,this}},{key:"setToScaling",value:function(e,t){return this.m00=e,this.m01=0,this.m02=0,this.m10=0,this.m11=t,this.m12=0,this}},{key:"setToRotation",value:function(e){var t=Math.cos(e*(180/Math.PI)),n=Math.sin(e*(180/Math.PI));return this.m00=t,this.m01=-n,this.m02=0,this.m10=n,this.m11=t,this.m12=0,this}},{key:"setToRotationRad",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.m00=t,this.m01=-n,this.m02=0,this.m10=n,this.m11=t,this.m12=0,this}},{key:"setToShearing",value:function(e,t){return this.m00=1,this.m01=e,this.m02=0,this.m10=t,this.m11=1,this.m12=0,this}},{key:"setToTrnRotScl",value:function(e,t,n,i,r){if(this.m02=e,this.m12=t,0===n)this.m00=i,this.m01=0,this.m10=0,this.m11=r;else{var s=Math.sin(n*(180/Math.PI)),a=Math.cos(n*(180/Math.PI));this.m00=a*i,this.m01=-s*r,this.m10=s*i,this.m11=a*r}return this}},{key:"setToTrnRotRadScl",value:function(e,t,n,i,r){if(this.m02=e,this.m12=t,0===n)this.m00=i,this.m01=0,this.m10=0,this.m11=r;else{var s=Math.sin(n),a=Math.cos(n);this.m00=a*i,this.m01=-s*r,this.m10=s*i,this.m11=a*r}return this}},{key:"setToTrnScl",value:function(e,t,n,i){return this.m00=n,this.m01=0,this.m02=e,this.m10=0,this.m11=i,this.m12=t,this}},{key:"setToProduct",value:function(e,t){return this.m00=e.m00*t.m00+e.m01*t.m10,this.m01=e.m00*t.m01+e.m01*t.m11,this.m02=e.m00*t.m02+e.m01*t.m12+e.m02,this.m10=e.m10*t.m00+e.m11*t.m10,this.m11=e.m10*t.m01+e.m11*t.m11,this.m12=e.m10*t.m02+e.m11*t.m12+e.m12,this}},{key:"inv",value:function(){var e=this.det();if(0===e)throw new Error("Can't invert a singular affine matrix");var t=1/e,n=this.m11,i=-this.m01,r=this.m01*this.m12-this.m11*this.m02,s=-this.m10,a=this.m00,o=this.m10*this.m02-this.m00*this.m12;return this.m00=t*n,this.m01=t*i,this.m02=t*r,this.m10=t*s,this.m11=t*a,this.m12=t*o,this}},{key:"mul",value:function(e){var t=this.m00*e.m00+this.m01*e.m10,n=this.m00*e.m01+this.m01*e.m11,i=this.m00*e.m02+this.m01*e.m12+this.m02,r=this.m10*e.m00+this.m11*e.m10,s=this.m10*e.m01+this.m11*e.m11,a=this.m10*e.m02+this.m11*e.m12+this.m12;return this.m00=t,this.m01=n,this.m02=i,this.m10=r,this.m11=s,this.m12=a,this}},{key:"preMul",value:function(e){var t=e.m00*this.m00+e.m01*this.m10,n=e.m00*this.m01+e.m01*this.m11,i=e.m00*this.m02+e.m01*this.m12+e.m02,r=e.m10*this.m00+e.m11*this.m10,s=e.m10*this.m01+e.m11*this.m11,a=e.m10*this.m02+e.m11*this.m12+e.m12;return this.m00=t,this.m01=n,this.m02=i,this.m10=r,this.m11=s,this.m12=a,this}},{key:"translate",value:function(e,t){return this.m02+=this.m00*e+this.m01*t,this.m12+=this.m10*e+this.m11*t,this}},{key:"preTranslate",value:function(e,t){return this.m02+=e,this.m12+=t,this}},{key:"scale",value:function(e,t){return this.m00*=e,this.m01*=t,this.m10*=e,this.m11*=t,this}},{key:"preScale",value:function(e,t){return this.m00*=e,this.m01*=e,this.m02*=e,this.m10*=t,this.m11*=t,this.m12*=t,this}},{key:"rotate",value:function(e){if(0===e)return this;var t=Math.cos(e*(180/Math.PI)),n=Math.sin(e*(180/Math.PI)),i=this.m00*t+this.m01*n,r=this.m00*-n+this.m01*t,s=this.m10*t+this.m11*n,a=this.m10*-n+this.m11*t;return this.m00=i,this.m01=r,this.m10=s,this.m11=a,this}},{key:"rotateRad",value:function(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e),i=this.m00*t+this.m01*n,r=this.m00*-n+this.m01*t,s=this.m10*t+this.m11*n,a=this.m10*-n+this.m11*t;return this.m00=i,this.m01=r,this.m10=s,this.m11=a,this}},{key:"preRotate",value:function(e){if(0===e)return this;var t=Math.cos(e*(180/Math.PI)),n=Math.sin(e*(180/Math.PI)),i=t*this.m00-n*this.m10,r=t*this.m01-n*this.m11,s=t*this.m02-n*this.m12,a=n*this.m00+t*this.m10,o=n*this.m01+t*this.m11,u=n*this.m02+t*this.m12;return this.m00=i,this.m01=r,this.m02=s,this.m10=a,this.m11=o,this.m12=u,this}},{key:"preRotateRad",value:function(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e),i=t*this.m00-n*this.m10,r=t*this.m01-n*this.m11,s=t*this.m02-n*this.m12,a=n*this.m00+t*this.m10,o=n*this.m01+t*this.m11,u=n*this.m02+t*this.m12;return this.m00=i,this.m01=r,this.m02=s,this.m10=a,this.m11=o,this.m12=u,this}},{key:"shear",value:function(e,t){var n=this.m00+t*this.m01,i=this.m01+e*this.m00;return this.m00=n,this.m01=i,n=this.m10+t*this.m11,i=this.m11+e*this.m10,this.m10=n,this.m11=i,this}},{key:"preShear",value:function(e,t){var n=this.m00+e*this.m10,i=this.m01+e*this.m11,r=this.m02+e*this.m12,s=this.m10+t*this.m00,a=this.m11+t*this.m01,o=this.m12+t*this.m02;return this.m00=n,this.m01=i,this.m02=r,this.m10=s,this.m11=a,this.m12=o,this}},{key:"det",value:function(){return this.m00*this.m11-this.m01*this.m10}},{key:"getTranslation",value:function(e){return e.x=this.m02,e.y=this.m12,e}},{key:"isTranslation",value:function(){return 1===this.m00&&1===this.m11&&0===this.m01&&0===this.m10}},{key:"isIdt",value:function(){return 1===this.m00&&0===this.m02&&0===this.m12&&1===this.m11&&0===this.m01&&0===this.m10}},{key:"applyTo",value:function(e){var t=e.x,n=e.y;e.x=this.m00*t+this.m01*n+this.m02,e.y=this.m10*t+this.m11*n+this.m12}}]),e}();t.Affine2=o},8656:function(e,t,n){"use strict";var i,r=n(4704).default,s=n(6690).default,a=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Animation=t.PlayMode=void 0,function(e){e[e.NORMAL=0]="NORMAL",e[e.LOOP=1]="LOOP",e[e.LOOP_PINGPONG=2]="LOOP_PINGPONG",e[e.REVERSED=3]="REVERSED",e[e.LOOP_REVERSED=4]="LOOP_REVERSED"}(i=t.PlayMode||(t.PlayMode={}));var o=function(){function e(t,n){s(this,e),this.totalDuration=0,this.keyFrames=t,Array.isArray(n)||(n=[n]);for(var i=n[n.length-1]||0;n.length<t.length;)n.push(i);var a,o=r(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;this.totalDuration+=u}}catch(l){o.e(l)}finally{o.f()}this.frameDurations=n}return a(e,[{key:"getFrameNumber",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.frameDurations,i=t?n.length-1:0;!((e-=n[i])<0);)t?i--:i++;return i}},{key:"getKeyFrame",value:function(e,t){var n=this.keyFrames,r=this.frameDurations,s=this.totalDuration,a=Math.floor(e/s),o=e%s,u=0;switch(t){case i.NORMAL:u=0===a?this.getFrameNumber(o):r.length-1;break;case i.LOOP:u=this.getFrameNumber(o);break;case i.LOOP_PINGPONG:u=this.getFrameNumber(o,a%2===1);break;case i.REVERSED:u=0===a?this.getFrameNumber(o,!0):0;break;case i.LOOP_REVERSED:u=this.getFrameNumber(o,!0)}return n[u]}}]),e}();t.Animation=o},2121:function(e,t,n){"use strict";var i=n(861).default,r=n(7061).default,s=n(4704).default,a=n(6690).default,o=n(9728).default,u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AssetManager=void 0;var l=n(7581),h=n(7139),c=n(9396),f=function(){function e(t){a(this,e),this.promises=[],this.atlases=new Map,this.textures=new Map,this.jsonData=new Map,this.binaryData=new Map,this.done=0,this.listeners=[],this.fonts=new Map,this.gl=t}return o(e,[{key:"addListener",value:function(e){this.listeners.push(e)}},{key:"reportDone",value:function(){this.done++;var e,t=s(this.listeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)(this.done/this.getTotal()*100,this.done>=this.getTotal())}}catch(n){t.e(n)}finally{t.f()}}},{key:"loadAtlas",value:function(e,t){var n=this,i=c.TextureAtlas.load(this.gl,e,{}).then((function(e){return n.atlases.set(t,e),n.reportDone(),e}));return this.promises.push(i),i}},{key:"getAtlas",value:function(e){return this.atlases.get(e)}},{key:"loadJsonData",value:function(e,t){var n=this,i=fetch(e).then((function(e){return e.json()})).then((function(e){return n.jsonData.set(t,e),n.reportDone(),e}));return this.promises.push(i),i}},{key:"getJsonData",value:function(e){return this.jsonData.get(e)}},{key:"loadBinaryData",value:function(e,t){var n=this,i=fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return n.binaryData.set(t,e),n.reportDone(),e}));return this.promises.push(i),i}},{key:"getBinaryData",value:function(e){return this.binaryData.get(e)}},{key:"loadFont",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=l.BitmapFont.load(this.gl,e,i).then((function(e){return n.fonts.set(t,e),n.reportDone(),e}));return this.promises.push(r),r}},{key:"getFont",value:function(e){return this.fonts.get(e)}},{key:"loadTexture",value:function(e,t){var n=this,i=h.Texture.load(this.gl,e).then((function(e){return n.textures.set(t,e),n.reportDone(),e}));return this.promises.push(i),i}},{key:"getTexture",value:function(e){return this.textures.get(e)}},{key:"finishLoading",value:function(){return u(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.promises);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getDone",value:function(){return this.done}},{key:"getTotal",value:function(){return this.promises.length}},{key:"disposeAll",value:function(){var e=this;i(this.atlases.keys()).forEach((function(t){e.atlases.get(t).dispose(),e.atlases.delete(t)})),i(this.textures.keys()).forEach((function(t){e.textures.get(t).dispose(),e.textures.delete(t)})),i(this.fonts.keys()).forEach((function(t){e.fonts.get(t).dispose(),e.fonts.delete(t)}))}}]),e}();t.AssetManager=f,t.default=f},7581:function(e,t,n){"use strict";var i=n(7061).default,r=n(6690).default,s=n(9728).default,a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BitmapFont=void 0;var o=n(3959),u=n(2791),l=n(8606),h=function(){function e(t,n,i){var s=this;r(this,e),this.load=function(e){for(var t=Object.values(e.glyphs),n=0;n<t.length;n++){var i=t[n];if(i)for(var r=0;r<i.length;r++){var a=i[r];a&&e.setGlyphRegion(a,s.regions[a.page])}}null!=e.missingGlyph&&e.setGlyphRegion(e.missingGlyph,s.regions[e.missingGlyph.page])},this.draw=function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.Align.left,o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:t.length,c=arguments.length>9?arguments[9]:void 0;s.cache.clear(),s.cache.addText(t,n,i,u,h,r,a,o,c),s.cache.draw(e)},this.getColor=function(){return s.cache.getColor()},this.getScaleX=function(){return s.data.scaleX},this.getScaleY=function(){return s.data.scaleY},this.getRegions=function(){return s.regions},this.getRegion=function(e){return s.regions[e]},this.getLineHeight=function(){return s.data.lineHeight},this.getSpaceXadvance=function(){return s.data.spaceXadvance},this.getXHeight=function(){return s.data.xHeight},this.getCapHeight=function(){return s.data.capHeight},this.getAscent=function(){return s.data.ascent},this.getDescent=function(){return s.data.descent},this.isFlipped=function(){return s.flipped},this.dispose=function(){if(s.ownsTexture)for(var e=0;e<s.regions.length;e++)s.regions[e].texture.dispose()},this.setFixedWidthGlyphs=function(e){for(var t=s.data,n=0,i=0,r=e.length;i<r;i++){var a=t.getGlyph(e.charAt(i));null!=a&&a.xadvance>n&&(n=a.xadvance)}for(var o=0,u=e.length;o<u;o++){var l=t.getGlyph(e.charAt(o));l&&(l.xoffset+=(n-l.xadvance)/2,l.xadvance=n,l.kerning=[],l.kerning=null,l.fixedWidth=!0)}},this.setUseIntegerPositions=function(e){s.integer=e,s.cache.setUseIntegerPositions(e)},this.usesIntegerPositions=function(){return s.integer},this.getCache=function(){return s.cache},this.getData=function(){return s.data},this.getOwnsTexture=function(){return s.ownsTexture},this.setOwnsTexture=function(e){s.ownsTexture=e},this.newFontCache=function(){return new o.BitmapFontCache(s,s.integer)},this.regions=n,this.flipped=t.flipped,this.data=t,this.integer=i,0!==this.regions.length?(this.ownsTexture=!1,this.cache=this.newFontCache(),this.load(t)):console.log("No texture region were found")}return s(e,[{key:"drawTransformed",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.Align.left,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:t.length,u=arguments.length>8?arguments[8]:void 0;this.cache.clear(),this.cache.addText(t,0,0,a,o,i,r,s,u),this.cache.drawTransformed(e,n)}}]),e}();t.BitmapFont=h,h.load=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return a(void 0,void 0,void 0,i().mark((function s(){var a;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=new u.BitmapFontData(t,n),i.next=3,a.loadFont(e);case 3:return i.abrupt("return",new h(a,a.regions,r));case 4:case"end":return i.stop()}}),s)})))}},3959:function(e,t,n){"use strict";var i=n(861).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BitmapFontCache=void 0;var a=n(7712),o=n(9699),u=n(8606),l=n(2283),h=function(){function e(t,n){var s=this;r(this,e),this.tempColor=new u.Color(1,1,1,1),this.drawingTexts=[],this.layouts=[],this.pooledLayouts=[],this.color=new u.Color(1,1,1,1),this.setPosition=function(e,t){s.translate(e-s.x,t-s.y)},this.translate=function(e,t){if(0!==e||0!==t){s.integer&&(e=Math.round(e),t=Math.round(t)),s.x+=e,s.y+=t;for(var n=s.pageVertices,i=0,r=n.length;i<r;i++)for(var a=n[i],o=0,u=s.idx[i];o<u;o+=5)a[o]+=e,a[o+1]+=t}},this.setColors=function(e,t,n,i){for(var r=255<<24|255*n<<16|255*t<<8|255*e,a=o.NumberUtil.intToFloatColor(r),u=0,l=s.pageVertices.length;u<l;u++)for(var h=s.pageVertices[u],c=2,f=s.idx[u];c<f;c+=5)h[c]=a},this.getColor=function(){return s.color},this.setColor=function(e,t,n,i){s.color.set(e,t,n,i)},this.temVec2=new l.Vector2,this.clear=function(){s.x=0,s.y=0,u.Pools.freeAll("GlyphLayout",s.pooledLayouts),s.pooledLayouts.length=0,s.layouts.length=0;for(var e=0,t=s.idx.length;e<t;e++)null!=s.pageGlyphIndices&&(s.pageGlyphIndices[e].length=0),s.idx[e]=0},this.requireGlyphs=function(e){if(1===s.pageVertices.length)s.requirePageGlyphs(0,e.glyphCount);else{for(var t=s.tempGlyphCount,n=0;n<t.length;n++)t[n]=0;for(var i=0,r=e.runs.length;i<r;i++)for(var a=e.runs[i].glyphs,o=a,u=0,l=a.length;u<l;u++)t[o[u].page]++;for(var h=0,c=t.length;h<c;h++)s.requirePageGlyphs(h,t[h])}},this.requirePageGlyphs=function(e,t){var n=s.idx[e]+20*t,i=s.pageVertices[e];if(i){if(i.length<n){var r=new Array(n);u.Utils.arrayCopy(i,0,r,0,s.idx[e]),s.pageVertices[e]=r}}else s.pageVertices[e]=new Array(n)},this.setPageCount=function(e){var t=new Array(e).fill([]);u.Utils.arrayCopy(s.pageVertices,0,t,0,s.pageVertices.length),s.pageVertices=i(t);var n=new Array(e);u.Utils.arrayCopy(s.idx,0,n,0,s.idx.length),s.idx=n;var r=new Array(e),a=0;null!=s.pageGlyphIndices&&(a=s.pageGlyphIndices.length,u.Utils.arrayCopy(s.pageGlyphIndices,0,r,0,s.pageGlyphIndices.length));for(var o=a;o<e;o++)r[o]=[];s.pageGlyphIndices=r,s.tempGlyphCount=new Array(e)},this.addToCache=function(e,t,n){var i=e.runs.length;if(0!==i){s.pageVertices.length<s.font.regions.length&&s.setPageCount(s.font.regions.length),s.layouts.push(e),s.requireGlyphs(e);var r=e.colors,a=0,u=0,l=0,h=0;s.drawingTexts.length=0;for(var c=0;c<i;c++)for(var f=e.runs[c],d=f.glyphs,v=f.xAdvances,p=t+f.x,g=n+f.y,m=0,y=f.glyphs.length;m<y;m++)l++===u&&(h=o.NumberUtil.intToFloatColor(r[++a]),u=++a<r.length?r[a]:-1),p+=v[m],s.drawingTexts.push(d[m].id),s.addGlyph(d[m],p,g,h);s.currentTint=o.NumberUtil.intToFloatColor(-1)}},this.addGlyph=function(e,t,n,i){var r=s.font.data.scaleX,a=s.font.data.scaleY;t+=e.xoffset*r,n+=e.yoffset*a;var o=e.width*r,u=e.height*a,l=e.u,h=e.u2,c=e.v,f=e.v2;s.integer&&(t=Math.round(t),n=Math.round(n),o=Math.round(o),u=Math.round(u));var d=t+o,v=n+u,p=e.page,g=s.idx[p];s.idx[p]+=20,null!=s.pageGlyphIndices&&s.pageGlyphIndices[p].push(s.glyphCount++);var m=s.pageVertices[p];m[g++]=t,m[g++]=n,m[g++]=i,m[g++]=l,m[g++]=c,m[g++]=t,m[g++]=v,m[g++]=i,m[g++]=l,m[g++]=f,m[g++]=d,m[g++]=v,m[g++]=i,m[g++]=h,m[g++]=f,m[g++]=d,m[g++]=n,m[g++]=i,m[g++]=h,m[g]=c},this.setText=function(e,t,n,i,r,a,o,u,l){return s.clear(),s.addText(e,t,n,i,r,a,o,u,l)},this.setTextToCache=function(e,t,n){s.clear(),s.addTextToCache(e,t,n)},this.addText=function(e,t,n,i,r,a,o,l,h){var c=u.Pools.obtain("GlyphLayout");return s.pooledLayouts.push(c),c.setText(s.font,e,i,r,s.color,a,o,l,h),s.addTextToCache(c,t,n),c},this.addTextToCache=function(e,t,n){s.addToCache(e,t,n+s.font.data.ascent)},this.getX=function(){return s.x},this.getY=function(){return s.y},this.getFont=function(){return s.font},this.setUseIntegerPositions=function(e){s.integer=e},this.usesIntegerPositions=function(){return s.integer},this.getVertices=function(e){return s.pageVertices[e]},this.getVertexCount=function(e){return s.idx[e]},this.getLayouts=function(){return s.layouts},this.font=t,this.integer=n;var h=t.regions.length;if(0===h&&console.log("The specified font must contain at least one texture page."),this.pageVertices=new Array(h).fill([]),this.idx=new Array(h),h>1){this.pageGlyphIndices=new Array(h);for(var c=0,f=this.pageGlyphIndices.length;c<f;c++)this.pageGlyphIndices[c]=[]}this.tempGlyphCount=new Array(h),u.Pools.get("GlyphLayout",(function(){return new a.GlyphLayout(t,"",0,0,u.Color.WHITE,0,u.Align.left,!1)}))}return s(e,[{key:"draw",value:function(e){for(var t=this,n=this.font.getRegions(),i=0;i<this.pageVertices.length;i++)if(this.idx[i]>0)for(var r=this.pageVertices[i],s=function(i){var s=20*i,a=n.find((function(e){var n;return e.id===(null===(n=t.drawingTexts)||void 0===n?void 0:n[i])}));a&&a.draw(e,r[0+s],r[1+s],r[10+s]-r[0+s],r[11+s]-r[1+s])},a=0;a<this.idx[i]/20;a++)s(a)}},{key:"drawTransformed",value:function(e,t){for(var n=this,i=this.font.getRegions(),r=0;r<this.pageVertices.length;r++)if(this.idx[r]>0)for(var s=this.pageVertices[r],a=function(r){var a=20*r,o=i.find((function(e){var t;return e.id===(null===(t=n.drawingTexts)||void 0===t?void 0:t[r])}));if(o){t.getTranslation(n.temVec2);var u=Math.sqrt(t.det()),l=s[0+a]*u,h=s[1+a]*u;o.draw(e,l+n.temVec2.x,h+n.temVec2.y,(s[10+a]-s[0+a])*u,(s[11+a]-s[1+a])*u)}},o=0;o<this.idx[r]/20;o++)a(o)}}]),e}();t.BitmapFontCache=h},2791:function(e,t,n){"use strict";var i=n(861).default,r=n(7061).default,s=n(6690).default,a=n(9728).default,o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BitmapFontData=void 0;var u=n(2013),l=n(7139),h=n(859),c=n(8606),f=65535,d=function(){function e(t,n){var i=this;s(this,e),this.capHeight=1,this.blankLineScale=1,this.scaleX=1,this.scaleY=1,this.glyphs={},this.xHeight=1,this.xChars=["x","e","a","o","n","s","r","c","u","m","v","w","z"],this.capChars=["M","N","B","D","C","E","F","K","A","G","H","I","J","L","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.loadFont=function(e){return o(i,void 0,void 0,r().mark((function t(){var n,i,s,a,o,d,p,g,m,y,b,M,x,_,w,k,T,E,L,A,S,C,P,I,R,O,N,F,U,V,D,B,G,z,W,j,H,X,Y,q,Z,K,Q,$,J,ee,te,ne,ie,re,se,ae,oe,ue,le,he,ce,fe,de,ve,pe,ge,me,ye,be,Me;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.imagePaths){t.next=2;break}return t.abrupt("return");case 2:return n=0,t.next=5,fetch(this.fontFile);case 5:return s=t.sent,t.next=8,s.text();case 8:if(i=t.sent,a=i.split(/\r?\n/).map((function(e){return e.trim()})),t.prev=10,"string"===typeof(o=a[n])){t.next=14;break}throw new Error("File is empty.");case 14:if(o=o.substring(o.indexOf("padding=")+8),4===(d=o.substring(0,o.indexOf(" ")).split(",",4)).length){t.next=18;break}throw new Error("Invalid padding.");case 18:if(this.padTop=parseInt(d[0]),this.padRight=parseInt(d[1]),this.padBottom=parseInt(d[2]),this.padLeft=parseInt(d[3]),p=this.padTop+this.padBottom,n++,"string"===typeof(o=a[n])){t.next=27;break}throw new Error("Missing common header.");case 27:if(!((g=o.split(" ",9)).length<3)){t.next=30;break}throw new Error("Invalid common header.");case 30:if(g[1].startsWith("lineHeight=")){t.next=32;break}throw new Error("Missing: lineHeight");case 32:if(this.lineHeight=parseInt(g[1].substring(11)),g[2].startsWith("base=")){t.next=35;break}throw new Error("Missing: base");case 35:if(m=parseInt(g[2].substring(5)),y=1,g.length>=6&&null!=g[5]&&g[5].startsWith("pages="))try{y=Math.max(1,parseInt(g[5].substring(6)))}catch(r){}this.imagePaths=new Array(y),b=[],M=0;case 41:if(!(M<y)){t.next=65;break}if(n++,"string"===typeof(o=a[n])){t.next=46;break}throw new Error("Missing additional page definitions.");case 46:if(!((x=o.match(new RegExp(".*id=(\\d+)")))&&x.length>1)){t.next=57;break}if(_=x[1],t.prev=49,parseInt(_)===M){t.next=53;break}throw new Error("Page IDs must be indices starting at 0: "+_);case 53:t.next=57;break;case 55:t.prev=55,t.t0=t.catch(49);case 57:if((w=o.match(new RegExp('.*file="?([^"]+)"?')))&&!(w.length<=1)){t.next=60;break}throw new Error("Missing: file");case 60:k=w[1],b[M]=k;case 62:M++,t.next=41;break;case 65:this.descent=0;case 66:if(n++,o=a[n]){t.next=71;break}return t.abrupt("break",105);case 71:if(!o.startsWith("kernings ")){t.next=73;break}return t.abrupt("break",105);case 73:if(!o.startsWith("metrics ")){t.next=75;break}return t.abrupt("break",105);case 75:if(o.startsWith("char ")){t.next=77;break}return t.abrupt("continue",66);case 77:if(T=new u.Glyph,(E=new v(o,"=")).nextToken(),E.nextToken(),!((L=parseInt(E.nextToken()))>0&&L>f)){t.next=84;break}return t.abrupt("continue",66);case 84:if(T.id=L+"",E.nextToken(),T.srcX=parseInt(E.nextToken()),E.nextToken(),T.srcY=parseInt(E.nextToken()),E.nextToken(),T.width=parseInt(E.nextToken()),E.nextToken(),T.height=parseInt(E.nextToken()),E.nextToken(),T.xoffset=parseInt(E.nextToken()),E.nextToken(),this.flipped?T.yoffset=parseInt(E.nextToken()):T.yoffset=-(T.height+parseInt(E.nextToken())),E.nextToken(),T.xadvance=parseInt(E.nextToken()),E.hasMoreTokens()&&E.nextToken(),E.hasMoreTokens())try{T.page=parseInt(E.nextToken())}catch(xe){}T.width>0&&T.height>0&&(this.descent=Math.min(m+T.yoffset,this.descent)),L<=0?this.missingGlyph=T:L<=f&&this.setGlyph(L,T),t.next=66;break;case 105:this.descent+=this.padBottom;case 106:if(n++,"string"===typeof(o=a[n])){t.next=111;break}return t.abrupt("break",127);case 111:if(o.startsWith("kerning ")){t.next=113;break}return t.abrupt("break",127);case 113:if((A=new v(o,"=")).nextToken(),A.nextToken(),S=parseInt(A.nextToken()),A.nextToken(),C=parseInt(A.nextToken()),!(S<0||S>f||C<0||C>f)){t.next=121;break}return t.abrupt("continue",106);case 121:P=this.getGlyph(S+""),A.nextToken(),I=parseInt(A.nextToken()),P&&P.setKerning(C,I),t.next=106;break;case 127:R=!1,O=0,N=0,F=0,U=0,V=0,D=0,B=0,null!=o&&o.startsWith("metrics ")&&(R=!0,(G=new v(o,"=")).nextToken(),G.nextToken(),O=parseFloat(G.nextToken()),G.nextToken(),N=parseFloat(G.nextToken()),G.nextToken(),F=parseFloat(G.nextToken()),G.nextToken(),U=parseFloat(G.nextToken()),G.nextToken(),V=parseFloat(G.nextToken()),G.nextToken(),D=parseFloat(G.nextToken()),G.nextToken(),B=parseFloat(G.nextToken())),(z=this.getGlyph("32"))||((z=new u.Glyph).id="32",(W=this.getGlyph("l"))||(W=this.getFirstGlyph()),z.xadvance=W.xadvance,this.setGlyph(32,z)),0===z.width&&(z.width=this.padLeft+z.xadvance+this.padRight,z.xoffset=-this.padLeft),this.spaceXadvance=z.xadvance,H=0;case 141:if(!(H<this.xChars.length)){t.next=148;break}if(!(j=this.getGlyph(this.xChars[H]))){t.next=145;break}return t.abrupt("break",148);case 145:H++,t.next=141;break;case 148:j||(j=this.getFirstGlyph()),this.xHeight=j.height-p,Y=0;case 151:if(!(Y<this.capChars.length)){t.next=158;break}if(!(X=this.getGlyph(this.capChars[Y]))){t.next=155;break}return t.abrupt("break",158);case 155:Y++,t.next=151;break;case 158:if(X){t.next=178;break}q=Object.values(this.glyphs),Z=0;case 161:if(!(Z<q.length)){t.next=176;break}if(K=q[Z]){t.next=165;break}return t.abrupt("continue",173);case 165:Q=0;case 166:if(!(Q<K.length)){t.next=173;break}if(K[Q]&&0!==K[Q].height&&0!==K[Q].width){t.next=169;break}return t.abrupt("continue",170);case 169:this.capHeight=Math.max(this.capHeight,K[Q].height);case 170:Q++,t.next=166;break;case 173:Z++,t.next=161;break;case 176:t.next=179;break;case 178:this.capHeight=X.height;case 179:for(this.capHeight-=p,this.ascent=m-this.capHeight,this.down=-this.lineHeight,this.flipped&&(this.ascent=-this.ascent,this.down=-this.down),R&&(this.ascent=O,this.descent=N,this.down=F,this.capHeight=U,this.lineHeight=V,this.spaceXadvance=D,this.xHeight=B),$=[],J=Object.values(this.glyphs),ee=0;ee<J.length;ee++)for(te=Object.values(J[ee]),ne=0;ne<te.length;ne++)ie={id:te[ne].id,left:te[ne].srcX,top:te[ne].srcY,width:te[ne].width,height:te[ne].height,xoffset:te[ne].xoffset,yoffset:te[ne].yoffset,xadvance:te[ne].xadvance,page:b[te[ne].page],pageId:te[ne].page},$.push(ie);re=[],se=0;case 189:if(!(se<y)){t.next=199;break}return t.next=192,l.Texture.load(e,(0,c.concatAndResolveUrl)(this.fontFile,"../".concat(b[se])));case 192:ae=t.sent,oe=1/ae.width,ue=1/ae.height,re.push({texture:ae,invTexWidth:oe,invTexHeight:ue});case 196:se++,t.next=189;break;case 199:for(this.regions=[],le=0,he=$;le<he.length;le++)ce=he[le],fe=ce.left,de=ce.top,ve=ce.width,pe=ce.height,ge=re[ce.pageId],me=ge.texture,ye=ge.invTexWidth,be=ge.invTexHeight,(Me=new h.TextureRegion(me,fe,de,ve,pe,ce,ye,be)).originalWidth=ve,Me.originalHeight=pe,Me.offsetX=0,Me.offsetY=0,this.regions.push(Me);t.next=206;break;case 203:t.prev=203,t.t1=t.catch(10),console.error(t.t1);case 206:case"end":return t.stop()}}),t,this,[[10,203],[49,55]])})))},this.setGlyphRegion=function(e,t){var n=t.texture,r=1/n.width,s=1/n.height,a=t.u,o=t.v,u=(t.originalWidth,t.originalHeight,e.srcX),l=e.srcX+e.width,h=e.srcY,c=e.srcY+e.height;e.u=a+u*r,e.u2=a+l*r,i.flipped?(e.v=o+h*s,e.v2=o+c*s):(e.v2=o+h*s,e.v=o+c*s)},this.setLineHeight=function(e){i.lineHeight=e*i.scaleY,i.down=i.flipped?i.lineHeight:-i.lineHeight},this.setGlyph=function(e,t){var n=i.glyphs[e/u.PAGE_SIZE];n||(n=new Array(u.PAGE_SIZE),i.glyphs[e/u.PAGE_SIZE]=n),n[e&u.PAGE_SIZE-1]=t},this.getFirstGlyph=function(){for(var e=Object.values(i.glyphs),t=0;t<e.length;t++){var n=e[t];if(n)for(var r=0;r<n.length;r++){var s=n[r];if(s&&0!==s.height&&0!==s.width)return s}}},this.hasGlyph=function(e){return!!i.missingGlyph||null!=i.getGlyph(e)},this.getGlyph=function(e){var t=i.glyphs[e.charCodeAt(0)/u.PAGE_SIZE];if(null!=t)return t[e.charCodeAt(0)&u.PAGE_SIZE-1]},this.getGlyphs=function(e,t,n,r,s){if(0!==r-n){var a=i.markupEnabled,o=i.scaleX,u=e.glyphs,l=e.xAdvances;do{var h=t.charAt(n++);if("\r"!==h){var c=i.getGlyph(h);if(!c){if(!i.missingGlyph)continue;c=i.missingGlyph}u.push(c),l.push(s?(s.xadvance+s.getKerning(h))*o:c.fixedWidth?0:-c.xoffset*o-i.padLeft),s=c,a&&"["===h&&n<r&&"["===t.charAt(n)&&n++}}while(n<r);if(s){var f=s.fixedWidth?s.xadvance*o:(s.width+s.xoffset)*o-i.padRight;l.push(f)}}},this.getWrapIndex=function(e,t){var n=t-1,r=e,s=r[n].id;if(i.isWhitespace(s+""))return n;for(i.isBreakChar(s+"")&&n--;n>0;n--)if(s=r[n].id,i.isWhitespace(s+"")||i.isBreakChar(s+""))return n+1;return 0},this.isBreakChar=function(e){if(!i.breakChars)return!1;for(var t=String.fromCharCode(parseInt(e)),n=0;n<i.breakChars.length;n++)if(t===i.breakChars[n])return!0;return!1},this.isWhitespace=function(e){switch(String.fromCharCode(parseInt(e))){case"\n":case"\r":case"\t":case" ":return!0;default:return!1}},this.getImagePath=function(e){return i.imagePaths[e]},this.getImagePaths=function(){return i.imagePaths},this.setScale=function(e,t){if(0!==e&&0!==t){var n=e/i.scaleX,r=t/i.scaleY;i.lineHeight*=r,i.spaceXadvance*=n,i.xHeight*=r,i.capHeight*=r,i.ascent*=r,i.descent*=r,i.down*=r,i.padLeft*=n,i.padRight*=n,i.padTop*=r,i.padBottom*=r,i.scaleX=e,i.scaleY=t}},this.scale=function(e){i.setScale(i.scaleX+e,i.scaleY+e)},this.fontFile=t,this.flipped=n}return a(e,[{key:"setXYScale",value:function(e){this.setScale(e,e)}}]),e}();t.BitmapFontData=d;var v=function(){function e(t,n){s(this,e),this.strArray=[],this.currentIndex=0;for(var r=t.split(/\s+/),a=0;a<r.length;a++){var o,u=r[a];(o=this.strArray).push.apply(o,i(u.split(n)))}}return a(e,[{key:"hasMoreTokens",value:function(){return this.currentIndex>=this.strArray.length}},{key:"nextToken",value:function(){return this.strArray[this.currentIndex++]}}]),e}()},5477:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BoundingBox=void 0;var a=n(7811),o=function(){function e(){r(this,e),this.min=new a.Vector3,this.max=new a.Vector3,this.cnt=new a.Vector3,this.dim=new a.Vector3,this.clr()}return s(e,[{key:"getCenter",value:function(e){return e.setFrom(this.cnt)}},{key:"getCenterX",value:function(){return this.cnt.x}},{key:"getCenterY",value:function(){return this.cnt.y}},{key:"getCenterZ",value:function(){return this.cnt.z}},{key:"getCorner000",value:function(e){return e.set(this.min.x,this.min.y,this.min.z)}},{key:"getCorner001",value:function(e){return e.set(this.min.x,this.min.y,this.max.z)}},{key:"getCorner010",value:function(e){return e.set(this.min.x,this.max.y,this.min.z)}},{key:"getCorner011",value:function(e){return e.set(this.min.x,this.max.y,this.max.z)}},{key:"getCorner100",value:function(e){return e.set(this.max.x,this.min.y,this.min.z)}},{key:"getCorner101",value:function(e){return e.set(this.max.x,this.min.y,this.max.z)}},{key:"getCorner110",value:function(e){return e.set(this.max.x,this.max.y,this.min.z)}},{key:"getCorner111",value:function(e){return e.set(this.max.x,this.max.y,this.max.z)}},{key:"getDimensions",value:function(e){return e.setFrom(this.dim)}},{key:"getWidth",value:function(){return this.dim.x}},{key:"getHeight",value:function(){return this.dim.y}},{key:"getDepth",value:function(){return this.dim.z}},{key:"getMin",value:function(e){return e.setFrom(this.min)}},{key:"getMax",value:function(e){return e.setFrom(this.max)}},{key:"setFromBounds",value:function(e){return this.set(e.min,e.max)}},{key:"set",value:function(e,t){return this.min.set(e.x<t.x?e.x:t.x,e.y<t.y?e.y:t.y,e.z<t.z?e.z:t.z),this.max.set(e.x>t.x?e.x:t.x,e.y>t.y?e.y:t.y,e.z>t.z?e.z:t.z),this.update(),this}},{key:"update",value:function(){this.cnt.setFrom(this.min).add(this.max).scale(.5),this.dim.setFrom(this.max).sub(this.min)}},{key:"setFromPoints",value:function(e){this.inf();var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.extPoint(r)}}catch(s){n.e(s)}finally{n.f()}return this}},{key:"inf",value:function(){return this.min.set(1/0,1/0,1/0),this.max.set(-1/0,-1/0,-1/0),this.cnt.set(0,0,0),this.dim.set(0,0,0),this}},{key:"extPoint",value:function(e){return this.set(this.min.set(Math.min(this.min.x,e.x),Math.min(this.min.y,e.y),Math.min(this.min.z,e.z)),this.max.set(Math.max(this.max.x,e.x),Math.max(this.max.y,e.y),Math.max(this.max.z,e.z)))}},{key:"clr",value:function(){return this.set(this.min.set(0,0,0),this.max.set(0,0,0))}},{key:"isValid",value:function(){return this.min.x<=this.max.x&&this.min.y<=this.max.y&&this.min.z<=this.max.z}},{key:"extBounds",value:function(e){return this.set(this.min.set(Math.min(this.min.x,e.min.x),Math.min(this.min.y,e.min.y),Math.min(this.min.z,e.min.z)),this.max.set(Math.max(this.max.x,e.max.x),Math.max(this.max.y,e.max.y),Math.max(this.max.z,e.max.z)))}},{key:"extSphere",value:function(e,t){return this.set(this.min.set(Math.min(this.min.x,e.x-t),Math.min(this.min.y,e.y-t),Math.min(this.min.z,e.z-t)),this.max.set(Math.max(this.max.x,e.x+t),Math.max(this.max.y,e.y+t),Math.max(this.max.z,e.z+t)))}},{key:"extTransformedBox",value:function(t,n){return this.extPoint(e.tmpVector.set(t.min.x,t.min.y,t.min.z).multiply(n)),this.extPoint(e.tmpVector.set(t.min.x,t.min.y,t.max.z).multiply(n)),this.extPoint(e.tmpVector.set(t.min.x,t.max.y,t.min.z).multiply(n)),this.extPoint(e.tmpVector.set(t.min.x,t.max.y,t.max.z).multiply(n)),this.extPoint(e.tmpVector.set(t.max.x,t.min.y,t.min.z).multiply(n)),this.extPoint(e.tmpVector.set(t.max.x,t.min.y,t.max.z).multiply(n)),this.extPoint(e.tmpVector.set(t.max.x,t.max.y,t.min.z).multiply(n)),this.extPoint(e.tmpVector.set(t.max.x,t.max.y,t.max.z).multiply(n)),this}},{key:"mul",value:function(t){var n=this.min.x,i=this.min.y,r=this.min.z,s=this.max.x,a=this.max.y,o=this.max.z;return this.inf(),this.extPoint(e.tmpVector.set(n,i,r).multiply(t)),this.extPoint(e.tmpVector.set(n,i,o).multiply(t)),this.extPoint(e.tmpVector.set(n,a,r).multiply(t)),this.extPoint(e.tmpVector.set(n,a,o).multiply(t)),this.extPoint(e.tmpVector.set(s,i,r).multiply(t)),this.extPoint(e.tmpVector.set(s,i,o).multiply(t)),this.extPoint(e.tmpVector.set(s,a,r).multiply(t)),this.extPoint(e.tmpVector.set(s,a,o).multiply(t)),this}},{key:"containsBounds",value:function(e){return!this.isValid()||this.min.x<=e.min.x&&this.min.y<=e.min.y&&this.min.z<=e.min.z&&this.max.x>=e.max.x&&this.max.y>=e.max.y&&this.max.z>=e.max.z}},{key:"intersects",value:function(e){if(!this.isValid())return!1;var t=Math.abs(this.cnt.x-e.cnt.x),n=this.dim.x/2+e.dim.x/2,i=Math.abs(this.cnt.y-e.cnt.y),r=this.dim.y/2+e.dim.y/2,s=Math.abs(this.cnt.z-e.cnt.z),a=this.dim.z/2+e.dim.z/2;return t<=n&&i<=r&&s<=a}},{key:"containsPoint",value:function(e){return this.min.x<=e.x&&this.max.x>=e.x&&this.min.y<=e.y&&this.max.y>=e.y&&this.min.z<=e.z&&this.max.z>=e.z}},{key:"ext",value:function(e,t,n){return this.set(this.min.set(Math.min(this.min.x,e),Math.min(this.min.y,t),Math.min(this.min.z,n)),this.max.set(Math.max(this.max.x,e),Math.max(this.max.y,t),Math.max(this.max.z,n)))}}]),e}();t.BoundingBox=o,o.tmpVector=new a.Vector3},7459:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.OrthoCamera=void 0;var s=n(4995),a=n(7811),o=function(){function e(t,n,r,o){i(this,e),this.position=new a.Vector3(0,0,0),this.direction=new a.Vector3(0,0,-1),this.up=new a.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new s.Matrix4,this.inverseProjectionView=new s.Matrix4,this.projection=new s.Matrix4,this.view=new s.Matrix4,this.yDown=!1,this.tmp3=new a.Vector3,this.resize(t,n,r,o)}return r(e,[{key:"getYDown",value:function(){return this.yDown}},{key:"setYDown",value:function(e){this.yDown=e,e?(this.up.set(0,-1,0),this.direction.set(0,0,1)):(this.up.set(0,1,0),this.direction.set(0,0,-1)),this.update()}},{key:"resize",value:function(e,t,n,i){this.viewportWidth=e,this.viewportHeight=t,this.screenWidth=n,this.screenHeight=i,this.update()}},{key:"setPosition",value:function(e,t){this.position.set(e,t,this.position.z)}},{key:"update",value:function(){var e=this.projection,t=this.view,n=this.projectionView,i=this.inverseProjectionView,r=this.zoom,s=this.viewportWidth,a=this.viewportHeight;e.ortho(r*(-s/2),r*(s/2),r*(-a/2),r*(a/2),this.near,this.far),t.lookAt(this.position,this.direction,this.up),n.set(e.values),n.multiply(t),i.set(n.values).invert(),this.combined=n.values}},{key:"screenToWorld",value:function(e,t,n){t=t||this.screenWidth,n=n||this.screenHeight;var i=e.x,r=n-e.y-1;return e.x=2*i/t-1,e.y=2*r/n-1,e.z=2*e.z-1,e.project(this.inverseProjectionView),e}},{key:"worldToScreen",value:function(e,t,n){return t=t||this.screenWidth,n=n||this.screenHeight,e.project(this.projectionView),e.x=t*(e.x+1)/2,e.y=n*(e.y+1)/2,e.z=(e.z+1)/2,e}},{key:"unprojectVector2",value:function(e,t){this.tmp3.set(t.x,t.y,0),this.screenToWorld(this.tmp3),e.set(this.tmp3.x,this.tmp3.y)}},{key:"setViewport",value:function(e,t){this.viewportWidth=e,this.viewportHeight=t}}]),e}();t.OrthoCamera=o},6176:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var s=function(){function e(){i(this,e)}return r(e,[{key:"setScreen",value:function(e){this.currentScreen&&this.currentScreen.dispose&&this.currentScreen.dispose(),this.currentScreen=e,this.currentScreen&&this.currentScreen.init&&this.currentScreen.init(this)}},{key:"update",value:function(e){this.currentScreen&&this.currentScreen.update&&this.currentScreen.update(e,this)}}]),e}();t.Game=s,s.shared=new s},2013:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Glyph=t.PAGES=t.PAGE_SIZE=t.LOG2_PAGE_SIZE=void 0,t.LOG2_PAGE_SIZE=9,t.PAGE_SIZE=1<<t.LOG2_PAGE_SIZE,t.PAGES=65536/t.PAGE_SIZE;var s=function(){function e(){i(this,e),this.page=0}return r(e,[{key:"getKerning",value:function(e){if(this.kerning){var n=this.kerning[e.charCodeAt(0)>>>t.LOG2_PAGE_SIZE];if(null!=n)return n[e.charCodeAt(0)&t.PAGE_SIZE-1]}return 0}},{key:"setKerning",value:function(e,n){this.kerning||(this.kerning=[]);var i=this.kerning[e>>>t.LOG2_PAGE_SIZE];i||(this.kerning[e>>>t.LOG2_PAGE_SIZE]=i=new Uint32Array(new ArrayBuffer(t.PAGE_SIZE))),i[(e&t.PAGE_SIZE)-1]=n}}]),e}();t.Glyph=s},7712:function(e,t,n){"use strict";var i=n(861).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphLayout=void 0;var a=n(9045),o=n(8606),u=function(){function e(t,n){var s=this,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(null===n||void 0===n?void 0:n.length)||0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.Color.WHITE,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o.Align.left,d=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],v=arguments.length>8?arguments[8]:void 0;r(this,e),this.epsilon=1e-4,this.glyphRunPool=o.Pools.get("GlyphRun",(function(){return new a.GlyphRun})),this.colorStack=new Array(4),this.runs=[],this.colors=[],this.setText=function(e,t,n,i,r,a,o,u,l){s.reset();var h=e.data;if(n!==i){u&&(a=Math.max(a,3*h.spaceXadvance));var c=u||null!=l,f=r.toIntBits(),d=f;s.colors.shift();var v=h.markupEnabled;v&&s.colorStack.push(f);for(var p=!1,g=0,m=h.down,y=null,b=null,M=n;;){var x=void 0,_=!1;if(n===i){if(M===i)break;x=i,p=!0}else{if("\n"!==t.charAt(n++))continue;x=n-1,_=!0}e:{var w=s.glyphRunPool.obtain();if(w.x=0,w.y=g,h.getGlyphs(w,t,M,x,b),s.glyphCount+=w.glyphs.length,d!==f&&(s.colors[s.colors.length-2]===s.glyphCount?s.colors[s.colors.length-1]=d:(s.colors.push(s.glyphCount),s.colors.push(d)),f=d),0===w.glyphs.length){if(s.glyphRunPool.free(w),!y)break e}else y?(y.appendRun(w),s.glyphRunPool.free(w)):(y=w,s.runs.push(y));if(_||p?(s.setLastGlyphXAdvance(h,y),b=null):b=y.glyphs[y.glyphs.length-1],c&&0!==y.glyphs.length&&(_||p))for(var k=y.xAdvances[0]+y.xAdvances[1],T=2;T<y.xAdvances.length;T++){var E=y.glyphs[T-1];if(k+s.getGlyphWidth(E,h)-s.epsilon<=a)k+=y.xAdvances[T];else{if(null!=l){s.truncate(h,y,a,l);break}var L=h.getWrapIndex(y.glyphs,T);if((0===L&&0===y.x||L>=y.glyphs.length)&&(L=T-1),!(y=s.wrap(h,y,L)))break e;s.runs.push(y),g+=m,y.x=0,y.y=g,k=y.xAdvances[0]+y.xAdvances[1],T=1}}}_&&(y=null,b=null,g+=x===M?m*h.blankLineScale:m),M=n}s.height=h.capHeight+Math.abs(g),s.calculateWidths(h),s.alignRuns(a,o),v&&(s.colorStack.length=0)}else s.height=h.capHeight},this.calculateWidths=function(e){for(var t,n=0,r=i(s.runs),a=0,o=s.runs.length;a<o;a++){for(var u=r[a],l=u.xAdvances,h=u.x+l[0],c=0,f=u.glyphs,d=0;d<u.glyphs.length;){var v=f[d],p=s.getGlyphWidth(v,e);c=Math.max(c,h+p),h+=null!==(t=l[++d])&&void 0!==t?t:0}u.width=Math.max(h,c)-u.x,n=Math.max(n,u.x+(isNaN(u.width)?h:u.width))}s.width=n},this.alignRuns=function(e,t){if(0===(t&o.Align.left))for(var n=0!==(t&o.Align.center),r=i(s.runs),a=0,u=s.runs.length;a<u;a++){var l=r[a];l.x+=n?.5*(e-l.width):e-l.width}},this.truncate=function(e,t,n,i){var r=t.glyphs.length,a=s.glyphRunPool.obtain();e.getGlyphs(a,i,0,i.length,null);var u=0;if(a.xAdvances.length>0){s.setLastGlyphXAdvance(e,a);for(var l=a.xAdvances,h=1;h<a.xAdvances.length;h++)u+=l[h]}n-=u;for(var c=0,f=t.x,d=t.xAdvances;c<t.xAdvances.length;){if((f+=d[c])>n)break;c++}if(c>1){if(c-1>=0&&t.glyphs.length>c-1)for(var v=c-1;v<t.glyphs.length;v++)t.glyphs.splice(v,1);if(c>=0&&t.xAdvances.length>c)for(var p=c;p<t.xAdvances.length;p++)t.xAdvances.splice(p,1);s.setLastGlyphXAdvance(e,t),a.xAdvances.length>0&&o.Utils.arrayCopy(a.xAdvances,1,t.xAdvances,t.xAdvances.length,a.xAdvances.length-1)}else t.glyphs.length=0,t.xAdvances.length=0,o.Utils.arrayCopy(a.xAdvances,0,t.xAdvances,t.xAdvances.length,a.xAdvances.length);var g=r-t.glyphs.length;if(g>0&&(s.glyphCount-=g,e.markupEnabled))for(;s.colors.length>2&&s.colors[s.colors.length-2]>=s.glyphCount;)s.colors.length-=2;o.Utils.arrayCopy(a.glyphs,0,t.glyphs,t.glyphs.length,a.glyphs.length),s.glyphCount+=i.length,s.glyphRunPool.free(a)},this.setLastGlyphXAdvance=function(e,t){var n=t.glyphs[t.glyphs.length-1];n.fixedWidth||(t.xAdvances[t.xAdvances.length-1]=s.getGlyphWidth(n,e))},this.getGlyphWidth=function(e,t){return(e.width+e.xoffset)*t.scaleX-t.padRight},this.getLineOffset=function(e,t){return-e[0].xoffset*t.scaleX-t.padLeft},this.reset=function(){s.glyphRunPool.freeAll(s.runs),s.runs.length=0,s.colors.length=0,s.glyphCount=0,s.width=0,s.height=0},t&&n&&this.setText(t,n,u,l,h,c,f,d,v)}return s(e,[{key:"wrap",value:function(e,t,n){for(var i=t.glyphs.length,r=t.glyphs,s=t.xAdvances,a=n;a>0&&e.isWhitespace(r[a-1].id);a--);for(var u,l=n;l<i&&e.isWhitespace(r[l].id);l++);if(l<i){var h=(u=this.glyphRunPool.obtain()).glyphs;o.Utils.arrayCopy(r,0,h,h.length,a),r.splice(0,l-1+1),t.glyphs=h,u.glyphs=r;var c=u.xAdvances;o.Utils.arrayCopy(s,0,c,c.length,a+1),s.splice(1,l),s[0]=this.getLineOffset(r,e),t.xAdvances=c,u.xAdvances=s;var f=t.glyphs.length,d=u.glyphs.length,v=i-f-d;if(this.glyphCount-=v,e.markupEnabled&&v>0)for(var p=this.glyphCount-d,g=this.colors.length-2;g>=2;g-=2){var m=this.colors[g];if(m<=p)break;this.colors[g]=m-v}}else{r=r.slice(0,a),s=s.slice(0,a+1);var y=l-a;if(y>0&&(this.glyphCount-=y,e.markupEnabled&&this.colors[this.colors.length-2]>this.glyphCount)){for(var b=this.colors[this.colors.length-1];this.colors[this.colors.length-2]>this.glyphCount;)this.colors.length-=2;this.colors[this.colors.length-2]=this.glyphCount,this.colors[this.colors.length-1]=b}}return 0===a?(this.glyphRunPool.free(t),this.runs.pop()):this.setLastGlyphXAdvance(e,t),u}}]),e}();t.GlyphLayout=u},9045:function(e,t,n){"use strict";var i=n(9728).default,r=n(6690).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphRun=void 0;var s=i((function e(){var t=this;r(this,e),this.glyphs=[],this.xAdvances=[],this.appendRun=function(e){t.glyphs.concat(e.glyphs),t.xAdvances.length||t.xAdvances.length--,t.xAdvances.concat(e.xAdvances)},this.reset=function(){t.glyphs.length=0,t.xAdvances.length=0}}));t.GlyphRun=s},6964:function(e,t,n){"use strict";var i,r=n(4704).default,s=n(6690).default,a=n(9728).default,o=n(8416).default;Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.InputEvent=void 0;var u,l=n(8041),h=n(2283);!function(e){e.TouchStart="touchStart",e.TouchEnd="touchEnd",e.TouchMove="touchMove"}(u=t.InputEvent||(t.InputEvent={}));var c=(o(i={},u.TouchStart,"mousedown"),o(i,u.TouchEnd,"mouseup"),o(i,u.TouchMove,"mousemove"),i),f=function(e,t){var n=new MouseEvent(c[e],{clientX:t.x,clientY:t.y});return n.id=t.id,n},d=function(){function e(t){var n=this;s(this,e),this.screenCoord=new h.Vector2,this.worldCoord=new h.Vector2,this.canvas=t,this.lastX=0,this.lastY=0,this.touched=!1,this.touches=[];var i=this.emitter=new l.EventEmitter;this.mouseDownHandler=function(e){n.touched=!0,n.handleMove(e),i.emit(u.TouchStart,n.getX(),n.getY())},this.mouseUpHandler=function(e){n.touched=!1,i.emit(u.TouchEnd,n.getX(),n.getY())},this.mouseMoveHandler=function(e){n.handleMove(e),i.emit(u.TouchMove,n.getX(),n.getY())},this.touchStartHandler=function(e){e.preventDefault();var t,i=r(e.changedTouches);try{for(i.s();!(t=i.n()).done;){var s=t.value,a={x:s.clientX,y:s.clientY,id:s.identifier};n.touches.push(a);var o=f(u.TouchStart,a);n.canvas.dispatchEvent(o)}}catch(l){i.e(l)}finally{i.f()}},this.touchEndHandler=function(e){e.preventDefault();var t,i=r(e.changedTouches);try{var s=function(){var e=t.value,i=n.touches.find((function(t){return t.id===e.identifier}));if(!i)return"continue";var r=f(u.TouchEnd,i);n.canvas.dispatchEvent(r);var s=n.touches.indexOf(i);n.touches.splice(s,1)};for(i.s();!(t=i.n()).done;)s()}catch(a){i.e(a)}finally{i.f()}},this.touchMoveHandler=function(e){e.preventDefault();var t,i=r(e.changedTouches);try{for(i.s();!(t=i.n()).done;){var s,a=t.value,o=r(n.touches);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l.id===a.identifier){l.x=a.clientX,l.y=a.clientY;var h=f(u.TouchMove,l);n.canvas.dispatchEvent(h);break}}}catch(c){o.e(c)}finally{o.f()}}}catch(c){i.e(c)}finally{i.f()}},this.canvas.addEventListener("mousedown",this.mouseDownHandler,!1),this.canvas.addEventListener("mouseup",this.mouseUpHandler,!1),this.canvas.addEventListener("mousemove",this.mouseMoveHandler,!1),this.canvas.addEventListener("touchstart",this.touchStartHandler,!1),this.canvas.addEventListener("touchend",this.touchEndHandler,!1),this.canvas.addEventListener("touchmove",this.touchMoveHandler,!1)}return a(e,[{key:"cleanup",value:function(){this.canvas.removeEventListener("mousedown",this.mouseDownHandler),this.canvas.removeEventListener("mouseup",this.mouseUpHandler),this.canvas.removeEventListener("mousemove",this.mouseMoveHandler),this.canvas.removeEventListener("touchstart",this.touchStartHandler),this.canvas.removeEventListener("touchend",this.touchEndHandler),this.canvas.removeEventListener("touchmove",this.touchMoveHandler)}},{key:"addEventListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"handleMove",value:function(e){var t=this.canvas.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;this.lastX=n,this.lastY=i}},{key:"getX",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.canvas.getBoundingClientRect(),i=null===(e=this.touches[t])||void 0===e?void 0:e.x;return void 0===i?this.lastX:i-n.left}},{key:"getY",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.canvas.getBoundingClientRect(),i=null===(e=this.touches[t])||void 0===e?void 0:e.y;return void 0===i?this.lastY:i-n.top}},{key:"isTouched",value:function(){return this.touches.length>0||this.touched}},{key:"getTouchedWorldCoord",value:function(e){return this.screenCoord.set(this.getX(),this.getY()),e.unprojectVector2(this.worldCoord,this.screenCoord),this.worldCoord}}]),e}();t.InputHandler=d},6239:function(e,t,n){"use strict";var i=n(4704).default,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix3=void 0;var a=n(4995),o=n(8606),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.val=new Array(9),this.tmp=new Array(9),t?this.setByMatrix3(t):this.idt()}return s(e,[{key:"idt",value:function(){var t=this.val;return t[e.M00]=1,t[e.M10]=0,t[e.M20]=0,t[e.M01]=0,t[e.M11]=1,t[e.M21]=0,t[e.M02]=0,t[e.M12]=0,t[e.M22]=1,this}},{key:"mulWithMatrix3",value:function(t){var n=this.val,i=n[e.M00]*t.val[e.M00]+n[e.M01]*t.val[e.M10]+n[e.M02]*t.val[e.M20],r=n[e.M00]*t.val[e.M01]+n[e.M01]*t.val[e.M11]+n[e.M02]*t.val[e.M21],s=n[e.M00]*t.val[e.M02]+n[e.M01]*t.val[e.M12]+n[e.M02]*t.val[e.M22],a=n[e.M10]*t.val[e.M00]+n[e.M11]*t.val[e.M10]+n[e.M12]*t.val[e.M20],o=n[e.M10]*t.val[e.M01]+n[e.M11]*t.val[e.M11]+n[e.M12]*t.val[e.M21],u=n[e.M10]*t.val[e.M02]+n[e.M11]*t.val[e.M12]+n[e.M12]*t.val[e.M22],l=n[e.M20]*t.val[e.M00]+n[e.M21]*t.val[e.M10]+n[e.M22]*t.val[e.M20],h=n[e.M20]*t.val[e.M01]+n[e.M21]*t.val[e.M11]+n[e.M22]*t.val[e.M21],c=n[e.M20]*t.val[e.M02]+n[e.M21]*t.val[e.M12]+n[e.M22]*t.val[e.M22];return n[e.M00]=i,n[e.M10]=a,n[e.M20]=l,n[e.M01]=r,n[e.M11]=o,n[e.M21]=h,n[e.M02]=s,n[e.M12]=u,n[e.M22]=c,this}},{key:"mulLeft",value:function(t){var n=this.val,i=t.val[e.M00]*n[e.M00]+t.val[e.M01]*n[e.M10]+t.val[e.M02]*n[e.M20],r=t.val[e.M00]*n[e.M01]+t.val[e.M01]*n[e.M11]+t.val[e.M02]*n[e.M21],s=t.val[e.M00]*n[e.M02]+t.val[e.M01]*n[e.M12]+t.val[e.M02]*n[e.M22],a=t.val[e.M10]*n[e.M00]+t.val[e.M11]*n[e.M10]+t.val[e.M12]*n[e.M20],o=t.val[e.M10]*n[e.M01]+t.val[e.M11]*n[e.M11]+t.val[e.M12]*n[e.M21],u=t.val[e.M10]*n[e.M02]+t.val[e.M11]*n[e.M12]+t.val[e.M12]*n[e.M22],l=t.val[e.M20]*n[e.M00]+t.val[e.M21]*n[e.M10]+t.val[e.M22]*n[e.M20],h=t.val[e.M20]*n[e.M01]+t.val[e.M21]*n[e.M11]+t.val[e.M22]*n[e.M21],c=t.val[e.M20]*n[e.M02]+t.val[e.M21]*n[e.M12]+t.val[e.M22]*n[e.M22];return n[e.M00]=i,n[e.M10]=a,n[e.M20]=l,n[e.M01]=r,n[e.M11]=o,n[e.M21]=h,n[e.M02]=s,n[e.M12]=u,n[e.M22]=c,this}},{key:"setToRotation",value:function(e){return this.setToRotationRad(o.MathUtils.degreesToRadians*e)}},{key:"setToRotationRad",value:function(t){var n=Math.cos(t),i=Math.sin(t),r=this.val;return r[e.M00]=n,r[e.M10]=i,r[e.M20]=0,r[e.M01]=-i,r[e.M11]=n,r[e.M21]=0,r[e.M02]=0,r[e.M12]=0,r[e.M22]=1,this}},{key:"setToRotationWithAxis",value:function(t,n){var i=Math.cos(n),r=Math.sin(n),s=this.val,a=1-i;return s[e.M00]=a*t.x*t.x+i,s[e.M01]=a*t.x*t.y-t.z*r,s[e.M02]=a*t.z*t.x+t.y*r,s[e.M10]=a*t.x*t.y+t.z*r,s[e.M11]=a*t.y*t.y+i,s[e.M12]=a*t.y*t.z-t.x*r,s[e.M20]=a*t.z*t.x-t.y*r,s[e.M21]=a*t.y*t.z+t.x*r,s[e.M22]=a*t.z*t.z+i,this}},{key:"setToTranslation",value:function(t,n){var i=this.val;return i[e.M00]=1,i[e.M10]=0,i[e.M20]=0,i[e.M01]=0,i[e.M11]=1,i[e.M21]=0,i[e.M02]=t,i[e.M12]=n,i[e.M22]=1,this}},{key:"setToScaling",value:function(t,n){var i=this.val;return i[e.M00]=t,i[e.M10]=0,i[e.M20]=0,i[e.M01]=0,i[e.M11]=n,i[e.M21]=0,i[e.M02]=0,i[e.M12]=0,i[e.M22]=1,this}},{key:"toString",value:function(){var t=this.val;return"["+t[e.M00]+"|"+t[e.M01]+"|"+t[e.M02]+"]\n["+t[e.M10]+"|"+t[e.M11]+"|"+t[e.M12]+"]\n["+t[e.M20]+"|"+t[e.M21]+"|"+t[e.M22]+"]"}},{key:"det",value:function(){var t=this.val;return t[e.M00]*t[e.M11]*t[e.M22]+t[e.M01]*t[e.M12]*t[e.M20]+t[e.M02]*t[e.M10]*t[e.M21]-t[e.M00]*t[e.M12]*t[e.M21]-t[e.M01]*t[e.M10]*t[e.M22]-t[e.M02]*t[e.M11]*t[e.M20]}},{key:"inv",value:function(){var t=this.det();if(0===t)throw new Error("Can't invert a singular matrix");var n=1/t,i=this.tmp,r=this.val;return i[e.M00]=r[e.M11]*r[e.M22]-r[e.M21]*r[e.M12],i[e.M10]=r[e.M20]*r[e.M12]-r[e.M10]*r[e.M22],i[e.M20]=r[e.M10]*r[e.M21]-r[e.M20]*r[e.M11],i[e.M01]=r[e.M21]*r[e.M02]-r[e.M01]*r[e.M22],i[e.M11]=r[e.M00]*r[e.M22]-r[e.M20]*r[e.M02],i[e.M21]=r[e.M20]*r[e.M01]-r[e.M00]*r[e.M21],i[e.M02]=r[e.M01]*r[e.M12]-r[e.M11]*r[e.M02],i[e.M12]=r[e.M10]*r[e.M02]-r[e.M00]*r[e.M12],i[e.M22]=r[e.M00]*r[e.M11]-r[e.M10]*r[e.M01],r[e.M00]=n*i[e.M00],r[e.M10]=n*i[e.M10],r[e.M20]=n*i[e.M20],r[e.M01]=n*i[e.M01],r[e.M11]=n*i[e.M11],r[e.M21]=n*i[e.M21],r[e.M02]=n*i[e.M02],r[e.M12]=n*i[e.M12],r[e.M22]=n*i[e.M22],this}},{key:"setByMatrix3",value:function(e){var t,n=i(e.val);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.val.push(r)}}catch(s){n.e(s)}finally{n.f()}return this}},{key:"setByMatrix4",value:function(t){var n=this.val;return n[e.M00]=t.values[a.Matrix4.M00],n[e.M10]=t.values[a.Matrix4.M10],n[e.M20]=t.values[a.Matrix4.M20],n[e.M01]=t.values[a.Matrix4.M01],n[e.M11]=t.values[a.Matrix4.M11],n[e.M21]=t.values[a.Matrix4.M21],n[e.M02]=t.values[a.Matrix4.M02],n[e.M12]=t.values[a.Matrix4.M12],n[e.M22]=t.values[a.Matrix4.M22],this}},{key:"trnByVector2",value:function(t){var n=this.val;return n[e.M02]+=t.x,n[e.M12]+=t.y,this}},{key:"trnByMatrix3",value:function(t,n){var i=this.val;return i[e.M02]+=t,i[e.M12]+=n,this}},{key:"trnByVector3",value:function(t){var n=this.val;return n[e.M02]+=t.x,n[e.M12]+=t.y,this}},{key:"translate",value:function(t,n){var i=this.val;return this.tmp[e.M00]=1,this.tmp[e.M10]=0,this.tmp[e.M20]=0,this.tmp[e.M01]=0,this.tmp[e.M11]=1,this.tmp[e.M21]=0,this.tmp[e.M02]=t,this.tmp[e.M12]=n,this.tmp[e.M22]=1,e.mul(i,this.tmp),this}},{key:"rotate",value:function(e){return this.rotateRad(o.MathUtils.degreesToRadians*e)}},{key:"rotateRad",value:function(t){if(0===t)return this;var n=Math.cos(t),i=Math.sin(t),r=this.tmp;return r[e.M00]=n,r[e.M10]=i,r[e.M20]=0,r[e.M01]=-i,r[e.M11]=n,r[e.M21]=0,r[e.M02]=0,r[e.M12]=0,r[e.M22]=1,e.mul(this.val,r),this}},{key:"scale",value:function(t,n){var i=this.tmp;return i[e.M00]=t,i[e.M10]=0,i[e.M20]=0,i[e.M01]=0,i[e.M11]=n,i[e.M21]=0,i[e.M02]=0,i[e.M12]=0,i[e.M22]=1,e.mul(this.val,i),this}},{key:"getValues",value:function(){return this.val}},{key:"getTranslation",value:function(t){return t.x=this.val[e.M02],t.y=this.val[e.M12],t}},{key:"getScale",value:function(t){var n=this.val;return t.x=Math.sqrt(n[e.M00]*n[e.M00]+n[e.M01]*n[e.M01]),t.y=Math.sqrt(n[e.M10]*n[e.M10]+n[e.M11]*n[e.M11]),t}},{key:"getRotation",value:function(){return o.MathUtils.radiansToDegrees*Math.atan2(this.val[e.M10],this.val[e.M00])}},{key:"getRotationRad",value:function(){return Math.atan2(this.val[e.M10],this.val[e.M00])}},{key:"sclByNumber",value:function(t){return this.val[e.M00]*=t,this.val[e.M11]*=t,this}},{key:"sclByVector2",value:function(t){return this.val[e.M00]*=t.x,this.val[e.M11]*=t.y,this}},{key:"scl",value:function(t){return this.val[e.M00]*=t.x,this.val[e.M11]*=t.y,this}},{key:"transpose",value:function(){var t=this.val,n=t[e.M10],i=t[e.M20],r=t[e.M01],s=t[e.M21],a=t[e.M02],o=t[e.M12];return t[e.M01]=n,t[e.M02]=i,t[e.M10]=r,t[e.M12]=s,t[e.M20]=a,t[e.M21]=o,this}}],[{key:"mul",value:function(t,n){var i=t[e.M00]*n[e.M00]+t[e.M01]*n[e.M10]+t[e.M02]*n[e.M20],r=t[e.M00]*n[e.M01]+t[e.M01]*n[e.M11]+t[e.M02]*n[e.M21],s=t[e.M00]*n[e.M02]+t[e.M01]*n[e.M12]+t[e.M02]*n[e.M22],a=t[e.M10]*n[e.M00]+t[e.M11]*n[e.M10]+t[e.M12]*n[e.M20],o=t[e.M10]*n[e.M01]+t[e.M11]*n[e.M11]+t[e.M12]*n[e.M21],u=t[e.M10]*n[e.M02]+t[e.M11]*n[e.M12]+t[e.M12]*n[e.M22],l=t[e.M20]*n[e.M00]+t[e.M21]*n[e.M10]+t[e.M22]*n[e.M20],h=t[e.M20]*n[e.M01]+t[e.M21]*n[e.M11]+t[e.M22]*n[e.M21],c=t[e.M20]*n[e.M02]+t[e.M21]*n[e.M12]+t[e.M22]*n[e.M22];t[e.M00]=i,t[e.M10]=a,t[e.M20]=l,t[e.M01]=r,t[e.M11]=o,t[e.M21]=h,t[e.M02]=s,t[e.M12]=u,t[e.M22]=c}}]),e}();t.Matrix3=u,u.M00=0,u.M01=3,u.M02=6,u.M10=1,u.M11=4,u.M12=7,u.M20=2,u.M21=5,u.M22=8},4995:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix4=void 0;var s=n(5122),a=n(8606),o=n(7811),u=function(){function e(){i(this,e),this.temp=new Float32Array(16),this.values=new Float32Array(16);var t=this.values;t[e.M00]=1,t[e.M11]=1,t[e.M22]=1,t[e.M33]=1}return r(e,[{key:"set",value:function(e){return this.values.set(e),this}},{key:"setFromQuaternion",value:function(t){var n=2*t.x,i=2*t.y,r=2*t.z,s=t.w*n,a=t.w*i,o=t.w*r,u=t.x*n,l=t.x*i,h=t.x*r,c=t.y*i,f=t.y*r,d=t.z*r,v=this.values;return v[e.M00]=1-(c+d),v[e.M01]=l-o,v[e.M02]=h+a,v[e.M03]=0,v[e.M10]=l+o,v[e.M11]=1-(u+d),v[e.M12]=f-s,v[e.M13]=0,v[e.M20]=h-a,v[e.M21]=f+s,v[e.M22]=1-(u+c),v[e.M23]=0,v[e.M30]=0,v[e.M31]=0,v[e.M32]=0,v[e.M33]=1,this}},{key:"setFromTranslationRotation",value:function(t,n,i){var r=2*n.x,s=2*n.y,a=2*n.z,o=n.w*r,u=n.w*s,l=n.w*a,h=n.x*r,c=n.x*s,f=n.x*a,d=n.y*s,v=n.y*a,p=n.z*a,g=this.values;return g[e.M00]=i.x*(1-(d+p)),g[e.M01]=i.y*(c-l),g[e.M02]=i.z*(f+u),g[e.M03]=t.x,g[e.M10]=i.x*(c+l),g[e.M11]=i.y*(1-(h+p)),g[e.M12]=i.z*(v-o),g[e.M13]=t.y,g[e.M20]=i.x*(f-u),g[e.M21]=i.y*(v+o),g[e.M22]=i.z*(1-(h+d)),g[e.M23]=t.z,g[e.M30]=0,g[e.M31]=0,g[e.M32]=0,g[e.M33]=1,this}},{key:"transpose",value:function(){var t=this.temp,n=this.values;return t[e.M00]=n[e.M00],t[e.M01]=n[e.M10],t[e.M02]=n[e.M20],t[e.M03]=n[e.M30],t[e.M10]=n[e.M01],t[e.M11]=n[e.M11],t[e.M12]=n[e.M21],t[e.M13]=n[e.M31],t[e.M20]=n[e.M02],t[e.M21]=n[e.M12],t[e.M22]=n[e.M22],t[e.M23]=n[e.M32],t[e.M30]=n[e.M03],t[e.M31]=n[e.M13],t[e.M32]=n[e.M23],t[e.M33]=n[e.M33],this.set(t)}},{key:"identity",value:function(){var t=this.values;return t[e.M00]=1,t[e.M01]=0,t[e.M02]=0,t[e.M03]=0,t[e.M10]=0,t[e.M11]=1,t[e.M12]=0,t[e.M13]=0,t[e.M20]=0,t[e.M21]=0,t[e.M22]=1,t[e.M23]=0,t[e.M30]=0,t[e.M31]=0,t[e.M32]=0,t[e.M33]=1,this}},{key:"invert",value:function(){var t=this.values,n=this.temp,i=t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33];if(0===i)throw new Error("non-invertible matrix");var r=1/i;return n[e.M00]=t[e.M12]*t[e.M23]*t[e.M31]-t[e.M13]*t[e.M22]*t[e.M31]+t[e.M13]*t[e.M21]*t[e.M32]-t[e.M11]*t[e.M23]*t[e.M32]-t[e.M12]*t[e.M21]*t[e.M33]+t[e.M11]*t[e.M22]*t[e.M33],n[e.M01]=t[e.M03]*t[e.M22]*t[e.M31]-t[e.M02]*t[e.M23]*t[e.M31]-t[e.M03]*t[e.M21]*t[e.M32]+t[e.M01]*t[e.M23]*t[e.M32]+t[e.M02]*t[e.M21]*t[e.M33]-t[e.M01]*t[e.M22]*t[e.M33],n[e.M02]=t[e.M02]*t[e.M13]*t[e.M31]-t[e.M03]*t[e.M12]*t[e.M31]+t[e.M03]*t[e.M11]*t[e.M32]-t[e.M01]*t[e.M13]*t[e.M32]-t[e.M02]*t[e.M11]*t[e.M33]+t[e.M01]*t[e.M12]*t[e.M33],n[e.M03]=t[e.M03]*t[e.M12]*t[e.M21]-t[e.M02]*t[e.M13]*t[e.M21]-t[e.M03]*t[e.M11]*t[e.M22]+t[e.M01]*t[e.M13]*t[e.M22]+t[e.M02]*t[e.M11]*t[e.M23]-t[e.M01]*t[e.M12]*t[e.M23],n[e.M10]=t[e.M13]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M20]*t[e.M32]+t[e.M10]*t[e.M23]*t[e.M32]+t[e.M12]*t[e.M20]*t[e.M33]-t[e.M10]*t[e.M22]*t[e.M33],n[e.M11]=t[e.M02]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M22]*t[e.M30]+t[e.M03]*t[e.M20]*t[e.M32]-t[e.M00]*t[e.M23]*t[e.M32]-t[e.M02]*t[e.M20]*t[e.M33]+t[e.M00]*t[e.M22]*t[e.M33],n[e.M12]=t[e.M03]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M10]*t[e.M32]+t[e.M00]*t[e.M13]*t[e.M32]+t[e.M02]*t[e.M10]*t[e.M33]-t[e.M00]*t[e.M12]*t[e.M33],n[e.M13]=t[e.M02]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M12]*t[e.M20]+t[e.M03]*t[e.M10]*t[e.M22]-t[e.M00]*t[e.M13]*t[e.M22]-t[e.M02]*t[e.M10]*t[e.M23]+t[e.M00]*t[e.M12]*t[e.M23],n[e.M20]=t[e.M11]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M21]*t[e.M30]+t[e.M13]*t[e.M20]*t[e.M31]-t[e.M10]*t[e.M23]*t[e.M31]-t[e.M11]*t[e.M20]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M33],n[e.M21]=t[e.M03]*t[e.M21]*t[e.M30]-t[e.M01]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M20]*t[e.M31]+t[e.M00]*t[e.M23]*t[e.M31]+t[e.M01]*t[e.M20]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M33],n[e.M22]=t[e.M01]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M11]*t[e.M30]+t[e.M03]*t[e.M10]*t[e.M31]-t[e.M00]*t[e.M13]*t[e.M31]-t[e.M01]*t[e.M10]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M33],n[e.M23]=t[e.M03]*t[e.M11]*t[e.M20]-t[e.M01]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M10]*t[e.M21]+t[e.M00]*t[e.M13]*t[e.M21]+t[e.M01]*t[e.M10]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M23],n[e.M30]=t[e.M12]*t[e.M21]*t[e.M30]-t[e.M11]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M20]*t[e.M31]+t[e.M10]*t[e.M22]*t[e.M31]+t[e.M11]*t[e.M20]*t[e.M32]-t[e.M10]*t[e.M21]*t[e.M32],n[e.M31]=t[e.M01]*t[e.M22]*t[e.M30]-t[e.M02]*t[e.M21]*t[e.M30]+t[e.M02]*t[e.M20]*t[e.M31]-t[e.M00]*t[e.M22]*t[e.M31]-t[e.M01]*t[e.M20]*t[e.M32]+t[e.M00]*t[e.M21]*t[e.M32],n[e.M32]=t[e.M02]*t[e.M11]*t[e.M30]-t[e.M01]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M10]*t[e.M31]+t[e.M00]*t[e.M12]*t[e.M31]+t[e.M01]*t[e.M10]*t[e.M32]-t[e.M00]*t[e.M11]*t[e.M32],n[e.M33]=t[e.M01]*t[e.M12]*t[e.M20]-t[e.M02]*t[e.M11]*t[e.M20]+t[e.M02]*t[e.M10]*t[e.M21]-t[e.M00]*t[e.M12]*t[e.M21]-t[e.M01]*t[e.M10]*t[e.M22]+t[e.M00]*t[e.M11]*t[e.M22],t[e.M00]=n[e.M00]*r,t[e.M01]=n[e.M01]*r,t[e.M02]=n[e.M02]*r,t[e.M03]=n[e.M03]*r,t[e.M10]=n[e.M10]*r,t[e.M11]=n[e.M11]*r,t[e.M12]=n[e.M12]*r,t[e.M13]=n[e.M13]*r,t[e.M20]=n[e.M20]*r,t[e.M21]=n[e.M21]*r,t[e.M22]=n[e.M22]*r,t[e.M23]=n[e.M23]*r,t[e.M30]=n[e.M30]*r,t[e.M31]=n[e.M31]*r,t[e.M32]=n[e.M32]*r,t[e.M33]=n[e.M33]*r,this}},{key:"determinant",value:function(){var t=this.values;return t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33]}},{key:"translate",value:function(t,n,i){var r=this.values;return r[e.M03]+=t,r[e.M13]+=n,r[e.M23]+=i,this}},{key:"setTranslation",value:function(t,n,i){var r=this.values;return r[e.M03]=t,r[e.M13]=n,r[e.M23]=i,this}},{key:"getTranslation",value:function(t){var n=this.values;return t.x=n[e.M03],t.y=n[e.M13],t.z=n[e.M23],t}},{key:"hasRotationOrScaling",value:function(){var t=this.values;return!(a.MathUtils.isEqual(t[e.M00],1)&&a.MathUtils.isEqual(t[e.M11],1)&&a.MathUtils.isEqual(t[e.M22],1)&&a.MathUtils.isZero(t[e.M01])&&a.MathUtils.isZero(t[e.M02])&&a.MathUtils.isZero(t[e.M10])&&a.MathUtils.isZero(t[e.M12])&&a.MathUtils.isZero(t[e.M20])&&a.MathUtils.isZero(t[e.M21]))}},{key:"det3x3",value:function(){var t=this.values;return t[e.M00]*t[e.M11]*t[e.M22]+t[e.M01]*t[e.M12]*t[e.M20]+t[e.M02]*t[e.M10]*t[e.M21]-t[e.M00]*t[e.M12]*t[e.M21]-t[e.M01]*t[e.M10]*t[e.M22]-t[e.M02]*t[e.M11]*t[e.M20]}},{key:"copy",value:function(){return(new e).set(this.values)}},{key:"projection",value:function(t,n,i,r){this.identity();var s=1/Math.tan(i*(Math.PI/180)/2),a=(n+t)/(t-n),o=2*n*t/(t-n),u=this.values;return u[e.M00]=s/r,u[e.M10]=0,u[e.M20]=0,u[e.M30]=0,u[e.M01]=0,u[e.M11]=s,u[e.M21]=0,u[e.M31]=0,u[e.M02]=0,u[e.M12]=0,u[e.M22]=a,u[e.M32]=-1,u[e.M03]=0,u[e.M13]=0,u[e.M23]=o,u[e.M33]=0,this}},{key:"ortho2d",value:function(e,t,n,i){return this.ortho(e,e+n,t,t+i,0,1)}},{key:"ortho",value:function(t,n,i,r,s,a){this.identity();var o=2/(n-t),u=2/(r-i),l=-2/(a-s),h=-(n+t)/(n-t),c=-(r+i)/(r-i),f=-(a+s)/(a-s),d=this.values;return d[e.M00]=o,d[e.M10]=0,d[e.M20]=0,d[e.M30]=0,d[e.M01]=0,d[e.M11]=u,d[e.M21]=0,d[e.M31]=0,d[e.M02]=0,d[e.M12]=0,d[e.M22]=l,d[e.M32]=0,d[e.M03]=h,d[e.M13]=c,d[e.M23]=f,d[e.M33]=1,this}},{key:"multiply",value:function(t){var n=this.temp,i=this.values,r=t.values;return n[e.M00]=i[e.M00]*r[e.M00]+i[e.M01]*r[e.M10]+i[e.M02]*r[e.M20]+i[e.M03]*r[e.M30],n[e.M01]=i[e.M00]*r[e.M01]+i[e.M01]*r[e.M11]+i[e.M02]*r[e.M21]+i[e.M03]*r[e.M31],n[e.M02]=i[e.M00]*r[e.M02]+i[e.M01]*r[e.M12]+i[e.M02]*r[e.M22]+i[e.M03]*r[e.M32],n[e.M03]=i[e.M00]*r[e.M03]+i[e.M01]*r[e.M13]+i[e.M02]*r[e.M23]+i[e.M03]*r[e.M33],n[e.M10]=i[e.M10]*r[e.M00]+i[e.M11]*r[e.M10]+i[e.M12]*r[e.M20]+i[e.M13]*r[e.M30],n[e.M11]=i[e.M10]*r[e.M01]+i[e.M11]*r[e.M11]+i[e.M12]*r[e.M21]+i[e.M13]*r[e.M31],n[e.M12]=i[e.M10]*r[e.M02]+i[e.M11]*r[e.M12]+i[e.M12]*r[e.M22]+i[e.M13]*r[e.M32],n[e.M13]=i[e.M10]*r[e.M03]+i[e.M11]*r[e.M13]+i[e.M12]*r[e.M23]+i[e.M13]*r[e.M33],n[e.M20]=i[e.M20]*r[e.M00]+i[e.M21]*r[e.M10]+i[e.M22]*r[e.M20]+i[e.M23]*r[e.M30],n[e.M21]=i[e.M20]*r[e.M01]+i[e.M21]*r[e.M11]+i[e.M22]*r[e.M21]+i[e.M23]*r[e.M31],n[e.M22]=i[e.M20]*r[e.M02]+i[e.M21]*r[e.M12]+i[e.M22]*r[e.M22]+i[e.M23]*r[e.M32],n[e.M23]=i[e.M20]*r[e.M03]+i[e.M21]*r[e.M13]+i[e.M22]*r[e.M23]+i[e.M23]*r[e.M33],n[e.M30]=i[e.M30]*r[e.M00]+i[e.M31]*r[e.M10]+i[e.M32]*r[e.M20]+i[e.M33]*r[e.M30],n[e.M31]=i[e.M30]*r[e.M01]+i[e.M31]*r[e.M11]+i[e.M32]*r[e.M21]+i[e.M33]*r[e.M31],n[e.M32]=i[e.M30]*r[e.M02]+i[e.M31]*r[e.M12]+i[e.M32]*r[e.M22]+i[e.M33]*r[e.M32],n[e.M33]=i[e.M30]*r[e.M03]+i[e.M31]*r[e.M13]+i[e.M32]*r[e.M23]+i[e.M33]*r[e.M33],this.set(this.temp)}},{key:"multiplyLeft",value:function(t){var n=this.temp,i=this.values,r=t.values;return n[e.M00]=r[e.M00]*i[e.M00]+r[e.M01]*i[e.M10]+r[e.M02]*i[e.M20]+r[e.M03]*i[e.M30],n[e.M01]=r[e.M00]*i[e.M01]+r[e.M01]*i[e.M11]+r[e.M02]*i[e.M21]+r[e.M03]*i[e.M31],n[e.M02]=r[e.M00]*i[e.M02]+r[e.M01]*i[e.M12]+r[e.M02]*i[e.M22]+r[e.M03]*i[e.M32],n[e.M03]=r[e.M00]*i[e.M03]+r[e.M01]*i[e.M13]+r[e.M02]*i[e.M23]+r[e.M03]*i[e.M33],n[e.M10]=r[e.M10]*i[e.M00]+r[e.M11]*i[e.M10]+r[e.M12]*i[e.M20]+r[e.M13]*i[e.M30],n[e.M11]=r[e.M10]*i[e.M01]+r[e.M11]*i[e.M11]+r[e.M12]*i[e.M21]+r[e.M13]*i[e.M31],n[e.M12]=r[e.M10]*i[e.M02]+r[e.M11]*i[e.M12]+r[e.M12]*i[e.M22]+r[e.M13]*i[e.M32],n[e.M13]=r[e.M10]*i[e.M03]+r[e.M11]*i[e.M13]+r[e.M12]*i[e.M23]+r[e.M13]*i[e.M33],n[e.M20]=r[e.M20]*i[e.M00]+r[e.M21]*i[e.M10]+r[e.M22]*i[e.M20]+r[e.M23]*i[e.M30],n[e.M21]=r[e.M20]*i[e.M01]+r[e.M21]*i[e.M11]+r[e.M22]*i[e.M21]+r[e.M23]*i[e.M31],n[e.M22]=r[e.M20]*i[e.M02]+r[e.M21]*i[e.M12]+r[e.M22]*i[e.M22]+r[e.M23]*i[e.M32],n[e.M23]=r[e.M20]*i[e.M03]+r[e.M21]*i[e.M13]+r[e.M22]*i[e.M23]+r[e.M23]*i[e.M33],n[e.M30]=r[e.M30]*i[e.M00]+r[e.M31]*i[e.M10]+r[e.M32]*i[e.M20]+r[e.M33]*i[e.M30],n[e.M31]=r[e.M30]*i[e.M01]+r[e.M31]*i[e.M11]+r[e.M32]*i[e.M21]+r[e.M33]*i[e.M31],n[e.M32]=r[e.M30]*i[e.M02]+r[e.M31]*i[e.M12]+r[e.M32]*i[e.M22]+r[e.M33]*i[e.M32],n[e.M33]=r[e.M30]*i[e.M03]+r[e.M31]*i[e.M13]+r[e.M32]*i[e.M23]+r[e.M33]*i[e.M33],this.set(this.temp)}},{key:"idt",value:function(){var t=this.values;return t[e.M00]=1,t[e.M01]=0,t[e.M02]=0,t[e.M03]=0,t[e.M10]=0,t[e.M11]=1,t[e.M12]=0,t[e.M13]=0,t[e.M20]=0,t[e.M21]=0,t[e.M22]=1,t[e.M23]=0,t[e.M30]=0,t[e.M31]=0,t[e.M32]=0,t[e.M33]=1,this}},{key:"lookAt",value:function(t,n,i){e.initTemps();var r=e.xAxis,s=e.yAxis,a=e.zAxis;a.setFrom(n).normalize(),r.setFrom(n).normalize(),r.cross(i).normalize(),s.setFrom(r).cross(a).normalize(),this.identity();var o=this.values;return o[e.M00]=r.x,o[e.M01]=r.y,o[e.M02]=r.z,o[e.M10]=s.x,o[e.M11]=s.y,o[e.M12]=s.z,o[e.M20]=-a.x,o[e.M21]=-a.y,o[e.M22]=-a.z,e.tmpMatrix.identity(),e.tmpMatrix.values[e.M03]=-t.x,e.tmpMatrix.values[e.M13]=-t.y,e.tmpMatrix.values[e.M23]=-t.z,this.multiply(e.tmpMatrix),this}},{key:"setToLookAt",value:function(t,n,i){return null===e.tempVec&&(e.tempVec=new o.Vector3),e.tempVec.setFrom(n).sub(t),this.lookAt(t,e.tempVec,i),this}},{key:"rotate",value:function(t){var n=t.x,i=t.y,r=t.z,s=t.w,a=n*n,o=n*i,u=n*r,l=n*s,h=i*i,c=i*r,f=i*s,d=r*r,v=r*s,p=1-2*(h+d),g=2*(o-v),m=2*(u+f),y=2*(o+v),b=1-2*(a+d),M=2*(c-l),x=2*(u-f),_=2*(c+l),w=1-2*(a+h),k=this.values,T=k[e.M00]*p+k[e.M01]*y+k[e.M02]*x,E=k[e.M00]*g+k[e.M01]*b+k[e.M02]*_,L=k[e.M00]*m+k[e.M01]*M+k[e.M02]*w,A=k[e.M10]*p+k[e.M11]*y+k[e.M12]*x,S=k[e.M10]*g+k[e.M11]*b+k[e.M12]*_,C=k[e.M10]*m+k[e.M11]*M+k[e.M12]*w,P=k[e.M20]*p+k[e.M21]*y+k[e.M22]*x,I=k[e.M20]*g+k[e.M21]*b+k[e.M22]*_,R=k[e.M20]*m+k[e.M21]*M+k[e.M22]*w,O=k[e.M30]*p+k[e.M31]*y+k[e.M32]*x,N=k[e.M30]*g+k[e.M31]*b+k[e.M32]*_,F=k[e.M30]*m+k[e.M31]*M+k[e.M32]*w;return k[e.M00]=T,k[e.M10]=A,k[e.M20]=P,k[e.M30]=O,k[e.M01]=E,k[e.M11]=S,k[e.M21]=I,k[e.M31]=N,k[e.M02]=L,k[e.M12]=C,k[e.M22]=R,k[e.M32]=F,this}},{key:"scale",value:function(t,n,i){var r=this.values;return r[e.M00]*=t,r[e.M01]*=n,r[e.M02]*=i,r[e.M10]*=t,r[e.M11]*=n,r[e.M12]*=i,r[e.M20]*=t,r[e.M21]*=n,r[e.M22]*=i,r[e.M30]*=t,r[e.M31]*=n,r[e.M32]*=i,this}},{key:"setToRotation",value:function(t,n){return 0===n?(this.idt(),this):this.setFromQuaternion(e.quat.setFromAxis(t.x,t.y,t.z,n))}}],[{key:"initTemps",value:function(){null===e.xAxis&&(e.xAxis=new o.Vector3),null===e.yAxis&&(e.yAxis=new o.Vector3),null===e.zAxis&&(e.zAxis=new o.Vector3)}},{key:"matrix4_proj",value:function(t,n){var i=1/(n[0]*t[e.M30]+n[1]*t[e.M31]+n[2]*t[e.M32]+t[e.M33]),r=(n[0]*t[e.M00]+n[1]*t[e.M01]+n[2]*t[e.M02]+t[e.M03])*i,s=(n[0]*t[e.M10]+n[1]*t[e.M11]+n[2]*t[e.M12]+t[e.M13])*i,a=(n[0]*t[e.M20]+n[1]*t[e.M21]+n[2]*t[e.M22]+t[e.M23])*i;n[0]=r,n[1]=s,n[2]=a}},{key:"prj",value:function(t,n,i,r,s){for(var a=e.tmpArrayForVec,o=0;o<r;o++){var u=i+o*s,l=0;a[l]=n[u+l++],a[l]=n[u+l++],a[l]=n[u+l++],l=0,e.matrix4_proj(t.values,a),n[o*s+l]=a[l++],n[o*s+l]=a[l++],n[o*s+l]=a[l++]}}}]),e}();t.Matrix4=u,u.M00=0,u.M01=4,u.M02=8,u.M03=12,u.M10=1,u.M11=5,u.M12=9,u.M13=13,u.M20=2,u.M21=6,u.M22=10,u.M23=14,u.M30=3,u.M31=7,u.M32=11,u.M33=15,u.xAxis=null,u.yAxis=null,u.zAxis=null,u.tempVec=null,u.tmpMatrix=new u,u.quat=new s.Quaternion,u.tmpArrayForVec=[]},1514:function(e,t,n){"use strict";var i=n(1655).default,r=n(6389).default,s=n(6690).default,a=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Color2Attribute=t.ColorAttribute=t.TexCoordAttribute=t.Position3Attribute=t.Position2Attribute=t.VertexAttribute=t.VertexAttributeType=t.Mesh=void 0;var o,u=n(1858),l=function(){function e(t,n,i,r){s(this,e),this.attributes=n,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=t,this.elementsPerVertex=0;for(var a=0;a<n.length;a++)this.elementsPerVertex+=n[a].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(r)}return a(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"maxVertices",value:function(){return this.vertices.length/this.elementsPerVertex}},{key:"numVertices",value:function(){return this.verticesLength/this.elementsPerVertex}},{key:"setVerticesLength",value:function(e){this.dirtyVertices=!0,this.verticesLength=e}},{key:"getVertices",value:function(){return this.vertices}},{key:"maxIndices",value:function(){return this.indices.length}},{key:"numIndices",value:function(){return this.indicesLength}},{key:"setIndicesLength",value:function(e){this.dirtyIndices=!0,this.indicesLength=e}},{key:"getIndices",value:function(){return this.indices}},{key:"getVertexSizeInFloats",value:function(){for(var e=0,t=0;t<this.attributes.length;t++){e+=this.attributes[t].numElements}return e}},{key:"setVertices",value:function(e){if(this.dirtyVertices=!0,e.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(e,0),this.verticesLength=e.length}},{key:"setIndices",value:function(e){if(this.dirtyIndices=!0,e.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(e,0),this.indicesLength=e.length}},{key:"draw",value:function(e,t){this.drawWithOffset(e,t,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}},{key:"drawWithOffset",value:function(e,t,n,i){var r=this.context;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(e),this.indicesLength>0?r.drawElements(t,i,r.UNSIGNED_SHORT,2*n):r.drawArrays(t,n,i),this.unbind(e)}},{key:"bind",value:function(e){var t=this.context;t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer);for(var n=0,i=0;i<this.attributes.length;i++){var r=this.attributes[i],s=e.getAttributeLocation(r.name);t.enableVertexAttribArray(s),t.vertexAttribPointer(s,r.numElements,t.FLOAT,!1,4*this.elementsPerVertex,4*n),n+=r.numElements}this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}},{key:"unbind",value:function(e){for(var t=this.context,n=0;n<this.attributes.length;n++){var i=this.attributes[n],r=e.getAttributeLocation(i.name);t.disableVertexAttribArray(r)}t.bindBuffer(t.ARRAY_BUFFER,null),this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var e=this.context;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),e.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=e.createBuffer()),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),e.DYNAMIC_DRAW),this.dirtyIndices=!1)}},{key:"restore",value:function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}},{key:"dispose",value:function(){var e=this.context;e.deleteBuffer(this.verticesBuffer),e.deleteBuffer(this.indicesBuffer)}}]),e}();t.Mesh=l,function(e){e[e.Float=0]="Float"}(o=t.VertexAttributeType||(t.VertexAttributeType={}));var h=a((function e(t,n,i){s(this,e),this.name=t,this.type=n,this.numElements=i}));t.VertexAttribute=h;var c=function(e){i(n,e);var t=r(n);function n(){return s(this,n),t.call(this,u.Shader.POSITION,o.Float,2)}return a(n)}(h);t.Position2Attribute=c;var f=function(e){i(n,e);var t=r(n);function n(){return s(this,n),t.call(this,u.Shader.POSITION,o.Float,3)}return a(n)}(h);t.Position3Attribute=f;var d=function(e){i(n,e);var t=r(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return s(this,n),t.call(this,u.Shader.TEXCOORDS+(0===e?"":e),o.Float,2)}return a(n)}(h);t.TexCoordAttribute=d;var v=function(e){i(n,e);var t=r(n);function n(){return s(this,n),t.call(this,u.Shader.COLOR,o.Float,4)}return a(n)}(h);t.ColorAttribute=v;var p=function(e){i(n,e);var t=r(n);function n(){return s(this,n),t.call(this,u.Shader.COLOR2,o.Float,4)}return a(n)}(h);t.Color2Attribute=p},9699:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.NumberUtil=void 0;var s=new Int8Array(4),a=new Int32Array(s.buffer,0,1),o=new Float32Array(s.buffer,0,1),u=function(){function e(){i(this,e)}return r(e,null,[{key:"intBitsToFloat",value:function(e){return a[0]=e,o[0]}},{key:"floatToIntBits",value:function(e){return o[0]=e,a[0]}},{key:"intToFloatColor",value:function(t){return e.intBitsToFloat(4278190079&t)}},{key:"colorToFloat",value:function(t,n,i,r){var s=t<<24|n<<16|i<<8|r;return e.intToFloatColor(s)}},{key:"isPowerOfTwo",value:function(e){return 0===(e&e-1)}},{key:"nextPowerOfTwo",value:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1}}]),e}();t.NumberUtil=u},1251:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PolygonBatch=void 0;var s=n(8606),a=n(1514),o=n(1858),u=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],l=new s.Color(1,1,1,1),h=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10920;if(i(this,e),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.projectionValues=new Float32Array(16),this.color=l,this.twoColorTint=!0,this.yDown=!1,r>10920)throw new Error("Can't have more than 10920 triangles per batch: "+r);this.context=t;var s=n?[new a.Position2Attribute,new a.ColorAttribute,new a.TexCoordAttribute,new a.Color2Attribute]:[new a.Position2Attribute,new a.ColorAttribute,new a.TexCoordAttribute];this.mesh=new a.Mesh(t,s,r,3*r),this.shader=o.Shader.newTwoColoredTextured(t);var u=this.context;this.srcColorBlend=u.SRC_ALPHA,this.srcAlphaBlend=u.ONE,this.dstBlend=u.ONE_MINUS_SRC_ALPHA,this.twoColorTint=n}return r(e,[{key:"setColor",value:function(e){this.color=e}},{key:"setShader",value:function(e){this.shader.dispose(),this.shader=e}},{key:"setProjection",value:function(e){this.projectionValues=e}},{key:"begin",value:function(){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0;var e=this.shader;this.lastTexture=null,this.isDrawing=!0,e.bind(),e.setUniform4x4f(o.Shader.MVP_MATRIX,this.projectionValues),e.setUniformi("u_texture",0);var t=this.context;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}},{key:"setBlendMode",value:function(e,t,n){this.srcColorBlend===e&&this.srcAlphaBlend===t&&this.dstBlend===n||(this.srcColorBlend=e,this.srcAlphaBlend=t,this.dstBlend=n,this.isDrawing&&(this.flush(),this.context.blendFuncSeparate(e,n,t,n)))}},{key:"drawVerticesWithOffset",value:function(t,n,i,r){for(var s=[],a=0;a<r;a++)s[a]=n[a+i];this.drawVertices(t,s,e.QUAD_TRIANGLES)}},{key:"drawVertices",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.QUAD_TRIANGLES;t!==this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+n.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();var r=this.mesh.numVertices();this.mesh.getVertices().set(n,this.verticesLength),this.verticesLength+=n.length,this.mesh.setVerticesLength(this.verticesLength);for(var s=this.mesh.getIndices(),a=this.indicesLength,o=0;o<i.length;a++,o++)s[a]=i[o]+r;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}},{key:"drawTransformed",value:function(t,n,i,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(this.yDown){var c=a;a=l,l=c}var f=s,d=a,v=o,p=l,g=v,m=d,y=f,b=p;h&&(this.yDown?(f=s,d=l,v=o,p=a,g=s,m=a,y=o,b=l):(f=o,d=a,v=s,p=l,g=o,m=l,y=s,b=a));var M=r.m02,x=r.m12,_=r.m01*i+r.m02,w=r.m11*i+r.m12,k=r.m00*n+r.m01*i+r.m02,T=r.m10*n+r.m11*i+r.m12,E=r.m00*n+r.m02,L=r.m10*n+r.m12,A=this.color,S=0;u[S++]=M,u[S++]=x,u[S++]=A.r,u[S++]=A.g,u[S++]=A.b,u[S++]=A.a,u[S++]=f,u[S++]=d,this.twoColorTint&&(u[S++]=0,u[S++]=0,u[S++]=0,u[S++]=0),u[S++]=_,u[S++]=w,u[S++]=A.r,u[S++]=A.g,u[S++]=A.b,u[S++]=A.a,u[S++]=y,u[S++]=b,this.twoColorTint&&(u[S++]=0,u[S++]=0,u[S++]=0,u[S++]=0),u[S++]=k,u[S++]=T,u[S++]=A.r,u[S++]=A.g,u[S++]=A.b,u[S++]=A.a,u[S++]=v,u[S++]=p,this.twoColorTint&&(u[S++]=0,u[S++]=0,u[S++]=0,u[S++]=0),u[S++]=E,u[S++]=L,u[S++]=A.r,u[S++]=A.g,u[S++]=A.b,u[S++]=A.a,u[S++]=g,u[S++]=m,this.twoColorTint&&(u[S++]=0,u[S++]=0,u[S++]=0,u[S]=0),this.drawVertices(t,u,e.QUAD_TRIANGLES)}},{key:"flush",value:function(){0!==this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader.unbind(),this.lastTexture=null,this.isDrawing=!1,e.totalDrawCalls+=this.drawCalls;var t=this.context;t.disable(t.BLEND)}},{key:"getDrawCalls",value:function(){return this.drawCalls}},{key:"dispose",value:function(){this.mesh.dispose()}},{key:"setYDown",value:function(e){this.yDown=e}},{key:"draw",value:function(t,n,i,r,s){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]&&arguments[14],m=this.color;if(this.yDown){var y=d;d=p,p=y}n=n||0,i=i||0;var b=-a,M=(r=0===r?r:r||t.width)-a,x=r-a,_=-a,w=-o,k=-o,T=(s=0===s?s:s||t.height)-o,E=s-o;if(1!==h&&(b*=h,M*=h,x*=h,_*=h),1!==c&&(w*=c,k*=c,T*=c,E*=c),0!==l){var L=Math.cos(l),A=Math.sin(l),S=A*b+L*w,C=A*M+L*k,P=A*x+L*T,I=A*_+L*E;b=L*b-A*w,M=L*M-A*k,x=L*x-A*T,_=L*_-A*E,w=S,k=C,T=P,E=I}b+=n+a,M+=n+a,x+=n+a,_+=n+a,w+=i+o,k+=i+o,T+=i+o,E+=i+o;var R=f,O=d,N=v,F=p,U=N,V=O,D=R,B=F;g&&(this.yDown?(R=f,O=p,N=v,F=d,U=f,V=d,D=v,B=p):(R=v,O=d,N=f,F=p,U=v,V=p,D=f,B=d));var G=0;u[G++]=b,u[G++]=w,u[G++]=m.r,u[G++]=m.g,u[G++]=m.b,u[G++]=m.a,u[G++]=R,u[G++]=O,this.twoColorTint&&(u[G++]=0,u[G++]=0,u[G++]=0,u[G++]=0),u[G++]=M,u[G++]=k,u[G++]=m.r,u[G++]=m.g,u[G++]=m.b,u[G++]=m.a,u[G++]=U,u[G++]=V,this.twoColorTint&&(u[G++]=0,u[G++]=0,u[G++]=0,u[G++]=0),u[G++]=x,u[G++]=T,u[G++]=m.r,u[G++]=m.g,u[G++]=m.b,u[G++]=m.a,u[G++]=N,u[G++]=F,this.twoColorTint&&(u[G++]=0,u[G++]=0,u[G++]=0,u[G++]=0),u[G++]=_,u[G++]=E,u[G++]=m.r,u[G++]=m.g,u[G++]=m.b,u[G++]=m.a,u[G++]=D,u[G++]=B,this.twoColorTint&&(u[G++]=0,u[G++]=0,u[G++]=0,u[G]=0),this.drawVertices(t,u,e.QUAD_TRIANGLES)}}],[{key:"resetTotalDrawCalls",value:function(){e.totalDrawCalls=0}}]),e}();t.PolygonBatch=h,h.QUAD_TRIANGLES=[0,1,2,2,3,0],h.totalDrawCalls=0},5122:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Quaternion=void 0;var s=n(4995),a=n(8606),o=n(7811),u=n(6239),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,e),this.set(t,n,r,s)}return r(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setFrom",value:function(e){return this.set(e.x,e.y,e.z,e.w)}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"toString",value:function(){return"["+this.x+"|"+this.y+"|"+this.z+"|"+this.w+"]"}},{key:"setEulerAngles",value:function(e,t,n){return this.setEulerAnglesRad(e*a.MathUtils.degreesToRadians,t*a.MathUtils.degreesToRadians,n*a.MathUtils.degreesToRadians)}},{key:"setEulerAnglesRad",value:function(e,t,n){var i=.5*n,r=Math.sin(i),s=Math.cos(i),a=.5*t,o=Math.sin(a),u=Math.cos(a),l=.5*e,h=Math.sin(l),c=Math.cos(l),f=c*o,d=h*u,v=c*u,p=h*o;return this.x=f*s+d*r,this.y=d*s-f*r,this.z=v*r-p*s,this.w=v*s+p*r,this}},{key:"getGimbalPole",value:function(){var e=this.y*this.x+this.z*this.w;return e>.499?1:e<-.499?-1:0}},{key:"getRollRad",value:function(){var e=this.getGimbalPole();return 0===e?Math.atan2(2*(this.w*this.z+this.y*this.x),1-2*(this.x*this.x+this.z*this.z)):2*e*Math.atan2(this.y,this.w)}},{key:"getRoll",value:function(){return this.getRollRad()*a.MathUtils.radiansToDegrees}},{key:"getPitchRad",value:function(){var e=this.getGimbalPole();return 0===e?Math.asin(a.MathUtils.clamp(2*(this.w*this.x-this.z*this.y),-1,1)):e*a.MathUtils.PI*.5}},{key:"getPitch",value:function(){return this.getPitchRad()*a.MathUtils.radiansToDegrees}},{key:"getYawRad",value:function(){return 0===this.getGimbalPole()?Math.atan2(2*(this.y*this.w+this.x*this.z),1-2*(this.y*this.y+this.x*this.x)):0}},{key:"getYaw",value:function(){return this.getYawRad()*a.MathUtils.radiansToDegrees}},{key:"len2",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"nor",value:function(){var e=this.len2();return 0===e||a.MathUtils.isEqual(e,1)||(e=Math.sqrt(e),this.w/=e,this.x/=e,this.y/=e,this.z/=e),this}},{key:"conjugate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"transform",value:function(t){e.tmp2.set(this.x,this.y,this.z,this.w),e.tmp2.conjugate();var n=e.tmp1.set(t.x,t.y,t.z,0);return e.tmp2.mulLeft(n.x,n.y,n.z,n.w).mulLeft(this.x,this.y,this.z,this.w),t.x=e.tmp2.x,t.y=e.tmp2.y,t.z=e.tmp2.z,t}},{key:"mul",value:function(e,t,n,i){var r=this.w*e+this.x*i+this.y*n-this.z*t,s=this.w*t+this.y*i+this.z*e-this.x*n,a=this.w*n+this.z*i+this.x*t-this.y*e,o=this.w*i-this.x*e-this.y*t-this.z*n;return this.x=r,this.y=s,this.z=a,this.w=o,this}},{key:"mulLeft",value:function(e,t,n,i){var r=i*this.x+e*this.w+t*this.z-n*this.y,s=i*this.y+t*this.w+n*this.x-e*this.z,a=i*this.z+n*this.w+e*this.y-t*this.x,o=i*this.w-e*this.x-t*this.y-n*this.z;return this.x=r,this.y=s,this.z=a,this.w=o,this}},{key:"add",value:function(e,t,n,i){return this.x+=e,this.y+=t,this.z+=n,this.w+=i,this}},{key:"toMatrix",value:function(e){var t=this.x*this.x,n=this.x*this.y,i=this.x*this.z,r=this.x*this.w,a=this.y*this.y,o=this.y*this.z,u=this.y*this.w,l=this.z*this.z,h=this.z*this.w;e[s.Matrix4.M00]=1-2*(a+l),e[s.Matrix4.M01]=2*(n-h),e[s.Matrix4.M02]=2*(i+u),e[s.Matrix4.M03]=0,e[s.Matrix4.M10]=2*(n+h),e[s.Matrix4.M11]=1-2*(t+l),e[s.Matrix4.M12]=2*(o-r),e[s.Matrix4.M13]=0,e[s.Matrix4.M20]=2*(i-u),e[s.Matrix4.M21]=2*(o+r),e[s.Matrix4.M22]=1-2*(t+a),e[s.Matrix4.M23]=0,e[s.Matrix4.M30]=0,e[s.Matrix4.M31]=0,e[s.Matrix4.M32]=0,e[s.Matrix4.M33]=1}},{key:"idt",value:function(){return this.set(0,0,0,1)}},{key:"isIdentity",value:function(){return a.MathUtils.isZero(this.x)&&a.MathUtils.isZero(this.y)&&a.MathUtils.isZero(this.z)&&a.MathUtils.isEqual(this.w,1)}},{key:"setFromAxis",value:function(e,t,n,i){return this.setFromAxisRad(e,t,n,i*a.MathUtils.degreesToRadians)}},{key:"setFromAxisRad",value:function(e,t,n,i){var r=new o.Vector3(e,t,n).length();if(0===r)return this.idt();r=1/r;var s=i<0?a.MathUtils.PI2- -i%a.MathUtils.PI2:i%a.MathUtils.PI2,u=Math.sin(s/2),l=Math.cos(s/2);return this.set(r*e*u,r*t*u,r*n*u,l).nor()}},{key:"setFromMatrix4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.setFromAxes(e.values[s.Matrix4.M00],e.values[s.Matrix4.M01],e.values[s.Matrix4.M02],e.values[s.Matrix4.M10],e.values[s.Matrix4.M11],e.values[s.Matrix4.M12],e.values[s.Matrix4.M20],e.values[s.Matrix4.M21],e.values[s.Matrix4.M22],t)}},{key:"setFromMatrix3",value:function(e,t){return this.setFromAxes(e.val[u.Matrix3.M00],e.val[u.Matrix3.M01],e.val[u.Matrix3.M02],e.val[u.Matrix3.M10],e.val[u.Matrix3.M11],e.val[u.Matrix3.M12],e.val[u.Matrix3.M20],e.val[u.Matrix3.M21],e.val[u.Matrix3.M22],t)}},{key:"setFromAxes",value:function(e,t,n,i,r,s,a,u,l){if(arguments.length>9&&void 0!==arguments[9]&&arguments[9]){var h=1/new o.Vector3(e,t,n).length(),c=1/new o.Vector3(i,r,s).length(),f=1/new o.Vector3(a,u,l).length();e*=h,t*=h,n*=h,i*=c,r*=c,s*=c,a*=f,u*=f,l*=f}var d=e+r+l;if(d>=0){var v=Math.sqrt(d+1);this.w=.5*v,v=.5/v,this.x=(u-s)*v,this.y=(n-a)*v,this.z=(i-t)*v}else if(e>r&&e>l){var p=Math.sqrt(1+e-r-l);this.x=.5*p,p=.5/p,this.y=(i+t)*p,this.z=(n+a)*p,this.w=(u-s)*p}else if(r>l){var g=Math.sqrt(1+r-e-l);this.y=.5*g,g=.5/g,this.x=(i+t)*g,this.z=(u+s)*g,this.w=(n-a)*g}else{var m=Math.sqrt(1+l-e-r);this.z=.5*m,m=.5/m,this.x=(n+a)*m,this.y=(u+s)*m,this.w=(i-t)*m}return this}},{key:"setFromCross",value:function(e,t){var n=a.MathUtils.clamp(e.dot(t),-1,1),i=Math.acos(n);return this.setFromAxisRad(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x,i)}},{key:"slerp",value:function(e,t){var n=this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w,i=n<0?-n:n,r=1-t,s=t;if(1-i>.1){var a=Math.acos(i),o=1/Math.sin(a);r=Math.sin((1-t)*a)*o,s=Math.sin(t*a)*o}return n<0&&(s=-s),this.x=r*this.x+s*e.x,this.y=r*this.y+s*e.y,this.z=r*this.z+s*e.z,this.w=r*this.w+s*e.w,this}},{key:"slerpWithQuaternions",value:function(t){var n=1/t.length;this.set(t[0].x,t[0].y,t[0].z,t[0].w).exp(n);for(var i=1;i<t.length;i++){var r=e.tmp1.set(t[i].x,t[i].y,t[i].z,t[i].w).exp(n);this.mul(r.x,r.y,r.z,r.w)}return this.nor(),this}},{key:"exp",value:function(e){var t=this.len(),n=Math.pow(t,e),i=Math.acos(this.w/t),r=0;return r=Math.abs(i)<.001?n*e/t:n*Math.sin(e*i)/(t*Math.sin(i)),this.w=n*Math.cos(e*i),this.x*=r,this.y*=r,this.z*=r,this.nor(),this}},{key:"dot",value:function(e,t,n,i){return this.x*e+this.y*t+this.z*n+this.w*i}},{key:"mulByScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"getAxisAngle",value:function(e){return this.getAxisAngleRad(e.x,e.y,e.z)*a.MathUtils.radiansToDegrees}},{key:"getAxisAngleRad",value:function(e,t,n){this.w>1&&this.nor();var i=2*Math.acos(this.w),r=Math.sqrt(1-this.w*this.w);return r<a.MathUtils.FLOAT_ROUNDING_ERROR?(this.x,this.y,this.z):(this.x/r,this.y/r,this.z/r),i}},{key:"getAngleRad",value:function(){return 2*Math.acos(this.w>1?this.w/this.len():this.w)}},{key:"getAngle",value:function(){return this.getAngleRad()*a.MathUtils.radiansToDegrees}}],[{key:"len",value:function(e,t,n,i){return Math.sqrt(e*e+t*t+n*n+i*i)}},{key:"len2",value:function(e,t,n,i){return e*e+t*t+n*n+i*i}},{key:"dot",value:function(e,t,n,i,r,s,a,o){return e*r+t*s+n*a+i*o}}]),e}();t.Quaternion=l,l.tmp1=new l(0,0,0,0),l.tmp2=new l(0,0,0,0)},1858:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Shader=void 0;var s=function(){function e(t,n,r){i(this,e),this.vertexShader=n,this.fragmentShader=r,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=n,this.fsSource=r,this.context=t,this.compile()}return r(e,[{key:"getProgram",value:function(){return this.program}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"getVertexShaderSource",value:function(){return this.vsSource}},{key:"getFragmentSource",value:function(){return this.fsSource}},{key:"compile",value:function(){var e=this.context;try{this.vs=this.compileShader(e.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(e.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}},{key:"compileShader",value:function(e,t){var n=this.context,i=n.createShader(e);if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){var r="Couldn't compile shader: "+n.getShaderInfoLog(i);if(n.deleteShader(i),!n.isContextLost())throw new Error(r)}return i}},{key:"compileProgram",value:function(e,t){var n=this.context,i=n.createProgram();if(n.attachShader(i,e),n.attachShader(i,t),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS)){var r="Couldn't compile shader program: "+n.getProgramInfoLog(i);if(n.deleteProgram(i),!n.isContextLost())throw new Error(r)}return i}},{key:"restore",value:function(){this.compile()}},{key:"bind",value:function(){this.context.useProgram(this.program)}},{key:"unbind",value:function(){this.context.useProgram(null)}},{key:"setUniformi",value:function(e,t){this.context.uniform1i(this.getUniformLocation(e),t)}},{key:"setUniformf",value:function(e,t){this.context.uniform1f(this.getUniformLocation(e),t)}},{key:"setUniform2f",value:function(e,t,n){this.context.uniform2f(this.getUniformLocation(e),t,n)}},{key:"setUniform3f",value:function(e,t,n,i){this.context.uniform3f(this.getUniformLocation(e),t,n,i)}},{key:"setUniform1fWithLocation",value:function(e,t){this.context.uniform1f(e,t)}},{key:"setUniform3fWithLocation",value:function(e,t,n,i){this.context.uniform3f(e,t,n,i)}},{key:"setUniform4f",value:function(e,t,n,i,r){this.context.uniform4f(this.getUniformLocation(e),t,n,i,r)}},{key:"setUniform2x2f",value:function(e,t){this.tmp2x2.set(t),this.context.uniformMatrix2fv(this.getUniformLocation(e),!1,this.tmp2x2)}},{key:"setUniform3x3f",value:function(e,t){this.tmp3x3.set(t),this.context.uniformMatrix3fv(this.getUniformLocation(e),!1,this.tmp3x3)}},{key:"setUniform4x4f",value:function(e,t){this.tmp4x4.set(t),this.context.uniformMatrix4fv(this.getUniformLocation(e),!1,this.tmp4x4)}},{key:"setUniform4x4fWithLocation",value:function(e,t){this.context.uniformMatrix4fv(e,!1,t)}},{key:"setUniform3fv",value:function(e,t){this.context.uniform3fv(this.getUniformLocation(e),t)}},{key:"getUniformLocation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.context.getUniformLocation(this.program,e);if(t&&!n&&!this.context.isContextLost())throw new Error("Couldn't find location for uniform ".concat(e));return n}},{key:"getAttributeLocation",value:function(e){return this.context.getAttribLocation(this.program,e)}},{key:"dispose",value:function(){this.vs&&(this.context.deleteShader(this.vs),this.vs=null),this.fs&&(this.context.deleteShader(this.fs),this.fs=null),this.program&&(this.context.deleteProgram(this.program),this.program=null)}}],[{key:"newColoredTextured",value:function(t){return new e(t,"\n         attribute vec4 ".concat(e.POSITION,";\n         attribute vec4 ").concat(e.COLOR,";\n         attribute vec2 ").concat(e.TEXCOORDS,";\n         uniform mat4 ").concat(e.MVP_MATRIX,";\n         varying vec4 v_color;\n         varying vec2 v_texCoords;\n \n         void main () {\n           v_color = ").concat(e.COLOR,";\n           v_texCoords = ").concat(e.TEXCOORDS,";\n           gl_Position = ").concat(e.MVP_MATRIX," * ").concat(e.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_color;\n         varying vec2 v_texCoords;\n         uniform sampler2D u_texture;\n \n         void main () {\n           gl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n         }\n       ")}},{key:"newTwoColoredTextured",value:function(t){return new e(t,"\n         attribute vec4 ".concat(e.POSITION,";\n         attribute vec4 ").concat(e.COLOR,";\n         attribute vec4 ").concat(e.COLOR2,";\n         attribute vec2 ").concat(e.TEXCOORDS,";\n         uniform mat4 ").concat(e.MVP_MATRIX,";\n         varying vec4 v_light;\n         varying vec4 v_dark;\n         varying vec2 v_texCoords;\n \n         void main () {\n           v_light = ").concat(e.COLOR,";\n           v_dark = ").concat(e.COLOR2,";\n           v_texCoords = ").concat(e.TEXCOORDS,";\n           gl_Position = ").concat(e.MVP_MATRIX," * ").concat(e.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_light;\n         varying LOWP vec4 v_dark;\n         varying vec2 v_texCoords;\n         uniform sampler2D u_texture;\n \n         void main () {\n           vec4 texColor = texture2D(u_texture, v_texCoords);\n           gl_FragColor.a = texColor.a * v_light.a;\n           gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n         }\n       ")}},{key:"newColored",value:function(t){return new e(t,"\n         attribute vec4 ".concat(e.POSITION,";\n         attribute vec4 ").concat(e.COLOR,";\n         uniform mat4 ").concat(e.MVP_MATRIX,";\n         varying vec4 v_color;\n \n         void main () {\n           v_color = ").concat(e.COLOR,";\n           gl_Position = ").concat(e.MVP_MATRIX," * ").concat(e.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_color;\n \n         void main () {\n           gl_FragColor = v_color;\n         }\n       ")}}]),e}();t.Shader=s,s.MVP_MATRIX="u_projTrans",s.POSITION="a_position",s.COLOR="a_color",s.COLOR2="a_color2",s.TEXCOORDS="a_texCoords",s.SAMPLER="u_texture",s.NORMAL="a_normal",s.TANGENT="a_tangent",s.BINORMAL="a_binormal",s.BONEWEIGHT="a_boneWeight"},2987:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeRenderer=t.ShapeType=void 0;var s,a=n(1514),o=n(1858),u=n(8606),l=n(2283);!function(e){e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Filled=4]="Filled"}(s=t.ShapeType||(t.ShapeType={}));var h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10920;if(i(this,e),this.isDrawing=!1,this.shapeType=s.Filled,this.color=new u.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new l.Vector2,this.projectionValues=new Float32Array(16),n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=t,this.mesh=new a.Mesh(t,[new a.Position2Attribute,new a.ColorAttribute],n,0);var r=this.context;this.srcColorBlend=r.SRC_ALPHA,this.srcAlphaBlend=r.ONE,this.dstBlend=r.ONE_MINUS_SRC_ALPHA,this.shader=o.Shader.newColored(r)}return r(e,[{key:"setProjection",value:function(e){this.projectionValues=e}},{key:"begin",value:function(){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.vertexIndex=0,this.isDrawing=!0,this.shader.bind(),this.shader.setUniform4x4f(o.Shader.MVP_MATRIX,this.projectionValues);var e=this.context;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}},{key:"setBlendMode",value:function(e,t,n){(this.srcColorBlend=e,this.srcAlphaBlend=t,this.dstBlend=n,this.isDrawing)&&(this.flush(),this.context.blendFuncSeparate(e,n,t,n))}},{key:"setColor",value:function(e){this.color.setFromColor(e)}},{key:"setColorWith",value:function(e,t,n,i){this.color.set(e,t,n,i)}},{key:"point",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.check(s.Point,1),null===n&&(n=this.color),this.vertex(e,t,n)}},{key:"line",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.check(s.Line,2),null===r&&(r=this.color),this.vertex(e,t,r),this.vertex(n,i,r)}},{key:"triangle",value:function(e,t,n,i,r,a,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.check(e?s.Filled:s.Line,3),null===u&&(u=this.color),null===l&&(l=this.color),null===h&&(h=this.color),e?(this.vertex(t,n,u),this.vertex(i,r,l),this.vertex(a,o,h)):(this.vertex(t,n,u),this.vertex(i,r,l),this.vertex(i,r,u),this.vertex(a,o,l),this.vertex(a,o,u),this.vertex(t,n,l))}},{key:"quad",value:function(e,t,n,i,r,a,o,u,l){var h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null;this.check(e?s.Filled:s.Line,3),null===h&&(h=this.color),null===c&&(c=this.color),null===f&&(f=this.color),null===d&&(d=this.color),e?(this.vertex(t,n,h),this.vertex(i,r,c),this.vertex(a,o,f),this.vertex(a,o,f),this.vertex(u,l,d),this.vertex(t,n,h)):(this.vertex(t,n,h),this.vertex(i,r,c),this.vertex(i,r,c),this.vertex(a,o,f),this.vertex(a,o,f),this.vertex(u,l,d),this.vertex(u,l,d),this.vertex(t,n,h))}},{key:"rect",value:function(e,t,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.quad(e,t,n,t+i,n,t+i,n+r,t,n+r,s,s,s,s)}},{key:"rectLine",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.check(e?s.Filled:s.Line,8),null===o&&(o=this.color);var u=this.tmp.set(r-n,t-i);u.nor(),a*=.5;var l=u.x*a,h=u.y*a;e?(this.vertex(t+l,n+h,o),this.vertex(t-l,n-h,o),this.vertex(i+l,r+h,o),this.vertex(i-l,r-h,o),this.vertex(i+l,r+h,o),this.vertex(t-l,n-h,o)):(this.vertex(t+l,n+h,o),this.vertex(t-l,n-h,o),this.vertex(i+l,r+h,o),this.vertex(i-l,r-h,o),this.vertex(i+l,r+h,o),this.vertex(t+l,n+h,o),this.vertex(i-l,r-h,o),this.vertex(t-l,n-h,o))}},{key:"x",value:function(e,t,n){this.line(e-n,t-n,e+n,t+n),this.line(e-n,t+n,e+n,t-n)}},{key:"polygon",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n<3)throw new Error("Polygon must contain at least 3 vertices");this.check(s.Line,2*n),null===i&&(i=this.color),n<<=1;for(var r=e[t<<=1],a=e[t+1],o=t+n,u=t,l=t+n-2;u<l;u+=2){var h=e[u],c=e[u+1],f=0,d=0;u+2>=o?(f=r,d=a):(f=e[u+2],d=e[u+3]),this.vertex(h,c,i),this.vertex(f,d,i)}}},{key:"circle",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0===a&&(a=Math.max(1,6*u.MathUtils.cbrt(i)|0)),a<=0)throw new Error("segments must be > 0.");null===r&&(r=this.color);var o=2*u.MathUtils.PI/a,l=Math.cos(o),h=Math.sin(o),c=i,f=0;if(e){this.check(s.Filled,3*a+3),a--;for(var d=0;d<a;d++){this.vertex(t,n,r),this.vertex(t+c,n+f,r);var v=c;c=l*c-h*f,f=h*v+l*f,this.vertex(t+c,n+f,r)}this.vertex(t,n,r),this.vertex(t+c,n+f,r)}else{this.check(s.Line,2*a+2);for(var p=0;p<a;p++){this.vertex(t+c,n+f,r);var g=c;c=l*c-h*f,f=h*g+l*f,this.vertex(t+c,n+f,r)}this.vertex(t+c,n+f,r)}c=i,f=0,this.vertex(t+c,n+f,r)}},{key:"curve",value:function(e,t,n,i,r,a,o,u,l){var h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.check(s.Line,2*l+2),null===h&&(h=this.color);for(var c=1/l,f=c*c,d=c*c*c,v=3*c,p=3*f,g=6*f,m=6*d,y=e-2*n+r,b=t-2*i+a,M=3*(n-r)-e+o,x=3*(i-a)-t+u,_=e,w=t,k=(n-e)*v+y*p+M*d,T=(i-t)*v+b*p+x*d,E=y*g+M*m,L=b*g+x*m,A=M*m,S=x*m;l-- >0;)this.vertex(_,w,h),_+=k,w+=T,k+=E,T+=L,E+=A,L+=S,this.vertex(_,w,h);this.vertex(_,w,h),this.vertex(o,u,h)}},{key:"vertex",value:function(e,t,n){var i=this.vertexIndex,r=this.mesh.getVertices();r[i++]=e,r[i++]=t,r[i++]=n.r,r[i++]=n.g,r[i++]=n.b,r[i++]=n.a,this.vertexIndex=i}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();var e=this.context;e.disable(e.BLEND),this.isDrawing=!1}},{key:"flush",value:function(){0!==this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)}},{key:"check",value:function(e,t){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType===e){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<t))return;this.flush()}else this.flush(),this.shapeType=e}},{key:"dispose",value:function(){this.mesh.dispose()}}]),e}();t.ShapeRenderer=h},5297:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Sprite=void 0;var s=n(8606),a=n(2283),o=function(){function e(t){i(this,e),this.region=t,this.dirty=!1,this.position=new a.Vector2(0,0),this.size=new a.Vector2(0,0),this.origin=new a.Vector2(0,0),this.scale=new a.Vector2(1,1),this.color=new s.Color(1,1,1,1),this.rotation=0,this.vertices=new Float32Array(48),this.bounds={x:0,y:0,width:0,height:0},this.setSize(t.width,t.height),this.setOrigin(t.width/2,t.height/2)}return r(e,[{key:"set",value:function(e){this.region=e.region,this.position.setVector(e.position),this.size.setVector(e.size),this.origin.setVector(e.origin),this.rotation=e.rotation,this.scale.setVector(e.scale),this.color.setFromColor(e.color),this.dirty=!0}},{key:"setBounds",value:function(e,t,n,i){this.setPosition(e,t),this.setSize(e,t),this.dirty=!0}},{key:"setSize",value:function(e,t){this.size.set(e,t),this.dirty=!0}},{key:"setPosition",value:function(e,t){this.position.set(e,t),this.dirty=!0}},{key:"setOriginBasedPosition",value:function(e,t){this.setPosition(e-this.origin.x,t-this.origin.y)}},{key:"setX",value:function(e){this.position.x=e,this.dirty=!0}},{key:"setY",value:function(e){this.position.y=e,this.dirty=!0}},{key:"setCenterX",value:function(e){this.setX(e-this.size.x/2)}},{key:"setCenterY",value:function(e){this.setY(e-this.size.y/2)}},{key:"setCenter",value:function(e,t){this.setPosition(e-this.size.x/2,t-this.size.y/2)}},{key:"translateX",value:function(e){this.translate(e,0)}},{key:"translateY",value:function(e){this.translate(0,e)}},{key:"translate",value:function(e,t){this.position.add(e,t),this.dirty=!0}},{key:"setColor",value:function(e){this.color.setFromColor(e),this.dirty=!0}},{key:"setAlpha",value:function(e){this.color.a=e,this.dirty=!0}},{key:"setOrigin",value:function(e,t){this.origin.set(e,t),this.dirty=!0}},{key:"setOriginCenter",value:function(){this.origin.set(this.size.x/2,this.size.y/2),this.dirty=!0}},{key:"setRotation",value:function(e){this.rotation=e,this.dirty=!0}},{key:"getRotation",value:function(){return this.rotation}},{key:"rotate",value:function(e){0!==e&&(this.rotation+=e,this.dirty=!0)}},{key:"setScale",value:function(e,t){this.scale.set(e,t),this.dirty=!0}},{key:"applyScale",value:function(e){this.scale.scale(e),this.dirty=!0}},{key:"getVertices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.vertices,n=this.region;if(!this.dirty)return t;var i=this.position.x,r=this.position.y,s=this.size.x,a=this.size.y,o=this.origin.x,u=this.origin.y,l=this.rotation,h=this.scale.x,c=this.scale.y,f=n.u,d=n.v,v=n.u2,p=n.v2,g=this.color,m=n.rotated,y=s/n.originalWidth,b=a/n.originalHeight,M=n.width*y,x=n.height*b;if(i=i+n.offsetX*y,r=e?r+a-n.offsetY*b-x:r+n.offsetY*b,e){var _=d;d=p,p=_}var w=-o,k=(s=M)-o,T=s-o,E=-o,L=-u,A=-u,S=(a=x)-u,C=a-u;if(1!==h&&(w*=h,k*=h,T*=h,E*=h),1!==c&&(L*=c,A*=c,S*=c,C*=c),0!==l){var P=Math.cos(l),I=Math.sin(l),R=I*w+P*L,O=I*k+P*A,N=I*T+P*S,F=I*E+P*C;w=P*w-I*L,k=P*k-I*A,T=P*T-I*S,E=P*E-I*C,L=R,A=O,S=N,C=F}w+=i+o,k+=i+o,T+=i+o,E+=i+o,L+=r+u,A+=r+u,S+=r+u,C+=r+u;var U=f,V=d,D=v,B=p,G=D,z=V,W=U,j=B;m&&(e?(U=f,V=p,D=v,B=d,G=f,z=d,W=v,j=p):(U=v,V=d,D=f,B=p,G=v,z=p,W=f,j=d));var H=0;return t[H++]=w,t[H++]=L,t[H++]=g.r,t[H++]=g.g,t[H++]=g.b,t[H++]=g.a,t[H++]=U,t[H++]=V,t[H++]=0,t[H++]=0,t[H++]=0,t[H++]=0,t[H++]=k,t[H++]=A,t[H++]=g.r,t[H++]=g.g,t[H++]=g.b,t[H++]=g.a,t[H++]=G,t[H++]=z,t[H++]=0,t[H++]=0,t[H++]=0,t[H++]=0,t[H++]=T,t[H++]=S,t[H++]=g.r,t[H++]=g.g,t[H++]=g.b,t[H++]=g.a,t[H++]=D,t[H++]=B,t[H++]=0,t[H++]=0,t[H++]=0,t[H++]=0,t[H++]=E,t[H++]=C,t[H++]=g.r,t[H++]=g.g,t[H++]=g.b,t[H++]=g.a,t[H++]=W,t[H++]=j,t[H++]=0,t[H++]=0,t[H++]=0,t[47]=0,t}},{key:"getBoundingRectangle",value:function(){var e=this.vertices,t=e[0],n=e[1],i=e[0],r=e[1];return t=(t=(t=t>e[12]?e[12]:t)>e[24]?e[24]:t)>e[36]?e[36]:t,i=(i=(i=i<e[12]?e[12]:i)<e[24]?e[24]:i)<e[36]?e[36]:i,n=(n=(n=n>e[13]?e[13]:n)>e[25]?e[25]:n)>e[37]?e[37]:n,r=(r=(r=r<e[13]?e[13]:r)<e[25]?e[25]:r)<e[37]?e[37]:r,this.bounds.x=t,this.bounds.y=n,this.bounds.width=i-t,this.bounds.height=r-n,this.bounds}},{key:"draw",value:function(e){e.drawVertices(this.region.texture,this.getVertices(e.yDown))}},{key:"drawWithAlpha",value:function(e,t){var n=this.getColor().a;this.setAlpha(n*t),this.draw(e),this.setAlpha(n)}},{key:"getX",value:function(){return this.position.x}},{key:"getY",value:function(){return this.position.y}},{key:"getWidth",value:function(){return this.size.x}},{key:"getHeight",value:function(){return this.size.y}},{key:"getOriginX",value:function(){return this.origin.x}},{key:"getOriginY",value:function(){return this.origin.y}},{key:"getScaleX",value:function(){return this.scale.x}},{key:"getScaleY",value:function(){return this.scale.y}},{key:"getColor",value:function(){return this.color}}]),e}();t.Sprite=o},7139:function(e,t,n){"use strict";var i,r=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Texture=t.TextureWrap=t.TextureFilter=void 0,function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.MipMap=9987]="MipMap",e[e.MipMapNearestNearest=9984]="MipMapNearestNearest",e[e.MipMapLinearNearest=9985]="MipMapLinearNearest",e[e.MipMapNearestLinear=9986]="MipMapNearestLinear",e[e.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=t.TextureFilter||(t.TextureFilter={})),function(e){e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.ClampToEdge=33071]="ClampToEdge",e[e.Repeat=10497]="Repeat"}(t.TextureWrap||(t.TextureWrap={}));var a=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,e),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.width=0,this.height=0,this._image=n,this.context=t,this.useMipMaps=i,this.restore(),this.width=n.width,this.height=n.height}return s(e,[{key:"getImage",value:function(){return this._image}},{key:"getWebGLTexture",value:function(){return this.texture}},{key:"setFilters",value:function(t,n){var i=this.context;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e.validateMagFilter(n))}},{key:"setWraps",value:function(e,t){var n=this.context;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t)}},{key:"update",value:function(t){var n=this.context;this.texture||(this.texture=this.context.createTexture()),this.bind(),e.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this._image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t?n.LINEAR_MIPMAP_LINEAR:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),t&&n.generateMipmap(n.TEXTURE_2D)}},{key:"restore",value:function(){this.texture=null,this.update(this.useMipMaps)}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.context;this.boundUnit=e,t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)}},{key:"unbind",value:function(){var e=this.context;e.activeTexture(e.TEXTURE0+this.boundUnit),e.bindTexture(e.TEXTURE_2D,null)}},{key:"dispose",value:function(){this.context.deleteTexture(this.texture)}}],[{key:"createWhiteTexture",value:function(t){return new e(t,new ImageData(new Uint8ClampedArray([255,255,255,255]),1,1))}},{key:"load",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){var s=new Image;s.onload=function(){r(new e(t,s,i))},s.src=n}))}},{key:"validateMagFilter",value:function(e){switch(e){case i.MipMap:case i.MipMapLinearLinear:case i.MipMapLinearNearest:case i.MipMapNearestLinear:case i.MipMapNearestNearest:return i.Linear;default:return e}}}]),e}();t.Texture=a,a.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1},9396:function(e,t,n){"use strict";var i=n(7061).default,r=n(7424).default,s=n(4704).default,a=n(6690).default,o=n(9728).default,u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;var l=n(7139),h=n(859),c=n(8606),f=function(){function e(t,n){a(this,e),this.pages=t,this.regions=n}return o(e,[{key:"dispose",value:function(){var e,t=s(this.pages);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}}},{key:"getPages",value:function(){return this.pages}},{key:"getRegions",value:function(){return this.regions}},{key:"findRegion",value:function(e,t){for(var n=0;n<this.regions.length;n++){var i=this.regions[n];if(i.name===e&&(void 0===t||i.index===t))return i}return null}},{key:"findRegions",value:function(e){return this.regions.filter((function(t){return t.name===e})).sort((function(e,t){return e.index-t.index}))}}],[{key:"load",value:function(t,n,s){return u(this,void 0,void 0,i().mark((function a(){var o,u,f,d,v,p,g,m,y,b,M,x,_,w,k,T,E,L,A,S,C,P,I,R,O,N,F,U,V,D,B,G,z,W,j,H,X,Y,q,Z,K;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch(n).then((function(e){return e.text()}));case 2:o=i.sent,u=[],f=[],d=[],p=o.split(/\r?\n/),g=0;case 8:if(void 0!==(y=p[g])){i.next=12;break}return i.abrupt("break",16);case 12:0===y.trim().length?v=null:v?(S=y,g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),C="true"===m[0],g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),P=parseInt(m[0],10),I=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),R=parseInt(m[0],10),O=parseInt(m[1],10),N={name:S,rotate:C,left:P,top:I,width:R,height:O,page:v},g++,y=p[g],4===(m=y.split(":")[1].split(",").map((function(e){return e.trim()}))).length&&(N.splits=m.map((function(e){return parseInt(e,10)})),g++,y=p[g],4===(m=y.split(":")[1].split(",").map((function(e){return e.trim()}))).length&&(N.pads=m.map((function(e){return parseInt(e,10)})),g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})))),N.originalWidth=parseInt(m[0],10),N.originalHeight=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),N.offsetX=parseInt(m[0],10),N.offsetY=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),N.index=parseInt(m[0],10),d.push(N)):(b=(0,c.concatAndResolveUrl)(n,"../".concat(y)),g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),M=parseInt(m[0],10),x=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),_=m[0],g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),w=r(m,2),k=w[0],T=w[1],g++,y=p[g],m=y.split(":")[1].split(",").map((function(e){return e.trim()})),E=m[0],L=l.TextureWrap.ClampToEdge,A=l.TextureWrap.ClampToEdge,"x"===E?L=l.TextureWrap.Repeat:"y"===E?A=l.TextureWrap.Repeat:"xy"===E&&(L=l.TextureWrap.Repeat,A=l.TextureWrap.Repeat),v={file:b,width:M,height:x,format:_,mipMaps:"Nearest"!==k&&"Linear"!==k,min:k,max:T,direction:E,repeatX:L,repeatY:A},u.push(v)),g++,i.next=8;break;case 16:F=0,U=u;case 17:if(!(F<U.length)){i.next=27;break}return V=U[F],i.next=21,l.Texture.load(t,V.file,s);case 21:V.texture=i.sent,V.invTexWidth=1/V.texture.width,V.invTexHeight=1/V.texture.height;case 24:F++,i.next=17;break;case 27:for(D=[],B=0,G=d;B<G.length;B++)z=G[B],W=z.left,j=z.top,H=z.rotate?z.height:z.width,X=z.rotate?z.width:z.height,Y=z.page,q=Y.texture,Z=Y.invTexWidth,K=Y.invTexHeight,D.push(new h.TextureRegion(q,W,j,H,X,z,Z,K,z.rotate));return i.abrupt("return",new e(f,D));case 30:case"end":return i.stop()}}),a)})))}}]),e}();t.TextureAtlas=f},859:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextureRegion=void 0;var s=n(1981),a=function(){function e(t,n,r,a,o,u,l,h){var c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];i(this,e),this.name=null,this.index=0,this.texture=null,this.regionX=0,this.regionY=0,this.width=0,this.height=0,this.invTexWidth=0,this.invTexHeight=0,this.originalWidth=0,this.originalHeight=0,this.offsetX=0,this.offsetY=0,this.u=0,this.v=0,this.u2=0,this.v2=0,this.rotated=!1,this.tmpTransform=new s.Affine2,l&&h||(l=1/t.width,h=1/t.height);var f=n*l,d=(r+o)*h,v=(n+a)*l,p=r*h;for(var g in this.texture=t,this.regionX=n,this.regionY=r,this.width=a,this.height=o,this.originalWidth=a,this.originalHeight=o,this.offsetX=0,this.offsetY=0,this.u=f,this.v=d,this.u2=v,this.v2=p,this.rotated=c,u)this[g]=u[g]}return r(e,[{key:"draw",value:function(e,t,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,h=this.originalWidth,c=this.originalHeight,f=this.offsetX,d=this.offsetY,v=i/h,p=r/c,g=this.width*v,m=this.height*p,y=t+f*v,b=0;s-=y-t,a-=(b=e.yDown?n+r-d*p-m:n+d*p)-n,e.draw(this.texture,y,b,g,m,s,a,o,u,l,this.u,this.v,this.u2,this.v2,this.rotated)}},{key:"drawTransformed",value:function(e,t,n,i){var r=this.originalWidth,s=this.originalHeight,a=this.offsetX,o=this.offsetY,u=t/r,l=n/s,h=this.width*u,c=this.height*l,f=a*u,d=0;d=e.yDown?n-o*l-c:o*l,this.tmpTransform.set(i),this.tmpTransform.translate(f,d),e.drawTransformed(this.texture,h,c,this.tmpTransform,this.u,this.v,this.u2,this.v2,this.rotated)}}],[{key:"splitTexture",value:function(t,n,i){for(var r=t.width/n,s=t.height/i,a=[],o=0;o<i;o++)for(var u=0;u<n;u++)a.push(new e(t,u*r,o*s,r,s,{}));return a}}]),e}();t.TextureRegion=a},8606:function(e,t,n){"use strict";var i,r=n(1588).default,s=n(3808).default,a=n(1655).default,o=n(6389).default,u=n(6690).default,l=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.concatAndResolveUrl=t.ArrayMap=t.copyArray=t.createStage=t.pointInRect=t.resizeCanvas=t.createGameLoop=t.WindowedMean=t.TimeKeeper=t.Pools=t.FlushablePool=t.Pool=t.Utils=t.PowOut=t.Pow=t.Interpolation=t.MathUtils=t.Color=t.StringSet=t.IntSet=t.Align=void 0;var h=function(){function e(){u(this,e)}return l(e,null,[{key:"isLeft",value:function(e){return 0!==(e&this.left)}},{key:"isRight",value:function(e){return 0!==(e&this.right)}},{key:"isTop",value:function(e){return 0!==(e&this.top)}},{key:"isBottom",value:function(e){return 0!==(e&this.bottom)}},{key:"isCenterVertical",value:function(e){return 0===(e&this.top)&&0===(e&this.bottom)}},{key:"isCenterHorizontal",value:function(e){return 0===(e&this.left)&&0===(e&this.right)}}]),e}();t.Align=h,i=h,h.center=1,h.top=2,h.bottom=4,h.left=8,h.right=16,h.topLeft=i.top|i.left,h.topRight=i.top|i.right,h.bottomLeft=i.bottom|i.left,h.bottomRight=i.bottom|i.right;var c=function(){function e(){u(this,e),this.array=new Array}return l(e,[{key:"add",value:function(e){var t=this.contains(e);return this.array[0|e]=0|e,!t}},{key:"contains",value:function(e){return void 0!==this.array[0|e]}},{key:"remove",value:function(e){this.array[0|e]=void 0}},{key:"clear",value:function(){this.array.length=0}}]),e}();t.IntSet=c;var f=function(){function e(){u(this,e),this.entries={},this.size=0}return l(e,[{key:"add",value:function(e){var t=this.entries[e];return this.entries[e]=!0,!t&&(this.size++,!0)}},{key:"addAll",value:function(e){for(var t=this.size,n=0,i=e.length;n<i;n++)this.add(e[n]);return t!==this.size}},{key:"contains",value:function(e){return this.entries[e]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),e}();t.StringSet=f;var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;u(this,e),this.r=t,this.g=n,this.b=i,this.a=r}return l(e,[{key:"unsafeSet",value:function(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i}},{key:"set",value:function(e,t,n,i){return this.r=e,this.g=t,this.b=n,this.a=i,this.clamp()}},{key:"setFromColor",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}},{key:"setFromString",value:function(e){return e="#"===e.charAt(0)?e.substring(1):e,this.r=parseInt(e.substring(0,2),16)/255,this.g=parseInt(e.substring(2,4),16)/255,this.b=parseInt(e.substring(4,6),16)/255,this.a=8!==e.length?1:parseInt(e.substring(6,8),16)/255,this}},{key:"add",value:function(e,t,n,i){return this.r+=e,this.g+=t,this.b+=n,this.a+=i,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}},{key:"lerp",value:function(e,t){return this.r+=t*(e.r-this.r),this.g+=t*(e.g-this.g),this.b+=t*(e.b-this.b),this.a+=t*(e.a-this.a),this.clamp()}},{key:"mul",value:function(e,t,n,i){return this.r*=e,this.g*=t,this.b*=n,this.a*=i,this.clamp()}},{key:"toIntBits",value:function(){return 255*this.a<<24|255*this.b<<16|255*this.g<<8|255*this.r}},{key:"equals",value:function(e){return this===e||this.toIntBits()===e.toIntBits()}}],[{key:"rgba8888ToColor",value:function(e,t){e.r=((4278190080&t)>>>24)/255,e.g=((16711680&t)>>>16)/255,e.b=((65280&t)>>>8)/255,e.a=(255&t)/255}},{key:"rgb888ToColor",value:function(e,t){e.r=((16711680&t)>>>16)/255,e.g=((65280&t)>>>8)/255,e.b=(255&t)/255}},{key:"fromString",value:function(t){return(new e).setFromString(t)}}]),e}();t.Color=d,d.WHITE=new d(1,1,1,1),d.RED=new d(1,0,0,1),d.GREEN=new d(0,1,0,1),d.BLUE=new d(0,0,1,1),d.MAGENTA=new d(1,0,1,1);var v=function(){function e(){u(this,e)}return l(e,null,[{key:"clamp",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"cosDeg",value:function(t){return Math.cos(t*e.degRad)}},{key:"sinDeg",value:function(t){return Math.sin(t*e.degRad)}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}},{key:"toInt",value:function(e){return e>0?Math.floor(e):Math.ceil(e)}},{key:"cbrt",value:function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}},{key:"randomTriangular",value:function(t,n){return e.randomTriangularWith(t,n,.5*(t+n))}},{key:"randomTriangularWith",value:function(e,t,n){var i=Math.random(),r=t-e;return i<=(n-e)/r?e+Math.sqrt(i*r*(n-e)):t-Math.sqrt((1-i)*r*(t-n))}},{key:"isPowerOfTwo",value:function(e){return e&&0===(e&e-1)}},{key:"isEqual",value:function(t,n){return Math.abs(t-n)<=e.FLOAT_ROUNDING_ERROR}},{key:"isZero",value:function(t){return Math.abs(t)<=e.FLOAT_ROUNDING_ERROR}}]),e}();t.MathUtils=v,v.FLOAT_ROUNDING_ERROR=1e-6,v.PI=3.1415927,v.PI2=2*v.PI,v.radiansToDegrees=180/v.PI,v.radDeg=v.radiansToDegrees,v.degreesToRadians=v.PI/180,v.degRad=v.degreesToRadians;var p=function(){function e(){u(this,e)}return l(e,[{key:"apply",value:function(e,t,n){return e+(t-e)*this.applyInternal(n)}}]),e}();t.Interpolation=p;var g=function(e){a(n,e);var t=o(n);function n(e){var i;return u(this,n),(i=t.call(this)).power=2,i.power=e,i}return l(n,[{key:"applyInternal",value:function(e){return e<=.5?Math.pow(2*e,this.power)/2:Math.pow(2*(e-1),this.power)/(this.power%2===0?-2:2)+1}}]),n}(p);t.Pow=g;var m=function(e){a(n,e);var t=o(n);function n(){return u(this,n),t.apply(this,arguments)}return l(n,[{key:"applyInternal",value:function(e){return Math.pow(e-1,this.power)*(this.power%2===0?-1:1)+1}}]),n}(g);t.PowOut=m;var y=function(){function e(){u(this,e)}return l(e,null,[{key:"arrayCopy",value:function(e,t,n,i,r){for(var s=t,a=i;s<t+r;s++,a++)n[a]=e[s]}},{key:"arrayFill",value:function(e,t,n,i){for(var r=t;r<n;r++)e[r]=i}},{key:"setArraySize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.length;if(i===t)return e;if(e.length=t,i<t)for(var r=i;r<t;r++)e[r]=n;return e}},{key:"ensureArrayCapacity",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.length>=n?t:e.setArraySize(t,n,i)}},{key:"newArray",value:function(e,t){for(var n=new Array(e),i=0;i<e;i++)n[i]=t;return n}},{key:"newFloatArray",value:function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var n=new Array(t),i=0;i<n.length;i++)n[i]=0;return n}},{key:"newShortArray",value:function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var n=new Array(t),i=0;i<n.length;i++)n[i]=0;return n}},{key:"toFloatArray",value:function(t){return e.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}},{key:"toSinglePrecision",value:function(t){return e.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}},{key:"contains",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}},{key:"enumValue",value:function(e,t){return e[t[0].toUpperCase()+t.slice(1)]}},{key:"getHashCodeOfString",value:function(e){var t,n=0;if(0===this.length)return n;for(t=0;t<this.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}}]),e}();t.Utils=y,y.SUPPORTS_TYPED_ARRAYS="undefined"!==typeof Float32Array;var b=function(){function e(t){u(this,e),this.items=new Array,this.instantiator=t||function(){return{}}}return l(e,[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(e){(null===e||void 0===e?void 0:e.reset)&&e.reset(),this.items.push(e)}},{key:"freeAll",value:function(e){for(var t=0;t<e.length;t++)this.free(e[t])}},{key:"clear",value:function(){this.items.length=0}}]),e}();t.Pool=b;var M=function(e){a(n,e);var t=o(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).obtained=new Array,i}return l(n,[{key:"obtain",value:function(){var e=r(s(n.prototype),"obtain",this).call(this);return this.obtained.push(e),e}},{key:"flush",value:function(){r(s(n.prototype),"freeAll",this).call(this,this.obtained),this.obtained.length=0}},{key:"free",value:function(e){var t=this.obtained.indexOf(e);t>-1&&this.obtained.splice(t,1),r(s(n.prototype),"free",this).call(this,e)}},{key:"freeAll",value:function(e){for(var t=0;t<e.length;t++){var i=this.obtained.indexOf(e[t]);i>=0&&this.obtained.splice(i,1)}r(s(n.prototype),"freeAll",this).call(this,e)}}]),n}(b);t.FlushablePool=M;var x=function(){function e(){u(this,e)}return l(e,null,[{key:"free",value:function(e,t){this.pools[e]&&this.pools[e].free(t)}},{key:"freeAll",value:function(e,t){this.pools[e]&&this.pools[e].freeAll(t)}},{key:"get",value:function(e,t){return this.pools[e]||(this.pools[e]=new b(t)),this.pools[e]}},{key:"set",value:function(e,t){this.pools[e]=t}},{key:"obtain",value:function(e,t){return this.get(e,t).obtain()}}]),e}();t.Pools=x,x.pools={};var _=function(){function e(){u(this,e),this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return l(e,[{key:"update",value:function(){var e=Date.now()/1e3;this.delta=e-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=e,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),e}();t.TimeKeeper=_;var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;u(this,e),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return l(e,[{key:"hasEnoughData",value:function(){return this.addedValues>=this.values.length}},{key:"addValue",value:function(e){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=e,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}},{key:"getMean",value:function(){if(this.hasEnoughData()){if(this.dirty){for(var e=0,t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0}}]),e}();t.WindowedMean=w;t.createGameLoop=function(e){var t,n=Date.now(),i=0,r=!0,s=0,a=0;function o(){if(r){var u=Date.now()-n;n=Date.now(),s++,(a+=u)>=1e3&&(i=s,s=0,a-=1e3),t=requestAnimationFrame(o),e(u/1e3)}}return o(),{isRunning:function(){return r},start:function(){r||(r=!0,o())},stop:function(){t&&cancelAnimationFrame(t),r=!1},getFps:function(){return i}}};t.resizeCanvas=function(e,t){var n=t||window.devicePixelRatio||1,i=e.clientWidth*n,r=e.clientHeight*n;return e.width===i&&e.height===r||(e.width=i,e.height=r),[i,r]};t.pointInRect=function(e,t,n,i,r,s){return e>n&&e<n+r&&t>i&&t<i+s};t.createStage=function(e){e=Object.assign(Object.assign({},{hidden:!1,info:!0}),e);var t=document.createElement("div");t.setAttribute("style","position:fixed;top:0;left:0;right:0;bottom:0;"),e.wrapperClassName&&(t.className=e.wrapperClassName),e.hidden&&(t.style.display="none");var n=document.createElement("canvas");n.setAttribute("style","width:100%;height:100%;");var i=document.createElement("div");return i.setAttribute("style","position:absolute;top:1em;left:1em;color:white"),e.info||(i.style.display="none"),t.appendChild(n),t.appendChild(i),document.body.appendChild(t),{getCanvas:function(){return n},getInfo:function(){return i},show:function(){return t.style.display="block"},hide:function(){return t.style.display="none"},cleanup:function(){return document.body.removeChild(t)}}};t.copyArray=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length,s=0;s<r;s++)t[n+s]=e[i+s]};var k=function(){function e(){u(this,e),this.keys=[],this.values=[],this.size=0}return l(e,[{key:"set",value:function(e,t){var n=this.indexOfKey(e);return-1===n&&(n=this.size++),this.keys[n]=e,this.values[n]=t,n}},{key:"get",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.size-1;n>=0;n--)if(this.keys[n]===e)return this.values[n];return t}},{key:"indexOfKey",value:function(e){for(var t=0,n=this.size;t<n;t++)if(this.keys[t]===e)return t;return-1}},{key:"removeKey",value:function(e){for(var t=0,n=this.size;t<n;t++)this.keys[t]===e&&this.removeIndex(t)}},{key:"removeIndex",value:function(e){if(e>=this.size)throw new Error("index out of bound");this.size--,this.keys.splice(e,1),this.values.splice(e,1)}},{key:"clear",value:function(){this.keys.length=0,this.values.length=0,this.size=0}}]),e}();t.ArrayMap=k,t.concatAndResolveUrl=function(e,t){for(var n=e.split("/"),i=t.split("/"),r=[],s=0,a=n.length;s<a;s++)if(".."===n[s])r.pop();else{if("."===n[s])continue;r.push(n[s])}for(var o=0,u=i.length;o<u;o++)if(".."===i[o])r.pop();else{if("."===i[o])continue;r.push(i[o])}return r.join("/")}},2283:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,e),this.x=0,this.y=0,this.x=t,this.y=n}return r(e,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setVector",value:function(e){return this.set(e.x,e.y)}},{key:"add",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addVector",value:function(e){return this.add(e.x,e.y)}},{key:"sub",value:function(e,t){return this.add(-e,-t)}},{key:"subVector",value:function(e){return this.sub(e.x,e.y)}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"distanceSqr",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSqr(e))}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"len2",value:function(){return this.x*this.x+this.y*this.y}},{key:"len",value:function(){return Math.sqrt(this.len2())}},{key:"nor",value:function(){var e=this.len();return 0!==e&&(this.x/=e,this.y/=e),this}},{key:"rotateRad",value:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.x*t-this.y*n,r=this.x*n+this.y*t;return this.x=i,this.y=r,this}},{key:"rotate",value:function(e){return this.rotateRad(e*Math.PI/180)}},{key:"cpy",value:function(){return new e(this.x,this.y)}},{key:"mul",value:function(e){var t=this.x*e.val[0]+this.y*e.val[3]+e.val[6],n=this.x*e.val[1]+this.y*e.val[4]+e.val[7];return this.x=t,this.y=n,this}},{key:"lerp",value:function(e,t){var n=1-t;return this.x=this.x*n+e.x*t,this.y=this.y*n+e.y*t,this}}]),e}();t.Vector2=s},7811:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Vector3=void 0;var s=n(6239),a=n(4995),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,e),this.x=0,this.y=0,this.z=0,this.x=t,this.y=n,this.z=r}return r(e,[{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"dst2",value:function(e){var t=e.x-this.x,n=e.y-this.y,i=e.z-this.z;return t*t+n*n+i*i}},{key:"setFrom",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"normalize",value:function(){var e=this.length();return 0===e||(e=1/e,this.x*=e,this.y*=e,this.z*=e),this}},{key:"cross",value:function(e){return this.set(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}},{key:"multiply",value:function(e){var t=e.values;return this.set(this.x*t[a.Matrix4.M00]+this.y*t[a.Matrix4.M01]+this.z*t[a.Matrix4.M02]+t[a.Matrix4.M03],this.x*t[a.Matrix4.M10]+this.y*t[a.Matrix4.M11]+this.z*t[a.Matrix4.M12]+t[a.Matrix4.M13],this.x*t[a.Matrix4.M20]+this.y*t[a.Matrix4.M21]+this.z*t[a.Matrix4.M22]+t[a.Matrix4.M23])}},{key:"multiplyMat3",value:function(e){var t=e.val;return this.set(this.x*t[s.Matrix3.M00]+this.y*t[s.Matrix3.M01]+this.z*t[s.Matrix3.M02],this.x*t[s.Matrix3.M10]+this.y*t[s.Matrix3.M11]+this.z*t[s.Matrix3.M12],this.x*t[s.Matrix3.M20]+this.y*t[s.Matrix3.M21]+this.z*t[s.Matrix3.M22])}},{key:"project",value:function(e){var t=e.values,n=1/(this.x*t[a.Matrix4.M30]+this.y*t[a.Matrix4.M31]+this.z*t[a.Matrix4.M32]+t[a.Matrix4.M33]);return this.set((this.x*t[a.Matrix4.M00]+this.y*t[a.Matrix4.M01]+this.z*t[a.Matrix4.M02]+t[a.Matrix4.M03])*n,(this.x*t[a.Matrix4.M10]+this.y*t[a.Matrix4.M11]+this.z*t[a.Matrix4.M12]+t[a.Matrix4.M13])*n,(this.x*t[a.Matrix4.M20]+this.y*t[a.Matrix4.M21]+this.z*t[a.Matrix4.M22]+t[a.Matrix4.M23])*n)}},{key:"unproject",value:function(e,t,n,i,r,s){var a=this.x,o=this.y,u=this.z;return a-=n,o=s-o-1,o-=i,e.set(2*a/r-1,2*o/s-1,2*u-1),e.project(t),e}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"dotWithValue",value:function(e,t,n){return this.x*e+this.y*t+this.z*n}},{key:"rotate",value:function(t,n){return e.tmpMat.setToRotation(t,n),this.multiply(e.tmpMat)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"length2",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"distance",value:function(e){var t=e.x-this.x,n=e.y-this.y,i=e.z-this.z;return Math.sqrt(t*t+n*n+i*i)}},{key:"lerp",value:function(e,t){return this.x+=t*(e.x-this.x),this.y+=t*(e.y-this.y),this.z+=t*(e.z-this.z),this}},{key:"equals",value:function(e){return this===e||this.x===e.x&&this.y===e.y&&this.z===e.z}}]),e}();t.Vector3=o,o.X=new o(1,0,0),o.Y=new o(0,1,0),o.Z=new o(0,0,1),o.Zero=new o(0,0,0),o.tmpMat=new a.Matrix4},5533:function(e,t,n){"use strict";var i=n(7424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createViewport=void 0;var r=n(7459),s=n(8606);t.createViewport=function(e,t,n,a){var o,u={autoUpdate:!0,pixelRatio:void 0,crop:!0};(a=Object.assign(Object.assign({},u),a)).disablePremultipliedAlpha&&(o={premultipliedAlpha:!1}),o=Object.assign(Object.assign({},o),a.contextOption);var l=e.getContext("webgl2",o);l||(l=e.getContext("webgl",o));var h,c=[],f=a,d=f.autoUpdate,v=f.pixelRatio,p=f.crop,g={pixelRatio:v=v||window.devicePixelRatio||1,x:0,y:0,width:t,height:n,worldWidth:t,worldHeight:n},m=(0,s.resizeCanvas)(e,v),y=i(m,2),b=y[0],M=y[1],x=new r.OrthoCamera(t,n,b,M);d&&(h=function(e){_.update()},window.addEventListener("resize",h));var _={getViewportInfo:function(){return g},getCamera:function(){return x},addCamera:function(e){c.push(e)},getContext:function(){return l},getCanvas:function(){return e},update:function(){var r=(0,s.resizeCanvas)(e,v),a=i(r,2),o=a[0],u=a[1],h=t/n,f=o/u;if(p){var d,m;h<f?(m=u,d=u*h):(d=o,m=o/h);var y=(o-d)/2,b=(u-m)/2;g.x=y,g.y=b,g.width=d,g.height=m,l.viewport(y,b,d,m),x.setPosition(t/2,n/2),x.resize(t,n,d,m);for(var M=0,_=c;M<_.length;M++){var w=_[M];w.setPosition(t/2,n/2),w.resize(t,n,d,m)}}else{var k,T,E,L;g.x=0,g.y=0,g.width=o,g.height=u,l.viewport(0,0,o,u),h<f?(E=-((k=(T=n)*f)-t)/2,L=0):(E=0,L=-((T=(k=t)/f)-n)/2),x.setPosition(E+k/2,L+T/2),x.resize(k,T,o,u);for(var A=0,S=c;A<S.length;A++){var C=S[A];C.setPosition(E+k/2,L+T/2),C.resize(k,T,o,u)}}},cleanUp:function(){h&&window.removeEventListener("resize",h)}};return d&&_.update(),_}},4411:function(e,t,n){"use strict";var i=n(6690).default,r=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportInputHandler=void 0;var s=n(6964),a=n(2283),o=function(){function e(t){i(this,e),this.screenCoord=new a.Vector2,this.worldCoord=new a.Vector2,this.viewport=t,this.canvas=t.getCanvas(),this.inputHandler=new s.InputHandler(this.canvas)}return r(e,[{key:"isTouched",value:function(){return this.inputHandler.isTouched()}},{key:"cleanup",value:function(){this.inputHandler.cleanup()}},{key:"addEventListener",value:function(e,t){var n,i;this.inputHandler.addEventListener(e,(n=t,i=this.viewport,function(e,t){var r=i.getViewportInfo(),s=r.x,a=r.y,o=r.pixelRatio;n(e=e*o-s,t=t*o-a)}))}},{key:"getX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.viewport.getViewportInfo(),n=t.x,i=t.pixelRatio;return this.inputHandler.getX(e)*i-n}},{key:"getY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.viewport.getViewportInfo(),n=t.y,i=t.pixelRatio;return this.inputHandler.getY(e)*i-n}},{key:"getTouchedWorldCoord",value:function(e){return e||(e=this.viewport.getCamera()),this.screenCoord.set(this.getX(),this.getY()),e.unprojectVector2(this.worldCoord,this.screenCoord),this.worldCoord}},{key:"getTotalTouched",value:function(){return this.inputHandler.touches}}]),e}();t.ViewportInputHandler=o},2955:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(6893),t),r(n(1981),t),r(n(8656),t),r(n(2121),t),r(n(7581),t),r(n(3959),t),r(n(2791),t),r(n(5477),t),r(n(7459),t),r(n(6176),t),r(n(2013),t),r(n(7712),t),r(n(9045),t),r(n(6964),t),r(n(4995),t),r(n(1514),t),r(n(9699),t),r(n(1251),t),r(n(5122),t),r(n(1858),t),r(n(2987),t),r(n(5297),t),r(n(7139),t),r(n(9396),t),r(n(859),t),r(n(8606),t),r(n(2283),t),r(n(7811),t),r(n(5533),t),r(n(4411),t)},113:function(e){e.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}(e);var t=function(e){var t=Object.create(null);return{on:function(n,i,r){if("function"!==typeof i)throw new Error("callback is expected to be a function");var s=t[n];return s||(s=t[n]=[]),s.push({callback:i,ctx:r}),e},off:function(n,i){if("undefined"===typeof n)return t=Object.create(null),e;if(t[n])if("function"!==typeof i)delete t[n];else for(var r=t[n],s=0;s<r.length;++s)r[s].callback===i&&r.splice(s,1);return e},fire:function(n){var i,r=t[n];if(!r)return e;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var s=0;s<r.length;++s){var a=r[s];a.callback.apply(a.ctx,i)}return e}}}(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},1428:function(e,t,n){e.exports=function(e){"uniqueLinkId"in(e=e||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId);void 0===e.multigraph&&(e.multigraph=!1);if("function"!==typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var t=new Map,n=new Map,u={},l=0,h=e.multigraph?function(e,t,n){var i=o(e,t),r=u.hasOwnProperty(i);if(r||T(e,t)){r||(u[i]=0);var s="@"+ ++u[i];i=o(e+s,t+s)}return new a(e,t,n,i)}:function(e,t,i){var r=o(e,t),s=n.get(r);if(s)return s.data=i,s;return new a(e,t,i,r)},c=[],f=E,d=E,v=E,p=E,g={version:20,addNode:b,addLink:function(e,t,i){v();var r=M(e)||b(e),a=M(t)||b(t),o=h(e,t,i),u=n.has(o.id);n.set(o.id,o),s(r,o),e!==t&&s(a,o);return f(o,u?"update":"add"),p(),o},removeLink:function(e,t){void 0!==t&&(e=T(e,t));return k(e)},removeNode:x,getNode:M,getNodeCount:_,getLinkCount:w,getEdgeCount:w,getLinksCount:w,getNodesCount:_,getLinks:function(e){var t=M(e);return t?t.links:null},forEachNode:S,forEachLinkedNode:function(e,n,i){var r=M(e);if(r&&r.links&&"function"===typeof n)return i?function(e,n,i){var r=e.values(),s=r.next();for(;!s.done;){var a=s.value;if(a.fromId===n&&i(t.get(a.toId),a))return!0;s=r.next()}}(r.links,e,n):function(e,n,i){var r=e.values(),s=r.next();for(;!s.done;){var a=s.value,o=a.fromId===n?a.toId:a.fromId;if(i(t.get(o),a))return!0;s=r.next()}}(r.links,e,n)},forEachLink:function(e){if("function"===typeof e)for(var t=n.values(),i=t.next();!i.done;){if(e(i.value))return!0;i=t.next()}},beginUpdate:v,endUpdate:p,clear:function(){v(),S((function(e){x(e.id)})),p()},hasLink:T,hasNode:M,getLink:T};return i(g),function(){var e=g.on;function t(){return g.beginUpdate=v=L,g.endUpdate=p=A,f=m,d=y,g.on=e,e.apply(g,arguments)}g.on=t}(),g;function m(e,t){c.push({link:e,changeType:t})}function y(e,t){c.push({node:e,changeType:t})}function b(e,n){if(void 0===e)throw new Error("Invalid node identifier");v();var i=M(e);return i?(i.data=n,d(i,"update")):(i=new r(e,n),d(i,"add")),t.set(e,i),p(),i}function M(e){return t.get(e)}function x(e){var n=M(e);if(!n)return!1;v();var i=n.links;return i&&(i.forEach(k),n.links=null),t.delete(e),d(n,"remove"),p(),!0}function _(){return t.size}function w(){return n.size}function k(e){if(!e)return!1;if(!n.get(e.id))return!1;v(),n.delete(e.id);var t=M(e.fromId),i=M(e.toId);return t&&t.links.delete(e),i&&i.links.delete(e),f(e,"remove"),p(),!0}function T(e,t){if(void 0!==e&&void 0!==t)return n.get(o(e,t))}function E(){}function L(){l+=1}function A(){0===(l-=1)&&c.length>0&&(g.fire("changed",c),c.length=0)}function S(e){if("function"!==typeof e)throw new Error("Function is expected to iterate over graph nodes. You passed "+e);for(var n=t.values(),i=n.next();!i.done;){if(e(i.value))return!0;i=n.next()}}};var i=n(113);function r(e,t){this.id=e,this.links=null,this.data=t}function s(e,t){e.links?e.links.add(t):e.links=new Set([t])}function a(e,t,n,i){this.fromId=e,this.toId=t,this.data=n,this.id=i}function o(e,t){return e.toString()+"\ud83d\udc49 "+t.toString()}},1346:function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);if(Array.isArray(e)||(r=e,e=[]),r=r||{},this.data=e||[],this.length=this.data.length,this.compare=r.compare||i,this.setNodeId=r.setNodeId||n,this.length>0)for(var s=this.length>>1;s>=0;s--)this._down(s);if(r.setNodeId)for(s=0;s<this.length;++s)this.setNodeId(this.data[s],s)}function n(){}function i(e,t){return e-t}e.exports=t,t.prototype={push:function(e){this.data.push(e),this.setNodeId(e,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},updateItem:function(e){this._down(e),this._up(e)},_up:function(e){for(var t=this.data,n=this.compare,i=this.setNodeId,r=t[e];e>0;){var s=e-1>>1,a=t[s];if(n(r,a)>=0)break;t[e]=a,i(a,e),e=s}t[e]=r,i(r,e)},_down:function(e){for(var t=this.data,n=this.compare,i=this.length>>1,r=t[e],s=this.setNodeId;e<i;){var a=1+(e<<1),o=a+1,u=t[a];if(o<this.length&&n(t[o],u)<0&&(a=o,u=t[o]),n(u,r)>=0)break;t[e]=u,s(u,e),e=a}t[e]=r,s(r,e)}}},9222:function(e,t,n){e.exports=function(e,t){var n=(t=t||{}).oriented,s=t.heuristic;s||(s=a.heuristic);var h=t.distance;h||(h=a.distance);var c=r();return{find:function(t,r){var f=e.getNode(t);if(!f)throw new Error("fromId is not defined in this graph: "+t);var d=e.getNode(r);if(!d)throw new Error("toId is not defined in this graph: "+r);if(f===d)return[f];c.reset();var v=n?L:E,p=new Map,g=new i({compare:a.compareFScore,setNodeId:a.setHeapIndex}),m=new i({compare:a.compareFScore,setNodeId:a.setHeapIndex}),y=c.createNewState(f);p.set(t,y),y.fScore=s(f,d),y.distanceToSource=0,g.push(y),y.open=o;var b=c.createNewState(d);b.fScore=s(d,f),b.distanceToSource=0,m.push(b),b.open=u;var M,x,_=Number.POSITIVE_INFINITY,w=g,k=o;for(;g.length>0&&m.length>0;){g.length<m.length?(k=o,w=g):(k=u,w=m);var T=w.pop();if(T.closed=!0,!(T.distanceToSource>_)&&(e.forEachLinkedNode(T.node.id,v),M&&x))return S(M,x)}return l;function E(e,t){return C(e,t,T)}function L(e,t){if(k===o){if(t.fromId===T.node.id)return C(e,t,T)}else if(k===u&&t.toId===T.node.id)return C(e,t,T)}function A(e){var t=e.open;return!(!t||t===k)}function S(e,t){for(var n=[],i=e;i;)n.push(i.node),i=i.parent;for(var r=t;r;)n.unshift(r.node),r=r.parent;return n}function C(e,t,n){var i=p.get(e.id);if(i||(i=c.createNewState(e),p.set(e.id,i)),!i.closed)if(A(i,n)){var r=i.distanceToSource+n.distanceToSource;r<_&&(M=i,x=n,_=r)}else{var a=n.distanceToSource+h(i.node,n.node,t);if(!(a>=i.distanceToSource)){var u=k===o?d:f,l=a+s(i.node,u);l>=_||(i.fScore=l,0===i.open&&(w.push(i),w.updateItem(i.heapIndex),i.open=k),i.parent=n,i.distanceToSource=a)}}}}}};var i=n(1346),r=n(4251),s=n(1308),a=n(1555),o=1,u=2,l=a.NO_PATH;e.exports.l2=s.l2,e.exports.l1=s.l1},856:function(e,t,n){e.exports=function(e,t){var n=(t=t||{}).oriented,s=t.heuristic;s||(s=a.heuristic);var h=t.distance;h||(h=a.distance);var c=r();return{find:function(t,r){var f=e.getNode(t);if(!f)throw new Error("fromId is not defined in this graph: "+t);var d=e.getNode(r);if(!d)throw new Error("toId is not defined in this graph: "+r);c.reset();var v,p=new Map,g=new i({compare:a.compareFScore,setNodeId:a.setHeapIndex}),m=c.createNewState(f);p.set(t,m),m.fScore=s(f,d),m.distanceToSource=0,g.push(m),m.open=1;for(;g.length>0;){if(u(v=g.pop(),d))return l(v);v.closed=!0,e.forEachLinkedNode(v.node.id,y,n)}return o;function y(e,t){var n=p.get(e.id);if(n||(n=c.createNewState(e),p.set(e.id,n)),!n.closed){0===n.open&&(g.push(n),n.open=1);var i=v.distanceToSource+h(e,v.node,t);i>=n.distanceToSource||(n.parent=v,n.distanceToSource=i,n.fScore=i+s(n.node,d),g.updateItem(n.heapIndex))}}}}};var i=n(1346),r=n(4251),s=n(1308),a=n(1555),o=a.NO_PATH;function u(e,t){return e.node===t}function l(e){for(var t=[e.node],n=e.parent;n;)t.push(n.node),n=n.parent;return t}e.exports.l2=s.l2,e.exports.l1=s.l1},1555:function(e){var t=[];"function"===typeof Object.freeze&&Object.freeze(t),e.exports={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(e,t){return e.fScore-t.fScore},NO_PATH:t,setHeapIndex:function(e,t){e.heapIndex=t},setH1:function(e,t){e.h1=t},setH2:function(e,t){e.h2=t},compareF1Score:function(e,t){return e.f1-t.f1},compareF2Score:function(e,t){return e.f2-t.f2}}},1308:function(e){e.exports={l2:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},l1:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.abs(n)+Math.abs(i)}}},4251:function(e){function t(e){this.node=e,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}e.exports=function(){var e=0,n=[];return{createNewState:function(i){var r=n[e];r?(r.node=i,r.parent=null,r.closed=!1,r.open=0,r.distanceToSource=Number.POSITIVE_INFINITY,r.fScore=Number.POSITIVE_INFINITY,r.heapIndex=-1):(r=new t(i),n[e]=r);return e++,r},reset:function(){e=0}}}},8826:function(e,t,n){e.exports=function(e,t){var n=(t=t||{}).oriented,r=t.quitFast,u=t.heuristic;u||(u=s.heuristic);var l=t.distance;l||(l=s.distance);var h=a();return{find:function(t,a){console.log(t,a);var c=e.getNode(t);if(!c)throw new Error("fromId is not defined in this graph: "+t);var f=e.getNode(a);if(!f)throw new Error("toId is not defined in this graph: "+a);h.reset();var d,v=n?C:L,p=n?S:A,g=new Map,m=new i({compare:s.compareF1Score,setNodeId:s.setH1}),y=new i({compare:s.compareF2Score,setNodeId:s.setH2}),b=Number.POSITIVE_INFINITY,M=h.createNewState(c);g.set(t,M),M.g1=0;var x=u(c,f);M.f1=x,m.push(M);var _=h.createNewState(f);g.set(a,_),_.g2=0;var w,k=x;_.f2=k,y.push(_);for(;y.length&&m.length&&(m.length<y.length?T():E(),!r||!d););return function(e){if(!e)return o;var t=[e.node],n=e.p1;for(;n;)t.push(n.node),n=n.p1;var i=e.p2;for(;i;)t.unshift(i.node),i=i.p2;return t}(d);function T(){(w=m.pop()).closed||(w.closed=!0,w.f1<b&&w.g1+k-u(c,w.node)<b&&e.forEachLinkedNode(w.node.id,v),m.length>0&&(x=m.peek().f1))}function E(){(w=y.pop()).closed||(w.closed=!0,w.f2<b&&w.g2+x-u(w.node,f)<b&&e.forEachLinkedNode(w.node.id,p),y.length>0&&(k=y.peek().f2))}function L(e,t){var n=g.get(e.id);if(n||(n=h.createNewState(e),g.set(e.id,n)),!n.closed){var i=w.g1+l(w.node,e,t);i<n.g1&&(n.g1=i,n.f1=i+u(n.node,f),n.p1=w,n.h1<0?m.push(n):m.updateItem(n.h1));var r=n.g1+n.g2;r<b&&(b=r,d=n)}}function A(e,t){var n=g.get(e.id);if(n||(n=h.createNewState(e),g.set(e.id,n)),!n.closed){var i=w.g2+l(w.node,e,t);i<n.g2&&(n.g2=i,n.f2=i+u(c,n.node),n.p2=w,n.h2<0?y.push(n):y.updateItem(n.h2));var r=n.g1+n.g2;r<b&&(b=r,d=n)}}function S(e,t){if(t.toId===w.node.id)return A(e,t)}function C(e,t){if(t.fromId===w.node.id)return L(e,t)}}}};var i=n(1346),r=n(1308),s=n(1555),a=n(7590),o=s.NO_PATH;e.exports.l2=r.l2,e.exports.l1=r.l1},7590:function(e){function t(e){this.node=e,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}e.exports=function(){var e=0,n=[];return{createNewState:function(i){var r=n[e];r?(r.node=i,r.p1=null,r.p2=null,r.closed=!1,r.g1=Number.POSITIVE_INFINITY,r.g2=Number.POSITIVE_INFINITY,r.f1=Number.POSITIVE_INFINITY,r.f2=Number.POSITIVE_INFINITY,r.h1=-1,r.h2=-1):(r=new t(i),n[e]=r);return e++,r},reset:function(){e=0}}}},3913:function(e,t,n){e.exports={aStar:n(856),aGreedy:n(9222),nba:n(8826)}},534:function(e,t,n){"use strict";var i=n(7313),r=n(2224);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!c.call(v,e)||!c.call(d,e)&&(f.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var M=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),L=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var F,U=Object.assign;function V(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var D=!1;function B(e,t){if(!e||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var u="\n"+r[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=o);break}}}finally{D=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function G(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case _:return"Portal";case T:return"Profiler";case k:return"StrictMode";case S:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case L:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=j(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function se(e,t){var n=j(t.value),i=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,he,ce=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=pe(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Me=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,we=null,ke=null;function Te(e){if(e=br(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=xr(t),_e(e.stateNode,e.type,t))}}function Ee(e){we?ke?ke.push(e):ke=[e]:we=e}function Le(){if(we){var e=we,t=ke;if(ke=we=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function Se(){}var Ce=!1;function Pe(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Ae(e,t,n)}finally{Ce=!1,(null!==we||null!==ke)&&(Se(),Le())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(h)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(he){Re=!1}function Ne(e,t,n,i,r,s,a,o,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(h){this.onError(h)}}var Fe=!1,Ue=null,Ve=!1,De=null,Be={onError:function(e){Fe=!0,Ue=e}};function Ge(e,t,n,i,r,s,a,o,u){Fe=!1,Ue=null,Ne.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return je(r),e;if(a===i)return je(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,u=r.child;u;){if(u===n){o=!0,n=r,i=a;break}if(u===i){o=!0,i=r,n=a;break}u=u.sibling}if(!o){for(u=a.child;u;){if(u===n){o=!0,n=a,i=r;break}if(u===i){o=!0,i=a,n=r;break}u=u.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,qe=r.unstable_cancelCallback,Ze=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Qe=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/ut|0)|0},ot=Math.log,ut=Math.LN2;var lt=64,ht=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=ct(o):0!==(s&=a)&&(i=ct(s))}else 0!==(a=n&~r)?i=ct(a):0!==s&&(i=ct(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function Mt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,wt,kt,Tt,Et=!1,Lt=[],At=null,St=null,Ct=null,Pt=new Map,It=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":St=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ft(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&_t(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ut(e){var t=yr(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Tt(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&_t(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Me=i,n.target.dispatchEvent(i),Me=null,t.shift()}return!0}function Dt(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Et=!1,null!==At&&Vt(At)&&(At=null),null!==St&&Vt(St)&&(St=null),null!==Ct&&Vt(Ct)&&(Ct=null),Pt.forEach(Dt),It.forEach(Dt)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Gt(t,e)}if(0<Lt.length){Gt(Lt[0],e);for(var n=1;n<Lt.length;n++){var i=Lt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==At&&Gt(At,e),null!==St&&Gt(St,e),null!==Ct&&Gt(Ct,e),Pt.forEach(t),It.forEach(t),n=0;n<Rt.length;n++)(i=Rt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Rt.shift()}var Wt=M.ReactCurrentBatchConfig,jt=!0;function Ht(e,t,n,i){var r=bt,s=Wt.transition;Wt.transition=null;try{bt=1,Yt(e,t,n,i)}finally{bt=r,Wt.transition=s}}function Xt(e,t,n,i){var r=bt,s=Wt.transition;Wt.transition=null;try{bt=4,Yt(e,t,n,i)}finally{bt=r,Wt.transition=s}}function Yt(e,t,n,i){if(jt){var r=Zt(e,t,n,i);if(null===r)ji(e,t,i,qt,n),Nt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return At=Ft(At,e,t,n,i,r),!0;case"dragenter":return St=Ft(St,e,t,n,i,r),!0;case"mouseover":return Ct=Ft(Ct,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pt.set(s,Ft(Pt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,It.set(s,Ft(It.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Nt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&xt(s),null===(s=Zt(e,t,n,i))&&ji(e,t,i,qt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else ji(e,t,i,null,n)}}var qt=null;function Zt(e,t,n,i){if(qt=null,null!==(e=yr(e=xe(i))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,i=n.length,r="value"in Qt?Qt.value:Qt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(ln),cn=U({},ln,{view:0,detail:0}),fn=sn(cn),dn=U({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,on=e.screenY-un.screenY):on=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),vn=sn(dn),pn=sn(U({},dn,{dataTransfer:0})),gn=sn(U({},cn,{relatedTarget:0})),mn=sn(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),Mn=sn(U({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Tn(){return kn}var En=U({},cn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ln=sn(En),An=sn(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sn=sn(U({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Cn=sn(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=sn(Pn),Rn=[9,13,27,32],On=h&&"CompositionEvent"in window,Nn=null;h&&"documentMode"in document&&(Nn=document.documentMode);var Fn=h&&"TextEvent"in window&&!Nn,Un=h&&(!On||Nn&&8<Nn&&11>=Nn),Vn=String.fromCharCode(32),Dn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,i){Ee(i),0<(t=Xi(t,"onChange")).length&&(n=new hn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function qn(e){Vi(e,0)}function Zn(e){if(Y(Mr(e)))return e}function Kn(e,t){if("change"===e)return t}var Qn=!1;if(h){var $n;if(h){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function ti(){Xn&&(Xn.detachEvent("onpropertychange",ni),Yn=Xn=null)}function ni(e){if("value"===e.propertyName&&Zn(Yn)){var t=[];Hn(t,Yn,e,xe(e)),Pe(qn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Yn=n,(Xn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Yn)}function si(e,t){if("click"===e)return Zn(t)}function ai(e,t){if("input"===e||"change"===e)return Zn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ui(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!c.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function li(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n,i=li(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function ci(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ci(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fi(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vi(e){var t=fi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ci(n.ownerDocument.documentElement,n)){if(null!==i&&di(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=hi(n,s);var a=hi(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pi=h&&"documentMode"in document&&11>=document.documentMode,gi=null,mi=null,yi=null,bi=!1;function Mi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==q(i)||("selectionStart"in(i=gi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&ui(yi,i)||(yi=i,0<(i=Xi(mi,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _i={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},wi={},ki={};function Ti(e){if(wi[e])return wi[e];if(!_i[e])return e;var t,n=_i[e];for(t in n)if(n.hasOwnProperty(t)&&t in ki)return wi[e]=n[t];return e}h&&(ki=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Ei=Ti("animationend"),Li=Ti("animationiteration"),Ai=Ti("animationstart"),Si=Ti("transitionend"),Ci=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){Ci.set(e,t),u(t,[e])}for(var Ri=0;Ri<Pi.length;Ri++){var Oi=Pi[Ri];Ii(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ii(Ei,"onAnimationEnd"),Ii(Li,"onAnimationIteration"),Ii(Ai,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Si,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ni));function Ui(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,u,l){if(Ge.apply(this,arguments),Fe){if(!Fe)throw Error(s(198));var h=Ue;Fe=!1,Ue=null,Ve||(Ve=!0,De=h)}}(i,t,void 0,e),e.currentTarget=null}function Vi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==s&&r.isPropagationStopped())break e;Ui(r,o,l),s=u}else for(a=0;a<i.length;a++){if(u=(o=i[a]).instance,l=o.currentTarget,o=o.listener,u!==s&&r.isPropagationStopped())break e;Ui(r,o,l),s=u}}}if(Ve)throw e=De,Ve=!1,De=null,e}function Di(e,t){var n=t[pr];void 0===n&&(n=t[pr]=new Set);var i=e+"__bubble";n.has(i)||(Wi(t,e,2,!1),n.add(i))}function Bi(e,t,n){var i=0;t&&(i|=4),Wi(n,e,i,t)}var Gi="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[Gi]){e[Gi]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fi.has(t)||Bi(t,!1,e),Bi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gi]||(t[Gi]=!0,Bi("selectionchange",!1,t))}}function Wi(e,t,n,i){switch(Kt(t)){case 1:var r=Ht;break;case 4:r=Xt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function ji(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===r||8===u.nodeType&&u.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(u=a.tag)||6===u){i=s=a;continue e}o=o.parentNode}}i=i.return}Pe((function(){var i=s,r=xe(n),a=[];e:{var o=Ci.get(e);if(void 0!==o){var u=hn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Ln;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Sn;break;case Ei:case Li:case Ai:u=mn;break;case Si:u=Cn;break;case"scroll":u=fn;break;case"wheel":u=In;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var h=0!==(4&t),c=!h&&"scroll"===e,f=h?null!==o?o+"Capture":null:o;h=[];for(var d,v=i;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==f&&(null!=(p=Ie(v,f))&&h.push(Hi(v,p,d)))),c)break;v=v.return}0<h.length&&(o=new u(o,l,null,n,r),a.push({event:o,listeners:h}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Me||!(l=n.relatedTarget||n.fromElement)||!yr(l)&&!l[vr])&&(u||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=i,null!==(l=(l=n.relatedTarget||n.toElement)?yr(l):null)&&(l!==(c=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=i),u!==l)){if(h=vn,p="onMouseLeave",f="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(h=An,p="onPointerLeave",f="onPointerEnter",v="pointer"),c=null==u?o:Mr(u),d=null==l?o:Mr(l),(o=new h(p,v+"leave",u,n,r)).target=c,o.relatedTarget=d,p=null,yr(r)===i&&((h=new h(f,v+"enter",l,n,r)).target=d,h.relatedTarget=c,p=h),c=p,u&&l)e:{for(f=l,v=0,d=h=u;d;d=Yi(d))v++;for(d=0,p=f;p;p=Yi(p))d++;for(;0<v-d;)h=Yi(h),v--;for(;0<d-v;)f=Yi(f),d--;for(;v--;){if(h===f||null!==f&&h===f.alternate)break e;h=Yi(h),f=Yi(f)}h=null}else h=null;null!==u&&qi(a,o,u,h,!1),null!==l&&null!==c&&qi(a,c,l,h,!0)}if("select"===(u=(o=i?Mr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var g=Kn;else if(jn(o))if(Qn)g=ai;else{g=ri;var m=ii}else(u=o.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,i))?Hn(a,g,n,r):(m&&m(e,o,i),"focusout"===e&&(m=o._wrapperState)&&m.controlled&&"number"===o.type&&ee(o,"number",o.value)),m=i?Mr(i):window,e){case"focusin":(jn(m)||"true"===m.contentEditable)&&(gi=m,mi=i,yi=null);break;case"focusout":yi=mi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,Mi(a,n,r);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":Mi(a,n,r)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):($t="value"in(Qt=r)?Qt.value:Qt.textContent,zn=!0)),0<(m=Xi(i,b)).length&&(b=new Mn(b,e,null,n,r),a.push({event:b,listeners:m}),y?b.data=y:null!==(y=Gn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Dn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Jt=$t=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Xi(i,"onBeforeInput")).length&&(r=new Mn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Vi(a,t)}))}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ie(e,n))&&i.unshift(Hi(e,s,r)),null!=(s=Ie(e,t))&&i.push(Hi(e,s,r))),e=e.return}return i}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,u=o.alternate,l=o.stateNode;if(null!==u&&u===i)break;5===o.tag&&null!==l&&(o=l,r?null!=(u=Ie(n,s))&&a.unshift(Hi(n,u,o)):r||null!=(u=Ie(n,s))&&a.push(Hi(n,u,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(Zi,"\n").replace(Ki,"")}function $i(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(s(425))}function Ji(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout((function(){throw e}))}function ur(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);zt(t)}function lr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var cr=Math.random().toString(36).slice(2),fr="__reactFiber$"+cr,dr="__reactProps$"+cr,vr="__reactContainer$"+cr,pr="__reactEvents$"+cr,gr="__reactListeners$"+cr,mr="__reactHandles$"+cr;function yr(e){var t=e[fr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vr]||n[fr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hr(e);null!==e;){if(n=e[fr])return n;e=hr(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[fr]||e[vr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Mr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xr(e){return e[dr]||null}var _r=[],wr=-1;function kr(e){return{current:e}}function Tr(e){0>wr||(e.current=_r[wr],_r[wr]=null,wr--)}function Er(e,t){wr++,_r[wr]=e.current,e.current=t}var Lr={},Ar=kr(Lr),Sr=kr(!1),Cr=Lr;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Lr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){Tr(Sr),Tr(Ar)}function Or(e,t,n){if(Ar.current!==Lr)throw Error(s(168));Er(Ar,t),Er(Sr,n)}function Nr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,W(e)||"Unknown",r));return U({},n,i)}function Fr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lr,Cr=Ar.current,Er(Ar,e),Er(Sr,Sr.current),!0}function Ur(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Nr(e,t,Cr),i.__reactInternalMemoizedMergedChildContext=e,Tr(Sr),Tr(Ar),Er(Ar,e)):Tr(Sr),Er(Sr,n)}var Vr=null,Dr=!1,Br=!1;function Gr(e){null===Vr?Vr=[e]:Vr.push(e)}function zr(){if(!Br&&null!==Vr){Br=!0;var e=0,t=bt;try{var n=Vr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Vr=null,Dr=!1}catch(r){throw null!==Vr&&(Vr=Vr.slice(e+1)),Ye(Je,zr),r}finally{bt=t,Br=!1}}return null}var Wr=[],jr=0,Hr=null,Xr=0,Yr=[],qr=0,Zr=null,Kr=1,Qr="";function $r(e,t){Wr[jr++]=Xr,Wr[jr++]=Hr,Hr=e,Xr=t}function Jr(e,t,n){Yr[qr++]=Kr,Yr[qr++]=Qr,Yr[qr++]=Zr,Zr=e;var i=Kr;e=Qr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Kr=1<<32-at(t)+r|n<<r|i,Qr=s+e}else Kr=1<<s|n<<r|i,Qr=e}function es(e){null!==e.return&&($r(e,1),Jr(e,1,0))}function ts(e){for(;e===Hr;)Hr=Wr[--jr],Wr[jr]=null,Xr=Wr[--jr],Wr[jr]=null;for(;e===Zr;)Zr=Yr[--qr],Yr[qr]=null,Qr=Yr[--qr],Yr[qr]=null,Kr=Yr[--qr],Yr[qr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=Il(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=lr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zr?{id:Kr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Il(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(us(e))throw Error(s(418));t=lr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function cs(e){if(e!==ns)return!1;if(!rs)return hs(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(us(e))throw fs(),Error(s(418));for(;t;)as(e,t),t=lr(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=lr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?lr(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=lr(e.nextSibling)}function ds(){is=ns=null,rs=!1}function vs(e){null===ss?ss=[e]:ss.push(e)}var ps=M.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ms=kr(null),ys=null,bs=null,Ms=null;function xs(){Ms=bs=ys=null}function _s(e){var t=ms.current;Tr(ms),e._currentValue=t}function ws(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){ys=e,Ms=bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(Ms!==e)if(e={context:e,memoizedValue:t,next:null},null===bs){if(null===ys)throw Error(s(308));bs=e,ys.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var Es=null;function Ls(e){null===Es?Es=[e]:Es.push(e)}function As(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ls(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ss(e,i)}function Ss(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Cs=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Su)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ss(e,n)}return null===(r=i.interleaved)?(t.next=t,Ls(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ss(e,n)}function Ns(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,i){var r=e.updateQueue;Cs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var u=o,l=u.next;u.next=null,null===a?s=l:a.next=l,a=u;var h=e.alternate;null!==h&&((o=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===o?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=u))}if(null!==s){var c=r.baseState;for(a=0,h=l=u=null,o=s;;){var f=o.lane,d=o.eventTime;if((i&f)===f){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,p=o;switch(f=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){c=v.call(d,c,f);break e}c=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(f="function"===typeof(v=p.payload)?v.call(d,c,f):v)||void 0===f)break e;c=U({},c,f);break e;case 2:Cs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(f=r.effects)?r.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=d,u=c):h=h.next=d,a|=f;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(f=o).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===h&&(u=c),r.baseState=u,r.firstBaseUpdate=l,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Uu|=a,e.lanes=a,e.memoizedState=c}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Ds=(new i.Component).refs;function Bs(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Gs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tl(),r=nl(e),s=Rs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,r))&&(il(t,e,r,i),Ns(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tl(),r=nl(e),s=Rs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,r))&&(il(t,e,r,i),Ns(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),i=nl(e),r=Rs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Os(e,r,i))&&(il(t,e,i,n),Ns(t,e,i))}};function zs(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ui(n,i)||!ui(r,s))}function Ws(e,t,n){var i=!1,r=Lr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(r=Ir(t)?Cr:Ar.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Pr(e,r):Lr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Gs,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function js(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Gs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Ds,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ts(s):(s=Ir(t)?Cr:Ar.current,r.context=Pr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Bs(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Gs.enqueueReplaceState(r,r.state,null),Us(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Xs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===Ds&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qs(e){return(0,e._init)(e._payload)}function Zs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,i){return null===t||6!==t.tag?((t=Vl(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){var s=n.type;return s===w?c(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&qs(s)===t.type)?((i=r(t,n.props)).ref=Xs(e,t,n),i.return=e,i):((i=Nl(n.type,n.key,n.props,null,e.mode,i)).ref=Xs(e,t,n),i.return=e,i)}function h(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dl(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function c(e,t,n,i,s){return null===t||7!==t.tag?((t=Fl(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Nl(t.type,t.key,t.props,null,e.mode,n)).ref=Xs(e,null,t),n.return=e,n;case _:return(t=Dl(t,e.mode,n)).return=e,t;case I:return f(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Fl(t,e.mode,n,null)).return=e,t;Ys(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:u(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?l(e,t,n,i):null;case _:return n.key===r?h(e,t,n,i):null;case I:return d(e,t,(r=n._init)(n._payload),i)}if(te(n)||N(n))return null!==r?null:c(e,t,n,i,null);Ys(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return u(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return l(t,e=e.get(null===i.key?n:i.key)||null,i,r);case _:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case I:return v(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||N(i))return c(t,e=e.get(n)||null,i,r,null);Ys(t,i)}return null}function p(r,s,o,u){for(var l=null,h=null,c=s,p=s=0,g=null;null!==c&&p<o.length;p++){c.index>p?(g=c,c=null):g=c.sibling;var m=d(r,c,o[p],u);if(null===m){null===c&&(c=g);break}e&&c&&null===m.alternate&&t(r,c),s=a(m,s,p),null===h?l=m:h.sibling=m,h=m,c=g}if(p===o.length)return n(r,c),rs&&$r(r,p),l;if(null===c){for(;p<o.length;p++)null!==(c=f(r,o[p],u))&&(s=a(c,s,p),null===h?l=c:h.sibling=c,h=c);return rs&&$r(r,p),l}for(c=i(r,c);p<o.length;p++)null!==(g=v(c,r,p,o[p],u))&&(e&&null!==g.alternate&&c.delete(null===g.key?p:g.key),s=a(g,s,p),null===h?l=g:h.sibling=g,h=g);return e&&c.forEach((function(e){return t(r,e)})),rs&&$r(r,p),l}function g(r,o,u,l){var h=N(u);if("function"!==typeof h)throw Error(s(150));if(null==(u=h.call(u)))throw Error(s(151));for(var c=h=null,p=o,g=o=0,m=null,y=u.next();null!==p&&!y.done;g++,y=u.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=d(r,p,y.value,l);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(r,p),o=a(b,o,g),null===c?h=b:c.sibling=b,c=b,p=m}if(y.done)return n(r,p),rs&&$r(r,g),h;if(null===p){for(;!y.done;g++,y=u.next())null!==(y=f(r,y.value,l))&&(o=a(y,o,g),null===c?h=y:c.sibling=y,c=y);return rs&&$r(r,g),h}for(p=i(r,p);!y.done;g++,y=u.next())null!==(y=v(p,r,g,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=a(y,o,g),null===c?h=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(r,e)})),rs&&$r(r,g),h}return function e(i,s,a,u){if("object"===typeof a&&null!==a&&a.type===w&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var l=a.key,h=s;null!==h;){if(h.key===l){if((l=a.type)===w){if(7===h.tag){n(i,h.sibling),(s=r(h,a.props.children)).return=i,i=s;break e}}else if(h.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===I&&qs(l)===h.type){n(i,h.sibling),(s=r(h,a.props)).ref=Xs(i,h,a),s.return=i,i=s;break e}n(i,h);break}t(i,h),h=h.sibling}a.type===w?((s=Fl(a.props.children,i.mode,u,a.key)).return=i,i=s):((u=Nl(a.type,a.key,a.props,null,i.mode,u)).ref=Xs(i,s,a),u.return=i,i=u)}return o(i);case _:e:{for(h=a.key;null!==s;){if(s.key===h){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Dl(a,i.mode,u)).return=i,i=s}return o(i);case I:return e(i,s,(h=a._init)(a._payload),u)}if(te(a))return p(i,s,a,u);if(N(a))return g(i,s,a,u);Ys(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Vl(a,i.mode,u)).return=i,i=s),o(i)):n(i,s)}}var Ks=Zs(!0),Qs=Zs(!1),$s={},Js=kr($s),ea=kr($s),ta=kr($s);function na(e){if(e===$s)throw Error(s(174));return e}function ia(e,t){switch(Er(ta,t),Er(ea,e),Er(Js,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(Js),Er(Js,t)}function ra(){Tr(Js),Tr(ea),Tr(ta)}function sa(e){na(ta.current);var t=na(Js.current),n=ue(t,e.type);t!==n&&(Er(ea,e),Er(Js,n))}function aa(e){ea.current===e&&(Tr(Js),Tr(ea))}var oa=kr(0);function ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function ha(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var ca=M.ReactCurrentDispatcher,fa=M.ReactCurrentBatchConfig,da=0,va=null,pa=null,ga=null,ma=!1,ya=!1,ba=0,Ma=0;function xa(){throw Error(s(321))}function _a(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function wa(e,t,n,i,r,a){if(da=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ca.current=null===e||null===e.memoizedState?ao:oo,e=n(i,r),ya){a=0;do{if(ya=!1,ba=0,25<=a)throw Error(s(301));a+=1,ga=pa=null,t.updateQueue=null,ca.current=uo,e=n(i,r)}while(ya)}if(ca.current=so,t=null!==pa&&null!==pa.next,da=0,ga=pa=va=null,ma=!1,t)throw Error(s(300));return e}function ka(){var e=0!==ba;return ba=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?va.memoizedState=ga=e:ga=ga.next=e,ga}function Ea(){if(null===pa){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=pa.next;var t=null===ga?va.memoizedState:ga.next;if(null!==t)ga=t,pa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(pa=e).memoizedState,baseState:pa.baseState,baseQueue:pa.baseQueue,queue:pa.queue,next:null},null===ga?va.memoizedState=ga=e:ga=ga.next=e}return ga}function La(e,t){return"function"===typeof t?t(e):t}function Aa(e){var t=Ea(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=pa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var u=o=null,l=null,h=a;do{var c=h.lane;if((da&c)===c)null!==l&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var f={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===l?(u=l=f,o=i):l=l.next=f,va.lanes|=c,Uu|=c}h=h.next}while(null!==h&&h!==a);null===l?o=i:l.next=u,oi(i,t.memoizedState)||(Mo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,va.lanes|=a,Uu|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=Ea(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Ca(){}function Pa(e,t){var n=va,i=Ea(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,Mo=!0),i=i.queue,Wa(Oa.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Va(9,Ra.bind(null,n,i,r,t),void 0,null),null===Cu)throw Error(s(349));0!==(30&da)||Ia(n,t,r)}return r}function Ia(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ra(e,t,n,i){t.value=n,t.getSnapshot=i,Na(t)&&Fa(e)}function Oa(e,t,n){return n((function(){Na(t)&&Fa(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Fa(e){var t=Ss(e,1);null!==t&&il(t,e,1,-1)}function Ua(e){var t=Ta();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,va,e),[t.memoizedState,e]}function Va(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Da(){return Ea().memoizedState}function Ba(e,t,n,i){var r=Ta();va.flags|=e,r.memoizedState=Va(1|t,n,void 0,void 0===i?null:i)}function Ga(e,t,n,i){var r=Ea();i=void 0===i?null:i;var s=void 0;if(null!==pa){var a=pa.memoizedState;if(s=a.destroy,null!==i&&_a(i,a.deps))return void(r.memoizedState=Va(t,n,s,i))}va.flags|=e,r.memoizedState=Va(1|t,n,s,i)}function za(e,t){return Ba(8390656,8,e,t)}function Wa(e,t){return Ga(2048,8,e,t)}function ja(e,t){return Ga(4,2,e,t)}function Ha(e,t){return Ga(4,4,e,t)}function Xa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ya(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ga(4,4,Xa.bind(null,t,e),n)}function qa(){}function Za(e,t){var n=Ea();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&_a(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ka(e,t){var n=Ea();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&_a(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t,n){return 0===(21&da)?(e.baseState&&(e.baseState=!1,Mo=!0),e.memoizedState=n):(oi(n,t)||(n=pt(),va.lanes|=n,Uu|=n,e.baseState=!0),t)}function $a(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=fa.transition;fa.transition={};try{e(!1),t()}finally{bt=n,fa.transition=i}}function Ja(){return Ea().memoizedState}function eo(e,t,n){var i=nl(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))io(t,n);else if(null!==(n=As(e,t,n,i))){il(n,e,i,tl()),ro(n,t,i)}}function to(e,t,n){var i=nl(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))io(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var u=t.interleaved;return null===u?(r.next=r,Ls(t)):(r.next=u.next,u.next=r),void(t.interleaved=r)}}catch(l){}null!==(n=As(e,t,r,i))&&(il(n,e,i,r=tl()),ro(n,t,i))}}function no(e){var t=e.alternate;return e===va||null!==t&&t===va}function io(e,t){ya=ma=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ro(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var so={readContext:Ts,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useInsertionEffect:xa,useLayoutEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useMutableSource:xa,useSyncExternalStore:xa,useId:xa,unstable_isNewReconciler:!1},ao={readContext:Ts,useCallback:function(e,t){return Ta().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:za,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4194308,4,Xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ta();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=eo.bind(null,va,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ta().memoizedState=e},useState:Ua,useDebugValue:qa,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=Ua(!1),t=e[0];return e=$a.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=va,r=Ta();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Cu)throw Error(s(349));0!==(30&da)||Ia(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,za(Oa.bind(null,i,a,e),[e]),i.flags|=2048,Va(9,Ra.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Ta(),t=Cu.identifierPrefix;if(rs){var n=Qr;t=":"+t+"R"+(n=(Kr&~(1<<32-at(Kr)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ma++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Ts,useCallback:Za,useContext:Ts,useEffect:Wa,useImperativeHandle:Ya,useInsertionEffect:ja,useLayoutEffect:Ha,useMemo:Ka,useReducer:Aa,useRef:Da,useState:function(){return Aa(La)},useDebugValue:qa,useDeferredValue:function(e){return Qa(Ea(),pa.memoizedState,e)},useTransition:function(){return[Aa(La)[0],Ea().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Pa,useId:Ja,unstable_isNewReconciler:!1},uo={readContext:Ts,useCallback:Za,useContext:Ts,useEffect:Wa,useImperativeHandle:Ya,useInsertionEffect:ja,useLayoutEffect:Ha,useMemo:Ka,useReducer:Sa,useRef:Da,useState:function(){return Sa(La)},useDebugValue:qa,useDeferredValue:function(e){var t=Ea();return null===pa?t.memoizedState=e:Qa(t,pa.memoizedState,e)},useTransition:function(){return[Sa(La)[0],Ea().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Pa,useId:Ja,unstable_isNewReconciler:!1};function lo(e,t){try{var n="",i=t;do{n+=G(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function co(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function vo(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hu||(Hu=!0,Xu=i),co(0,t)},n}function po(e,t,n){(n=Rs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){co(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){co(0,t),"function"!==typeof i&&(null===Yu?Yu=new Set([this]):Yu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new fo;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=El.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bo=M.ReactCurrentOwner,Mo=!1;function xo(e,t,n,i){t.child=null===e?Qs(t,null,n,i):Ks(t,e.child,n,i)}function _o(e,t,n,i,r){n=n.render;var s=t.ref;return ks(t,r),i=wa(e,t,n,i,s,r),n=ka(),null===e||Mo?(rs&&n&&es(t),t.flags|=1,xo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function wo(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Rl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nl(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ui)(a,i)&&e.ref===t.ref)return Ho(e,t,r)}return t.flags|=1,(e=Ol(s,i)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(ui(s,i)&&e.ref===t.ref){if(Mo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ho(e,t,r);0!==(131072&e.flags)&&(Mo=!0)}}return Lo(e,t,n,i,r)}function To(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ou,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Ou,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Er(Ou,Ru),Ru|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Er(Ou,Ru),Ru|=i;return xo(e,t,r,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Lo(e,t,n,i,r){var s=Ir(n)?Cr:Ar.current;return s=Pr(t,s),ks(t,r),n=wa(e,t,n,i,s,r),i=ka(),null===e||Mo?(rs&&i&&es(t),t.flags|=1,xo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function Ao(e,t,n,i,r){if(Ir(n)){var s=!0;Fr(t)}else s=!1;if(ks(t,r),null===t.stateNode)jo(e,t),Ws(t,n,i),Hs(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ts(l):l=Pr(t,l=Ir(n)?Cr:Ar.current);var h=n.getDerivedStateFromProps,c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate;c||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||u!==l)&&js(t,a,i,l),Cs=!1;var f=t.memoizedState;a.state=f,Us(t,i,a,r),u=t.memoizedState,o!==i||f!==u||Sr.current||Cs?("function"===typeof h&&(Bs(t,n,h,i),u=t.memoizedState),(o=Cs||zs(t,n,o,i,f,u,l))?(c||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),a.props=i,a.state=u,a.context=l,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Is(e,t),o=t.memoizedProps,l=t.type===t.elementType?o:gs(t.type,o),a.props=l,c=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ts(u):u=Pr(t,u=Ir(n)?Cr:Ar.current);var d=n.getDerivedStateFromProps;(h="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==c||f!==u)&&js(t,a,i,u),Cs=!1,f=t.memoizedState,a.state=f,Us(t,i,a,r);var v=t.memoizedState;o!==c||f!==v||Sr.current||Cs?("function"===typeof d&&(Bs(t,n,d,i),v=t.memoizedState),(l=Cs||zs(t,n,l,i,f,v,u)||!1)?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,v,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,v,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),a.props=i,a.state=v,a.context=u,i=l):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return So(e,t,n,i,s,r)}function So(e,t,n,i,r,s){Eo(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Ur(t,n,!1),Ho(e,t,s);i=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=Ks(t,e.child,null,s),t.child=Ks(t,null,o,s)):xo(e,t,o,s),t.memoizedState=i.state,r&&Ur(t,n,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),ia(e,t.containerInfo)}function Po(e,t,n,i,r){return ds(),vs(r),t.flags|=256,xo(e,t,n,i),t.child}var Io,Ro,Oo,No,Fo={dehydrated:null,treeContext:null,retryLane:0};function Uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vo(e,t,n){var i,r=t.pendingProps,a=oa.current,o=!1,u=0!==(128&t.flags);if((i=u)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Er(oa,1&a),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=r.children,e=r.fallback,o?(r=t.mode,o=t.child,u={mode:"hidden",children:u},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=u):o=Ul(u,r,0,null),e=Fl(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Uo(n),t.memoizedState=Fo,e):Do(t,u));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,i=ho(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Ul({mode:"visible",children:i.children},r,0,null),(a=Fl(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&Ks(t,e.child,null,o),t.child.memoizedState=Uo(o),t.memoizedState=Fo,a);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var u=i.dgst;return i=u,Bo(e,t,o,i=ho(a=Error(s(419)),i,void 0))}if(u=0!==(o&e.childLanes),Mo||u){if(null!==(i=Cu)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ss(e,r),il(i,e,r,-1))}return gl(),Bo(e,t,o,i=ho(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=lr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Yr[qr++]=Kr,Yr[qr++]=Qr,Yr[qr++]=Zr,Kr=e.id,Qr=e.overflow,Zr=t),t=Do(t,i.children),t.flags|=4096,t)}(e,t,u,r,i,a,n);if(o){o=r.fallback,u=t.mode,i=(a=e.child).sibling;var l={mode:"hidden",children:r.children};return 0===(1&u)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ol(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Ol(i,o):(o=Fl(o,u,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,u=null===(u=e.child.memoizedState)?Uo(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~n,t.memoizedState=Fo,r}return e=(o=e.child).sibling,r=Ol(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Do(e,t){return(t=Ul({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,n,i){return null!==i&&vs(i),Ks(t,e.child,null,n),(e=Do(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ws(e.return,t,n)}function zo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Wo(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(xo(e,t,i.children,n),0!==(2&(i=oa.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er(oa,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ua(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),zo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ua(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function qo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return Ir(t.type)&&Rr(),Yo(t),null;case 3:return i=t.stateNode,ra(),Tr(Sr),Tr(Ar),ha(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(cs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ol(ss),ss=null))),Ro(e,t),Yo(t),null;case 5:aa(t);var r=na(ta.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Yo(t),null}if(e=na(Js.current),cs(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[fr]=t,i[dr]=a,e=0!==(1&t.mode),n){case"dialog":Di("cancel",i),Di("close",i);break;case"iframe":case"object":case"embed":Di("load",i);break;case"video":case"audio":for(r=0;r<Ni.length;r++)Di(Ni[r],i);break;case"source":Di("error",i);break;case"img":case"image":case"link":Di("error",i),Di("load",i);break;case"details":Di("toggle",i);break;case"input":K(i,a),Di("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Di("invalid",i);break;case"textarea":re(i,a),Di("invalid",i)}for(var u in ye(n,a),r=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?i.textContent!==l&&(!0!==a.suppressHydrationWarning&&$i(i.textContent,l,e),r=["children",l]):"number"===typeof l&&i.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&$i(i.textContent,l,e),r=["children",""+l]):o.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Di("scroll",i)}switch(n){case"input":X(i),J(i,a,!0);break;case"textarea":X(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{u=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=u.createElement(n,{is:i.is}):(e=u.createElement(n),"select"===n&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,n),e[fr]=t,e[dr]=i,Io(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,i),n){case"dialog":Di("cancel",e),Di("close",e),r=i;break;case"iframe":case"object":case"embed":Di("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ni.length;r++)Di(Ni[r],e);r=i;break;case"source":Di("error",e),r=i;break;case"img":case"image":case"link":Di("error",e),Di("load",e),r=i;break;case"details":Di("toggle",e),r=i;break;case"input":K(e,i),r=Z(e,i),Di("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=U({},i,{value:void 0}),Di("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Di("invalid",e)}for(a in ye(n,r),l=r)if(l.hasOwnProperty(a)){var h=l[a];"style"===a?ge(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ce(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&fe(e,h):"number"===typeof h&&fe(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Di("scroll",e):null!=h&&b(e,a,h,u))}switch(n){case"input":X(e),J(e,i,!1);break;case"textarea":X(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+j(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)No(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=na(ta.current),na(Js.current),cs(t)){if(i=t.stateNode,n=t.memoizedProps,i[fr]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$i(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$i(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[fr]=t,t.stateNode=i}return Yo(t),null;case 13:if(Tr(oa),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ds(),t.flags|=98560,a=!1;else if(a=cs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[fr]=t}else ds(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),a=!1}else null!==ss&&(ol(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Nu&&(Nu=3):gl())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return ra(),Ro(e,t),null===e&&zi(t.stateNode.containerInfo),Yo(t),null;case 10:return _s(t.type._context),Yo(t),null;case 19:if(Tr(oa),null===(a=t.memoizedState))return Yo(t),null;if(i=0!==(128&t.flags),null===(u=a.rendering))if(i)Xo(a,!1);else{if(0!==Nu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ua(e))){for(t.flags|=128,Xo(a,!1),null!==(i=u.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Wu&&(t.flags|=128,i=!0,Xo(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ua(u))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!rs)return Yo(t),null}else 2*Qe()-a.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=128,i=!0,Xo(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=oa.current,Er(oa,i?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return fl(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Zo(e,t){switch(ts(t),t.tag){case 1:return Ir(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ra(),Tr(Sr),Tr(Ar),ha(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(Tr(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ds()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(oa),null;case 4:return ra(),null;case 10:return _s(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Io=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Oo=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,na(Js.current);var s,a=null;switch(n){case"input":r=Z(e,r),i=Z(e,i),a=[];break;case"select":r=U({},r,{value:void 0}),i=U({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(h in ye(n,i),n=null,r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var u=r[h];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(o.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in i){var l=i[h];if(u=null!=r?r[h]:void 0,i.hasOwnProperty(h)&&l!==u&&(null!=l||null!=u))if("style"===h)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(o.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Di("scroll",e),a||u===l||(a=[])):(a=a||[]).push(h,l))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},No=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ko=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tl(e,t,i)}else n.current=null}function tu(e,t,n){try{n()}catch(i){Tl(e,t,i)}}var nu=!1;function iu(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&tu(t,n,s)}r=r.next}while(r!==i)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function su(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fr],delete t[dr],delete t[pr],delete t[gr],delete t[mr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function hu(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(hu(e,t,n),e=e.sibling;null!==e;)hu(e,t,n),e=e.sibling}var cu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)vu(e,t,n),n=n.sibling}function vu(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Qo||eu(n,t);case 6:var i=cu,r=fu;cu=null,du(e,t,n),fu=r,null!==(cu=i)&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?ur(e.parentNode,n):1===e.nodeType&&ur(e,n),zt(e)):ur(cu,n.stateNode));break;case 4:i=cu,r=fu,cu=n.stateNode.containerInfo,fu=!0,du(e,t,n),cu=i,fu=r;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tu(n,t,a),r=r.next}while(r!==i)}du(e,t,n);break;case 1:if(!Qo&&(eu(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Tl(n,t,o)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Qo=(i=Qo)||null!==n.memoizedState,du(e,t,n),Qo=i):du(e,t,n);break;default:du(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach((function(t){var i=Sl.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,u=o;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,fu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===cu)throw Error(s(160));vu(a,o,r),cu=null,fu=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(h){Tl(r,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),yu(e),4&i){try{iu(3,e,e.return),ru(3,e)}catch(g){Tl(e,e.return,g)}try{iu(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gu(t,e),yu(e),512&i&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),yu(e),512&i&&null!==n&&eu(n,n.return),32&e.flags){var r=e.stateNode;try{fe(r,"")}catch(g){Tl(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&Q(r,a),be(u,o);var h=be(u,a);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];"style"===c?ge(r,f):"dangerouslySetInnerHTML"===c?ce(r,f):"children"===c?fe(r,f):b(r,c,f,h)}switch(u){case"input":$(r,a);break;case"textarea":se(r,a);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var v=a.value;null!=v?ne(r,!!a.multiple,v,!1):d!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[dr]=a}catch(g){Tl(e,e.return,g)}}break;case 6:if(gu(t,e),yu(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Tl(e,e.return,g)}}break;case 3:if(gu(t,e),yu(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gu(t,e),yu(e);break;case 13:gu(t,e),yu(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(zu=Qe())),4&i&&pu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(h=Qo)||c,gu(t,e),Qo=h):gu(t,e),yu(e),8192&i){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!c&&0!==(1&e.mode))for(Jo=e,c=e.child;null!==c;){for(f=Jo=c;null!==Jo;){switch(v=(d=Jo).child,d.tag){case 0:case 11:case 14:case 15:iu(4,d,d.return);break;case 1:eu(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){i=d,n=d.return;try{t=i,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Tl(i,n,g)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){_u(f);continue}}null!==v?(v.return=d,Jo=v):_u(f)}c=c.sibling}e:for(c=null,f=e;;){if(5===f.tag){if(null===c){c=f;try{r=f.stateNode,h?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=f.stateNode,o=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=pe("display",o))}catch(g){Tl(e,e.return,g)}}}else if(6===f.tag){if(null===c)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gu(t,e),yu(e),4&i&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(fe(r,""),i.flags&=-33),hu(e,uu(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;lu(e,uu(e),a);break;default:throw Error(s(161))}}catch(o){Tl(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Jo=e,Mu(e,t,n)}function Mu(e,t,n){for(var i=0!==(1&e.mode);null!==Jo;){var r=Jo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Ko;if(!a){var o=r.alternate,u=null!==o&&null!==o.memoizedState||Qo;o=Ko;var l=Qo;if(Ko=a,(Qo=u)&&!l)for(Jo=r;null!==Jo;)u=(a=Jo).child,22===a.tag&&null!==a.memoizedState?wu(r):null!==u?(u.return=a,Jo=u):wu(r);for(;null!==s;)Jo=s,Mu(s,t,n),s=s.sibling;Jo=r,Ko=o,Qo=l}xu(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Jo=s):xu(e)}}function xu(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||ru(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qo)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,o,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var c=h.memoizedState;if(null!==c){var f=c.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&su(t)}catch(d){Tl(t,t.return,d)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function _u(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function wu(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Tl(t,n,u)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(u){Tl(t,r,u)}}var s=t.return;try{su(t)}catch(u){Tl(t,s,u)}break;case 5:var a=t.return;try{su(t)}catch(u){Tl(t,a,u)}}}catch(u){Tl(t,t.return,u)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var ku,Tu=Math.ceil,Eu=M.ReactCurrentDispatcher,Lu=M.ReactCurrentOwner,Au=M.ReactCurrentBatchConfig,Su=0,Cu=null,Pu=null,Iu=0,Ru=0,Ou=kr(0),Nu=0,Fu=null,Uu=0,Vu=0,Du=0,Bu=null,Gu=null,zu=0,Wu=1/0,ju=null,Hu=!1,Xu=null,Yu=null,qu=!1,Zu=null,Ku=0,Qu=0,$u=null,Ju=-1,el=0;function tl(){return 0!==(6&Su)?Qe():-1!==Ju?Ju:Ju=Qe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Su)&&0!==Iu?Iu&-Iu:null!==ps.transition?(0===el&&(el=pt()),el):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function il(e,t,n,i){if(50<Qu)throw Qu=0,$u=null,Error(s(185));mt(e,n,i),0!==(2&Su)&&e===Cu||(e===Cu&&(0===(2&Su)&&(Vu|=n),4===Nu&&ul(e,Iu)),rl(e,i),1===n&&0===Su&&0===(1&t.mode)&&(Wu=Qe()+500,Dr&&zr()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,u=r[a];-1===u?0!==(o&n)&&0===(o&i)||(r[a]=dt(o,t)):u<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ft(e,e===Cu?Iu:0);if(0===i)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Dr=!0,Gr(e)}(ll.bind(null,e)):Gr(ll.bind(null,e)),ar((function(){0===(6&Su)&&zr()})),n=null;else{switch(Mt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Cl(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Ju=-1,el=0,0!==(6&Su))throw Error(s(327));var n=e.callbackNode;if(wl()&&e.callbackNode!==n)return null;var i=ft(e,e===Cu?Iu:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=ml(e,i);else{t=i;var r=Su;Su|=2;var a=pl();for(Cu===e&&Iu===t||(ju=null,Wu=Qe()+500,dl(e,t));;)try{bl();break}catch(u){vl(e,u)}xs(),Eu.current=a,Su=r,null!==Pu?t=0:(Cu=null,Iu=0,t=Nu)}if(0!==t){if(2===t&&(0!==(r=vt(e))&&(i=r,t=al(e,r))),1===t)throw n=Fu,dl(e,0),ul(e,i),rl(e,Qe()),n;if(6===t)ul(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=ml(e,i))&&(0!==(a=vt(e))&&(i=a,t=al(e,a))),1===t))throw n=Fu,dl(e,0),ul(e,i),rl(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:_l(e,Gu,ju);break;case 3:if(ul(e,i),(130023424&i)===i&&10<(t=zu+500-Qe())){if(0!==ft(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(_l.bind(null,e,Gu,ju),t);break}_l(e,Gu,ju);break;case 4:if(ul(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Tu(i/1960))-i)){e.timeoutHandle=ir(_l.bind(null,e,Gu,ju),i);break}_l(e,Gu,ju);break;default:throw Error(s(329))}}}return rl(e,Qe()),e.callbackNode===n?sl.bind(null,e):null}function al(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Gu,Gu=n,null!==t&&ol(t)),e}function ol(e){null===Gu?Gu=e:Gu.push.apply(Gu,e)}function ul(e,t){for(t&=~Du,t&=~Vu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function ll(e){if(0!==(6&Su))throw Error(s(327));wl();var t=ft(e,0);if(0===(1&t))return rl(e,Qe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var i=vt(e);0!==i&&(t=i,n=al(e,i))}if(1===n)throw n=Fu,dl(e,0),ul(e,t),rl(e,Qe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Gu,ju),rl(e,Qe()),null}function hl(e,t){var n=Su;Su|=1;try{return e(t)}finally{0===(Su=n)&&(Wu=Qe()+500,Dr&&zr())}}function cl(e){null!==Zu&&0===Zu.tag&&0===(6&Su)&&wl();var t=Su;Su|=1;var n=Au.transition,i=bt;try{if(Au.transition=null,bt=1,e)return e()}finally{bt=i,Au.transition=n,0===(6&(Su=t))&&zr()}}function fl(){Ru=Ou.current,Tr(Ou)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Pu)for(n=Pu.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rr();break;case 3:ra(),Tr(Sr),Tr(Ar),ha();break;case 5:aa(i);break;case 4:ra();break;case 13:case 19:Tr(oa);break;case 10:_s(i.type._context);break;case 22:case 23:fl()}n=n.return}if(Cu=e,Pu=e=Ol(e.current,null),Iu=Ru=t,Nu=0,Fu=null,Du=Vu=Uu=0,Gu=Bu=null,null!==Es){for(t=0;t<Es.length;t++)if(null!==(i=(n=Es[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Es=null}return e}function vl(e,t){for(;;){var n=Pu;try{if(xs(),ca.current=so,ma){for(var i=va.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ma=!1}if(da=0,ga=pa=va=null,ya=!1,ba=0,Lu.current=null,null===n||null===n.return){Nu=1,Fu=t,Pu=null;break}e:{var a=e,o=n.return,u=n,l=t;if(t=Iu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var h=l,c=u,f=c.tag;if(0===(1&c.mode)&&(0===f||11===f||15===f)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=mo(o);if(null!==v){v.flags&=-257,yo(v,o,u,0,t),1&v.mode&&go(a,h,t),l=h;var p=(t=v).updateQueue;if(null===p){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}if(0===(1&t)){go(a,h,t),gl();break e}l=Error(s(426))}else if(rs&&1&u.mode){var m=mo(o);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),yo(m,o,u,0,t),vs(lo(l,u));break e}}a=l=lo(l,u),4!==Nu&&(Nu=2),null===Bu?Bu=[a]:Bu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fs(a,vo(0,l,t));break e;case 1:u=l;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yu||!Yu.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Fs(a,po(a,u,t));break e}}a=a.return}while(null!==a)}xl(n)}catch(M){t=M,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function pl(){var e=Eu.current;return Eu.current=so,null===e?so:e}function gl(){0!==Nu&&3!==Nu&&2!==Nu||(Nu=4),null===Cu||0===(268435455&Uu)&&0===(268435455&Vu)||ul(Cu,Iu)}function ml(e,t){var n=Su;Su|=2;var i=pl();for(Cu===e&&Iu===t||(ju=null,dl(e,t));;)try{yl();break}catch(r){vl(e,r)}if(xs(),Su=n,Eu.current=i,null!==Pu)throw Error(s(261));return Cu=null,Iu=0,Nu}function yl(){for(;null!==Pu;)Ml(Pu)}function bl(){for(;null!==Pu&&!Ze();)Ml(Pu)}function Ml(e){var t=ku(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?xl(e):Pu=t,Lu.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qo(n,t,Ru)))return void(Pu=n)}else{if(null!==(n=Zo(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Nu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Nu&&(Nu=5)}function _l(e,t,n){var i=bt,r=Au.transition;try{Au.transition=null,bt=1,function(e,t,n,i){do{wl()}while(null!==Zu);if(0!==(6&Su))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===Cu&&(Pu=Cu=null,Iu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Cl(tt,(function(){return wl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Au.transition,Au.transition=null;var o=bt;bt=1;var u=Su;Su|=4,Lu.current=null,function(e,t){if(er=jt,di(e=fi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,u=-1,l=-1,h=0,c=0,f=e,d=null;t:for(;;){for(var v;f!==n||0!==r&&3!==f.nodeType||(u=o+r),f!==a||0!==i&&3!==f.nodeType||(l=o+i),3===f.nodeType&&(o+=f.nodeValue.length),null!==(v=f.firstChild);)d=f,f=v;for(;;){if(f===e)break t;if(d===n&&++h===r&&(u=o),d===a&&++c===i&&(l=o),null!==(v=f.nextSibling))break;d=(f=d).parentNode}f=v}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},jt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var M=t.stateNode.containerInfo;1===M.nodeType?M.textContent="":9===M.nodeType&&M.documentElement&&M.removeChild(M.documentElement);break;default:throw Error(s(163))}}catch(x){Tl(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}p=nu,nu=!1}(e,n),mu(n,e),vi(tr),jt=!!er,tr=er=null,e.current=n,bu(n,e,r),Ke(),Su=u,bt=o,Au.transition=a}else e.current=n;if(qu&&(qu=!1,Zu=e,Ku=r),a=e.pendingLanes,0===a&&(Yu=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hu)throw Hu=!1,e=Xu,Xu=null,e;0!==(1&Ku)&&0!==e.tag&&wl(),a=e.pendingLanes,0!==(1&a)?e===$u?Qu++:(Qu=0,$u=e):Qu=0,zr()}(e,t,n,i)}finally{Au.transition=r,bt=i}return null}function wl(){if(null!==Zu){var e=Mt(Ku),t=Au.transition,n=bt;try{if(Au.transition=null,bt=16>e?16:e,null===Zu)var i=!1;else{if(e=Zu,Zu=null,Ku=0,0!==(6&Su))throw Error(s(331));var r=Su;for(Su|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var h=u[l];for(Jo=h;null!==Jo;){var c=Jo;switch(c.tag){case 0:case 11:case 15:iu(8,c,a)}var f=c.child;if(null!==f)f.return=c,Jo=f;else for(;null!==Jo;){var d=(c=Jo).sibling,v=c.return;if(au(c),c===h){Jo=null;break}if(null!==d){d.return=v,Jo=d;break}Jo=v}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:iu(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var b=e.current;for(Jo=b;null!==Jo;){var M=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==M)M.return=o,Jo=M;else e:for(o=b;null!==Jo;){if(0!==(2048&(u=Jo).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){Tl(u,u.return,_)}if(u===o){Jo=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Jo=x;break e}Jo=u.return}}if(Su=r,zr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(_){}i=!0}return i}finally{bt=n,Au.transition=t}}return!1}function kl(e,t,n){e=Os(e,t=vo(0,t=lo(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),rl(e,t))}function Tl(e,t,n){if(3===e.tag)kl(e,e,n);else for(;null!==t;){if(3===t.tag){kl(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yu||!Yu.has(i))){t=Os(t,e=po(t,e=lo(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),rl(t,e));break}}t=t.return}}function El(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Cu===e&&(Iu&n)===n&&(4===Nu||3===Nu&&(130023424&Iu)===Iu&&500>Qe()-zu?dl(e,0):Du|=n),rl(e,t)}function Ll(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var n=tl();null!==(e=Ss(e,t))&&(mt(e,t,n),rl(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ll(e,n)}function Sl(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Ll(e,n)}function Cl(e,t){return Ye(e,t)}function Pl(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Il(e,t,n,i){return new Pl(e,t,n,i)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Il(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nl(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Rl(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Fl(n.children,r,a,t);case k:o=8,r|=8;break;case T:return(e=Il(12,n,t,2|r)).elementType=T,e.lanes=a,e;case S:return(e=Il(13,n,t,r)).elementType=S,e.lanes=a,e;case C:return(e=Il(19,n,t,r)).elementType=C,e.lanes=a,e;case R:return Ul(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case L:o=9;break e;case A:o=11;break e;case P:o=14;break e;case I:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Il(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Fl(e,t,n,i){return(e=Il(7,e,i,t)).lanes=n,e}function Ul(e,t,n,i){return(e=Il(22,e,i,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Vl(e,t,n){return(e=Il(6,e,null,t)).lanes=n,e}function Dl(e,t,n){return(t=Il(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gl(e,t,n,i,r,s,a,o,u){return e=new Bl(e,t,n,o,u),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Il(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function zl(e){if(!e)return Lr;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ir(n))return Nr(e,n,t)}return t}function Wl(e,t,n,i,r,s,a,o,u){return(e=Gl(n,i,!0,e,0,s,0,o,u)).context=zl(null),n=e.current,(s=Rs(i=tl(),r=nl(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,r),e.current.lanes=r,mt(e,r,i),rl(e,i),e}function jl(e,t,n,i){var r=t.current,s=tl(),a=nl(r);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Os(r,t,a))&&(il(e,r,a,s),Ns(e,r,a)),a}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yl(e,t){Xl(e,t),(e=e.alternate)&&Xl(e,t)}ku=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Sr.current)Mo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Mo=!1,function(e,t,n){switch(t.tag){case 3:Co(t),ds();break;case 5:sa(t);break;case 1:Ir(t.type)&&Fr(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(ms,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er(oa,1&oa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vo(e,t,n):(Er(oa,1&oa.current),null!==(e=Ho(e,t,n))?e.sibling:null);Er(oa,1&oa.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Wo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(oa,oa.current),i)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return Ho(e,t,n)}(e,t,n);Mo=0!==(131072&e.flags)}else Mo=!1,rs&&0!==(1048576&t.flags)&&Jr(t,Xr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;jo(e,t),e=t.pendingProps;var r=Pr(t,Ar.current);ks(t,n),r=wa(null,t,i,e,r,n);var a=ka();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(i)?(a=!0,Fr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ps(t),r.updater=Gs,t.stateNode=r,r._reactInternals=t,Hs(t,i,e,n),t=So(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),xo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(jo(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(i),e=gs(i,e),r){case 0:t=Lo(null,t,i,e,n);break e;case 1:t=Ao(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=wo(null,t,i,gs(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Lo(e,t,i,r=t.elementType===i?r:gs(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ao(e,t,i,r=t.elementType===i?r:gs(i,r),n);case 3:e:{if(Co(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Is(e,t),Us(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,i,n,r=lo(Error(s(423)),t));break e}if(i!==r){t=Po(e,t,i,n,r=lo(Error(s(424)),t));break e}for(is=lr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=Qs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ds(),i===r){t=Ho(e,t,n);break e}xo(e,t,i,n)}t=t.child}return t;case 5:return sa(t),null===e&&ls(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),Eo(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Vo(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ks(t,null,i,n):xo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,_o(e,t,i,r=t.elementType===i?r:gs(i,r),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Er(ms,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Sr.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){o=a.child;for(var l=u.firstContext;null!==l;){if(l.context===i){if(1===a.tag){(l=Rs(-1,n&-n)).tag=2;var h=a.updateQueue;if(null!==h){var c=(h=h.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),h.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ws(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),ws(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,ks(t,n),i=i(r=Ts(r)),t.flags|=1,xo(e,t,i,n),t.child;case 14:return r=gs(i=t.type,t.pendingProps),wo(e,t,i,r=gs(i.type,r),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:gs(i,r),jo(e,t),t.tag=1,Ir(i)?(e=!0,Fr(t)):e=!1,ks(t,n),Ws(t,i,r),Hs(t,i,r,n),So(null,t,i,!0,e,n);case 19:return Wo(e,t,n);case 22:return To(e,t,n)}throw Error(s(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Zl(e){this._internalRoot=e}function Kl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function eh(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Hl(a);o.call(e)}}jl(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Hl(a);s.call(e)}}var a=Wl(t,i,e,0,null,!1,0,"",Jl);return e._reactRootContainer=a,e[vr]=a.current,zi(8===e.nodeType?e.parentNode:e),cl(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Hl(u);o.call(e)}}var u=Gl(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=u,e[vr]=u.current,zi(8===e.nodeType?e.parentNode:e),cl((function(){jl(t,u,n,i)})),u}(n,t,e,r,i);return Hl(a)}Kl.prototype.render=Zl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));jl(e,t,null,null)},Kl.prototype.unmount=Zl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){jl(null,e,null,null)})),t[vr]=null}},Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ut(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Qe()),0===(6&Su)&&(Wu=Qe()+500,zr()))}break;case 13:cl((function(){var t=Ss(e,1);if(null!==t){var n=tl();il(t,e,1,n)}})),Yl(e,1)}},_t=function(e){if(13===e.tag){var t=Ss(e,134217728);if(null!==t)il(t,e,134217728,tl());Yl(e,134217728)}},wt=function(e){if(13===e.tag){var t=nl(e),n=Ss(e,t);if(null!==n)il(n,e,t,tl());Yl(e,t)}},kt=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xr(i);if(!r)throw Error(s(90));Y(i),$(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=hl,Se=cl;var th={usingClientEntryPoint:!1,Events:[br,Mr,xr,Ee,Le,hl]},nh={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ih={bundleType:nh.bundleType,version:nh.version,rendererPackageName:nh.rendererPackageName,rendererConfig:nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{rt=rh.inject(ih),st=rh}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(s(299));var n=!1,i="",r=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Gl(e,1,!1,null,0,n,0,i,r),e[vr]=t.current,zi(8===e.nodeType?e.parentNode:e),new Zl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!$l(t))throw Error(s(200));return eh(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wl(t,null,e,1,null!=n?n:null,r,0,a,o),e[vr]=t.current,zi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Kl(t)},t.render=function(e,t,n){if(!$l(t))throw Error(s(200));return eh(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(s(40));return!!e._reactRootContainer&&(cl((function(){eh(null,null,e,!1,(function(){e._reactRootContainer=null,e[vr]=null}))})),!0)},t.unstable_batchedUpdates=hl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$l(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eh(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,n){"use strict";var i=n(1168);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},5918:function(e,t,n){"use strict";var i=n(7313),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var i,s={},l=null,h=null;for(i in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(h=t.ref),t)a.call(t,i)&&!u.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:l,ref:h,props:s,_owner:o.current}}t.jsx=l,t.jsxs=l},306:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||v}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var M=b.prototype=new y;M.constructor=b,p(M,m.prototype),M.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!k.hasOwnProperty(r)&&(s[r]=t[r]);var u=arguments.length-2;if(1===u)s.children=i;else if(1<u){for(var l=Array(u),h=0;h<u;h++)l[h]=arguments[h+2];s.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===s[r]&&(s[r]=u[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:w.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var L=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var u=!1;if(null===e)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case i:u=!0}}if(u)return a=a(u=e),e=""===s?"."+A(u,0):s,x(a)?(r="",null!=e&&(r=e.replace(L,"$&/")+"/"),S(a,t,r,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(L,"$&/")+"/")+e)),t.push(a)),1;if(u=0,s=""===s?".":s+":",x(e))for(var l=0;l<e.length;l++){var h=s+A(o=e[l],l);u+=S(o,t,r,h,a)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),l=0;!(o=e.next()).done;)u+=S(o=o.value,t,r,h=s+A(o,l++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function C(e,t,n){if(null==e)return e;var i=[],r=0;return S(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)_.call(t,l)&&!k.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){u=Array(l);for(var h=0;h<l;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,u=e[o],l=o+1,h=e[l];if(0>s(u,n))l<r&&0>s(h,u)?(e[i]=h,e[l]=n,i=l):(e[i]=u,e[o]=n,i=o);else{if(!(l<r&&0>s(h,n)))break e;e[i]=h,e[l]=n,i=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var l=[],h=[],c=1,f=null,d=3,v=!1,p=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function M(e){for(var t=i(h);null!==t;){if(null===t.callback)r(h);else{if(!(t.startTime<=e))break;r(h),t.sortIndex=t.expirationTime,n(l,t)}t=i(h)}}function x(e){if(g=!1,M(e),!p)if(null!==i(l))p=!0,R(_);else{var t=i(h);null!==t&&O(x,t.startTime-e)}}function _(e,n){p=!1,g&&(g=!1,y(E),E=-1),v=!0;var s=d;try{for(M(n),f=i(l);null!==f&&(!(f.expirationTime>n)||e&&!S());){var a=f.callback;if("function"===typeof a){f.callback=null,d=f.priorityLevel;var o=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?f.callback=o:f===i(l)&&r(l),M(n)}else r(l);f=i(l)}if(null!==f)var u=!0;else{var c=i(h);null!==c&&O(x,c.startTime-n),u=!1}return u}finally{f=null,d=s,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,T=null,E=-1,L=5,A=-1;function S(){return!(t.unstable_now()-A<L)}function C(){if(null!==T){var e=t.unstable_now();A=e;var n=!0;try{n=T(!0,e)}finally{n?w():(k=!1,T=null)}}else k=!1}if("function"===typeof b)w=function(){b(C)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,I=P.port2;P.port1.onmessage=C,w=function(){I.postMessage(null)}}else w=function(){m(C,0)};function R(e){T=e,k||(k=!0,w())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:c++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(h,e),null===i(l)&&e===i(h)&&(g?(y(E),E=-1):g=!0,O(x,s-a))):(e.sortIndex=o,n(l,e),p||v||(p=!0,R(_))),e},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var i=n(3897);e.exports=function(e){if(Array.isArray(e))return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var i=n(4062);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var i=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var i=n(3808),r=n(9617),s=n(4993);e.exports=function(e){var t=r();return function(){var n,r=i(e);if(t){var a=i(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var i=n(4062);e.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var i=n(1753);function r(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=r=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=r=function(e,t,n){var r=i(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(arguments.length<3?e:n):s.value}},e.exports.__esModule=!0,e.exports.default=e.exports),r.apply(this,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var i=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,a,o=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=s.call(n)).done)&&(o.push(i.value),o.length!==t);u=!0);}catch(h){l=!0,r=h}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var i=n(8698).default,r=n(6115);e.exports=function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var i=n(8698).default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,s=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var r=t&&t.prototype instanceof p?t:p,s=Object.create(r.prototype),o=new A(i||[]);return a(s,"_invoke",{value:k(e,n,o)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=f;var v={};function p(){}function g(){}function m(){}var y={};c(y,u,(function(){return this}));var b=Object.getPrototypeOf,M=b&&b(b(S([])));M&&M!==n&&s.call(M,u)&&(y=M);var x=m.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,a,o,u){var l=d(e[r],e,a);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==i(c)&&s.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(c).then((function(e){h.value=e,o(h)}),(function(e){return n("throw",e,o,u)}))}u(l.arg)}var r;a(this,"_invoke",{value:function(e,i){function s(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(s,s):s()}})}function k(e,t,n){var i="suspendedStart";return function(r,s){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw s;return C()}for(n.method=r,n.arg=s;;){var a=n.delegate;if(a){var o=T(a,n);if(o){if(o===v)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=d(e,t,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}function T(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return g.prototype=m,a(x,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:g,configurable:!0}),g.displayName=c(m,h,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,h,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,l,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,i,r,s){void 0===s&&(s=Promise);var a=new w(f(e,n,i,r),s);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(x),c(x,h,"Generator"),c(x,u,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=S,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=s.call(r,"catchLoc"),u=s.call(r,"finallyLoc");if(o&&u){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var i=n(5372),r=n(8872),s=n(6116),a=n(2218);e.exports=function(e,t){return i(e)||r(e,t)||s(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var i=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var i=n(3405),r=n(9498),s=n(6116),a=n(2281);e.exports=function(e){return i(e)||r(e)||s(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var i=n(8698).default;e.exports=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var i=n(8698).default,r=n(5036);e.exports=function(e){var t=r(e,"string");return"symbol"===i(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var i=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".13c75b4e.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="pando:";n.l=function(i,r,s,a){if(e[i])e[i].push(r);else{var o,u;if(void 0!==s)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var c=l[h];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+s){o=c;break}}o||(u=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var f=function(t,n){o.onerror=o.onload=null,clearTimeout(d);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),u&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=function(t,i){var r,s,a=i[0],o=i[1],u=i[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(u)u(n)}for(t&&t(i);l<a.length;l++)s=a[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkpando=self.webpackChunkpando||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";var e=n(1739),t=function(e){e&&e instanceof Function&&n.e(27).then(n.bind(n,4027)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),s(e),a(e)}))};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(C){h=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,a=Object.create(r.prototype),o=new L(i||[]);return s(a,"_invoke",{value:w(e,n,o)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var d={};function v(){}function p(){}function g(){}var m={};h(m,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==t&&n.call(b,o)&&(m=b);var M=g.prototype=v.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(s,a,o,u){var l=f(e[s],e,a);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==i(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(c).then((function(e){h.value=e,o(h)}),(function(e){return r("throw",e,o,u)}))}u(l.arg)}var a;s(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,n){var i="suspendedStart";return function(r,s){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw s;return S()}for(n.method=r,n.arg=s;;){var a=n.delegate;if(a){var o=k(a,n);if(o){if(o===d)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=f(e,t,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=f(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=g,s(M,"constructor",{value:g,configurable:!0}),s(g,"constructor",{value:p,configurable:!0}),p.displayName=h(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,h(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},x(_.prototype),h(_.prototype,u,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var a=new _(c(t,n,i,r),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(M),h(M,l,"Generator"),h(M,o,(function(){return this})),h(M,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(o&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function s(e,t,n,i,r,s,a){try{var o=e[s](a),u=o.value}catch(l){return void n(l)}o.done?t(u):Promise.resolve(u).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){s(a,i,r,o,u,"next",e)}function u(e){s(a,i,r,o,u,"throw",e)}o(void 0)}))}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,a,o=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=s.call(n)).done)&&(o.push(i.value),o.length!==t);u=!0);}catch(h){l=!0,r=h}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l,h,c=n(7313),f=n(6123),d=n.n(f);function v(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function p(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function m(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){e[e.CHAPTER_1=0]="CHAPTER_1",e[e.CHAPTER_2=1]="CHAPTER_2",e[e.CHAPTER_3=2]="CHAPTER_3"}(l||(l={}));var b=1920/1080,M="SHOW_CLUE",x="SHOW_ALL_CHAPTER_CLUE",_="RESET_LEVEL",w="NEXT_LEVEL",k=m((function e(){y(this,e)}));k.WORLD_WIDTH=1920,k.WORLD_HEIGHT=1080,k.GRID_ROW=7,k.GRID_COL=11,k.BOARD_X=.061*k.WORLD_WIDTH,k.BOARD_Y=.272*k.WORLD_HEIGHT,k.CELL_SIZE=.0525*k.WORLD_WIDTH,k.CELL_DISPLAY_SIZE=1*k.CELL_SIZE,k.PIECE_BOARD_GRID_ROW=3,k.PIECE_BOARD_GRID_COL=2,k.PIECE_BOARD_X=.675*k.WORLD_WIDTH,k.PIECE_BOARD_Y=.34*k.WORLD_HEIGHT,k.PIECE_SIZE=.085*k.WORLD_WIDTH,k.PIECE_DISPLAY_SIZE=.98*k.PIECE_SIZE,k.CLUE_X=.86*k.WORLD_WIDTH,k.CLUE_Y=.34*k.WORLD_HEIGHT,k.CLUE_WIDTH=.082*k.WORLD_WIDTH,k.CLUE_HEIGHT=169*k.CLUE_WIDTH/175,k.CLUE_BOT_GAP=.02*k.WORLD_HEIGHT,k.BUTTON_X=.675*k.WORLD_WIDTH,k.BUTTON_Y=.83*k.WORLD_HEIGHT,k.BUTTON_WIDTH=.173*k.WORLD_WIDTH,k.BUTTON_HEIGHT=129*k.BUTTON_WIDTH/331;var T=[[0,1,0,1],[1,1,0,0],[0,1,1,0],[1,0,1,0],[1,0,0,1],[0,0,1,1],[1,1,1,0],[0,1,1,1],[1,1,0,1],[1,0,1,1],[1,1,1,1]],E=[1,2,3,4,5,6,7,8,9,10,11],L=[{title:"Why does John go to the lake everyday?",story:"According to the villagers, John is a beautiful but lonely youth. John loves to look at himself so much. He knelt beside a lake to contemplate his own beauty everyday.",clues:["John is a beautiful youth","He is lonely","He loves to look at himself so much","He knelt daily beside a lake to contemplate his own beauty"],clueOrders:[1,2,3,4]},{title:"The cause of his death?",story:"One day, his beauty reflection on the water surface fascinated him so he really wanted to touch himself on the water surface. Unfornately he fell into the lake then drowned because he doesn't know how to swim.",clues:["He wanted to touch himself by touching the water surface. Unfornately he fell into the lake","The boy can't swim","His corpse was found in the lake"],clueOrders:[5,6,7]},{title:"How could the lake turn salty then dry?",story:"Village elders said that there're goddesses in the forest. After asking for the reason, they told a story about the pretty Spirit lake. She could see her own beauty reflected in the depths of John's eyes everytime he contemplates himself through the water surface. So after his death, she was very sad because she couldn't see her beauty anymore. She cried a river so the fresh water in the lake turned  into salty tears. Then she died because of sadness and sorrow, that's why the lake was dried.",clues:["There was a pretty Spirit lake","She could see her own beauty reflected in the depths of his eyes","She cried a river after John's death because she couldn't see herself anymore. So the fresh water in the lake was transformed into a lake of salty tears.","The Spirit was dead because of sadness and sorrow. So the lake was dried."],clueOrders:[8,9,10,11]}],A=(p(h={},l.CHAPTER_1,{sourceIndex:37,sourcePieceIndex:10,targetIndexes:[2,30,55,75],targetPieceIndexes:[10,10,10,10],clueIndex:0}),p(h,l.CHAPTER_2,{sourceIndex:55,sourcePieceIndex:10,targetIndexes:[15,42,70],targetPieceIndexes:[10,10,10],clueIndex:1}),p(h,l.CHAPTER_3,{sourceIndex:44,sourcePieceIndex:10,targetIndexes:[0,28,64,10],targetPieceIndexes:[10,10,10,10],clueIndex:2}),h),S=new(n(8041).EventEmitter),C="clueModal_container__fTxof",P="clueModal_clueWrapper__wJoT4",I="clueModal_nextButton__cpMcj",R="clueModal_clueImageRow__PNSt2",O="clueModal_clueWrapper2__gjmyC",N=n(1168);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},F.apply(this,arguments)}function U(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function D(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,V(e,t)}function B(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var G=!1,z=c.createContext(null),W=function(e){return e.scrollTop},j="unmounted",H="exited",X="entering",Y="entered",q="exiting",Z=function(e){function t(t,n){var i;i=e.call(this,t,n)||this;var r,s=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?s?(r=H,i.appearStatus=X):r=Y:r=t.unmountOnExit||t.mountOnEnter?j:H,i.state={status:r},i.nextCallback=null,i}D(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===j?{status:H}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==X&&n!==Y&&(t=X):n!==X&&n!==Y||(t=q)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!==typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===X){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this);n&&W(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===H&&this.setState({status:j})},n.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,r=this.props.nodeRef?[i]:[N.findDOMNode(this),i],s=r[0],a=r[1],o=this.getTimeouts(),u=i?o.appear:o.enter;!e&&!n||G?this.safeSetState({status:Y},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:X},(function(){t.props.onEntering(s,a),t.onTransitionEnd(u,(function(){t.safeSetState({status:Y},(function(){t.props.onEntered(s,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:N.findDOMNode(this);t&&!G?(this.props.onExit(i),this.safeSetState({status:q},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:H},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:H},(function(){e.props.onExited(i)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=r[0],a=r[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===j)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,U(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return c.createElement(z.Provider,{value:null},"function"===typeof n?n(e,i):c.cloneElement(c.Children.only(n),i))},t}(c.Component);function K(){}Z.contextType=z,Z.propTypes={},Z.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:K,onEntering:K,onEntered:K,onExit:K,onExiting:K,onExited:K},Z.UNMOUNTED=j,Z.EXITED=H,Z.ENTERING=X,Z.ENTERED=Y,Z.EXITING=q;var Q=Z,$=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return i=t,void((n=e).classList?n.classList.remove(i):"string"===typeof n.className?n.className=B(n.className,i):n.setAttribute("class",B(n.className&&n.className.baseVal||"",i)));var n,i}))},J=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var i=t.resolveArguments(e,n),r=i[0],s=i[1];t.removeClasses(r,"exit"),t.addClass(r,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var i=t.resolveArguments(e,n),r=i[0],s=i[1]?"appear":"enter";t.addClass(r,s,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var i=t.resolveArguments(e,n),r=i[0],s=i[1]?"appear":"enter";t.removeClasses(r,s),t.addClass(r,s,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,i="string"===typeof n,r=i?""+(i&&n?n+"-":"")+e:n[e];return{baseClassName:r,activeClassName:i?r+"-active":n[e+"Active"],doneClassName:i?r+"-done":n[e+"Done"]}},t}D(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var i=this.getClassNames(t)[n+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&r&&(i+=" "+r),"active"===n&&e&&W(e),i&&(this.appliedClasses[t][n]=i,function(e,t){e&&t&&t.split(" ").forEach((function(t){return i=t,void((n=e).classList?n.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,i)||("string"===typeof n.className?n.className=n.className+" "+i:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+i)));var n,i}))}(e,i))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],i=n.base,r=n.active,s=n.done;this.appliedClasses[t]={},i&&$(e,i),r&&$(e,r),s&&$(e,s)},n.render=function(){var e=this.props,t=(e.classNames,U(e,["classNames"]));return c.createElement(Q,F({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);J.defaultProps={classNames:""},J.propTypes={};var ee=J,te=n(6417),ne=document.getElementById("modal"),ie=function(e){var t=e.backdrop,n=void 0===t||t,i=e.children,r=e.dismissOnBackdropClick,s=void 0===r||r,a=e.visible,o=void 0!==a&&a,l=e.zIndex,h=void 0===l?10:l,f=e.backdropColor,d=void 0===f?"rgba(0,0,0,0.8)":f,v=e.onDismiss,p=e.onEntered,g=u((0,c.useState)(!1),2),m=g[0],y=g[1],b=u((0,c.useState)(!1),2),M=b[0],x=b[1],_=(0,c.createRef)(),w=(0,c.useMemo)((function(){return document.createElement("div")}),[]);if((0,c.useEffect)((function(){return null===ne||void 0===ne||ne.appendChild(w),function(){null===ne||void 0===ne||ne.removeChild(w)}}),[w]),(0,c.useEffect)((function(){var e=null;return o?y(!0):(x(!1),e=setTimeout((function(){y(!1)}),500)),function(){e&&clearTimeout(e)}}),[o]),(0,c.useEffect)((function(){m&&x(!0)}),[m]),!m)return null;var k=(0,te.jsxs)("div",{className:"modal".concat(o?" on":""),style:{zIndex:h},children:[o&&(0,te.jsx)("div",{className:"backdrop",style:{opacity:n?1:0,backgroundColor:d},onClick:function(){s&&v()}}),(0,te.jsx)(ee,{classNames:"modal-container",in:M,nodeRef:_,timeout:500,onEntered:p,children:(0,te.jsx)("div",{className:"modal-content noselect",ref:_,children:i})},"modal-container")]});return N.createPortal(k,w)},re={1:"assets/card_01.png",2:"assets/card_02.png",3:"assets/card_03.png",4:"assets/card_04.png",5:"assets/card_05.png",6:"assets/card_06.png",7:"assets/card_07.png",8:"assets/card_09.png",9:"assets/card_10.png",10:"assets/card_11.png",11:"assets/card_12.png"},se=function(){var e=u((0,c.useState)(!1),2),t=e[0],n=e[1],i=u((0,c.useState)(!1),2),r=i[0],s=i[1],a=u((0,c.useState)(),2),o=a[0],h=a[1],f=u((0,c.useState)(l.CHAPTER_1),2),v=f[0],p=f[1];(0,c.useEffect)((function(){var e=function(e){var t=e.chapter,i=e.clueOrder,r=A[t].clueIndex,a=L[r];h({clues:a,order:i,index:a.clueOrders.indexOf(i)}),s(!1),n(!0)},t=function(e){var t=e.chapter;p(t),s(!0),n(!0)};return S.addListener(M,e),S.addListener(x,t),function(){S.removeListener(M,e),S.removeListener(x,t)}}),[]);var g=(0,c.useMemo)((function(){if(!r&&o)return(0,te.jsxs)("div",{className:P,children:[(0,te.jsx)("img",{src:re[o.order],alt:""}),(0,te.jsx)("span",{className:"font",children:o.clues.clues[o.index]})]});if(r&&"number"===typeof v){var e=L[A[v].clueIndex];return(0,te.jsxs)("div",{className:O,children:[(0,te.jsx)("div",{className:R,children:e.clueOrders.map((function(e,t){return(0,te.jsx)("img",{src:re[e],alt:""},"clue_".concat(t))}))}),(0,te.jsx)("span",{className:"font",children:e.story})]})}return null}),[o,r,v]);return(0,te.jsx)(ie,{visible:t,onDismiss:function(){},zIndex:1e6,backdropColor:"#0b0d16",backdrop:!0,children:(0,te.jsxs)("div",{className:C,children:[g,r&&v!==l.CHAPTER_3?(0,te.jsxs)("div",{className:d()(I,"font"),onClick:function(){n(!1),h(null),s(!1),S.emit(w)},children:["Next",">>"]}):r?null:(0,te.jsx)("div",{className:d()(I,"font"),onClick:function(){n(!1),h(null),s(!1)},children:"Back"})]})})},ae=n(9997),oe=n(2955),ue="game_wrapper__pj+aH";function le(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var s=fe(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}(this,n)}}function ve(e,t,n,i,r){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}var pe,ge,me,ye,be,Me,xe,_e,we,ke,Te,Ee,Le,Ae=n(1428),Se=n.n(Ae),Ce=n(3913),Pe=n.n(Ce),Ie=function(e,t,n,i,r,s){var a=Math.ceil(t/r),o=e%a,u=Math.floor(e/a);Re(o,u,n,i,r,s)},Re=function(e,t,n,i,r,s){s.set(n+e*r,i+t*r)},Oe=function(e,t){return Math.floor(function(e,t){return Math.random()*(t-e)+e}(e,t))},Ne=(pe=(0,ae.tB)("shapeRenderer"),ge=(0,ae.tB)("camera"),me=(0,ae.tB)("gameState"),ye=(0,ae.tB)("inputHandlingSystem"),be=(0,ae.tB)("assetManager"),Me=(0,ae.tB)("batch"),xe=function(e){ce(n,e);var t=de(n);function n(){var e;y(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return le(e=t.call.apply(t,[this].concat(r)),"shapeRenderer",_e,he(e)),le(e,"camera",we,he(e)),le(e,"gameState",ke,he(e)),le(e,"inputHandlingSystem",Te,he(e)),le(e,"assetManager",Ee,he(e)),le(e,"batch",Le,he(e)),e.yellow=new oe.Color(1,1,0,1),e.tmpVec2=new oe.Vector2(0,0),e.boardRect={x:k.BOARD_X,y:k.BOARD_Y,width:k.CELL_SIZE*k.GRID_COL,height:k.CELL_SIZE*k.GRID_ROW},e.piecesBoardRect={x:k.PIECE_BOARD_X,y:k.PIECE_BOARD_Y,width:k.PIECE_SIZE*k.PIECE_BOARD_GRID_COL,height:k.PIECE_SIZE*k.PIECE_BOARD_GRID_ROW},e.pieceHitboxes=[],e.pieceTextures={},e.sourceTexture=void 0,e.hiddenTexture=void 0,e.clueButtonEmptyTexture=void 0,e.clueTextures={},e.clueButtonTextures={},e.buttonTexture=void 0,e.graph=Se()(),e}return m(n,[{key:"initialized",value:function(){for(var e=0;e<k.PIECE_BOARD_GRID_COL*k.PIECE_BOARD_GRID_ROW;e++)Ie(e,this.piecesBoardRect.width,k.PIECE_BOARD_X,k.PIECE_BOARD_Y,k.PIECE_SIZE,this.tmpVec2),this.pieceHitboxes.push({x:this.tmpVec2.x,y:this.tmpVec2.y,width:k.PIECE_DISPLAY_SIZE,height:k.PIECE_DISPLAY_SIZE});var t=this.assetManager.getAtlas("atlas");if(t){for(var n=0;n<T.length;n++){var i="path".concat(T[n].join(""));this.pieceTextures[n]=t.findRegion(i)}this.sourceTexture=t.findRegion("start"),this.hiddenTexture=t.findRegion("clue",-1),this.clueButtonEmptyTexture=t.findRegion("clue_button",0);for(var r=0;r<E.length;r++){var s=E[r];this.clueButtonTextures[s]=t.findRegion("clue_button",s),this.clueTextures[s]=t.findRegion("clue",s)}this.buttonTexture=t.findRegion("retry button")}}},{key:"renderBoard",value:function(){}},{key:"renderBoardSourceAndTargets",value:function(){this.batch.begin();var e=this.gameState.board.findIndex((function(e){return"source"===e.type}));e>-1&&("source"===this.gameState.board[e].type&&(Ie(e,this.boardRect.width,k.BOARD_X,k.BOARD_Y,k.CELL_SIZE,this.tmpVec2),this.sourceTexture&&this.sourceTexture.draw(this.batch,this.tmpVec2.x,this.tmpVec2.y,k.CELL_SIZE,k.CELL_SIZE)));for(var t=0;t<this.gameState.board.length;t++){var n=this.gameState.board[t];if("target"===n.type)if(Ie(t,this.boardRect.width,k.BOARD_X,k.BOARD_Y,k.CELL_SIZE,this.tmpVec2),this.gameState.unlockedClues.includes(n.clueOrder)){var i=this.clueTextures[n.clueOrder];i&&i.draw(this.batch,this.tmpVec2.x,this.tmpVec2.y,k.CELL_SIZE,k.CELL_SIZE)}else this.hiddenTexture&&this.hiddenTexture.draw(this.batch,this.tmpVec2.x,this.tmpVec2.y,k.CELL_SIZE,k.CELL_SIZE)}this.batch.end()}},{key:"renderBoardCell",value:function(){this.batch.begin();for(var e=0;e<this.gameState.board.length;e++){var t=this.gameState.board[e];"piece"===t.type&&(Ie(e,this.boardRect.width,k.BOARD_X,k.BOARD_Y,k.CELL_SIZE,this.tmpVec2),this.renderPiece(this.tmpVec2.x+k.CELL_SIZE/2,this.tmpVec2.y+k.CELL_SIZE/2,t.piece,k.CELL_DISPLAY_SIZE))}this.batch.end()}},{key:"renderPiecesBoard",value:function(){for(var e=0;e<k.PIECE_BOARD_GRID_ROW+1;e++)Re(0,e,k.PIECE_BOARD_X,k.PIECE_BOARD_Y,k.PIECE_SIZE,this.tmpVec2),this.shapeRenderer.line(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.x+this.piecesBoardRect.width,this.tmpVec2.y,oe.Color.WHITE);for(var t=0;t<k.PIECE_BOARD_GRID_COL+1;t++)Re(t,0,k.PIECE_BOARD_X,k.PIECE_BOARD_Y,k.PIECE_SIZE,this.tmpVec2),this.shapeRenderer.line(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.x,this.tmpVec2.y+this.piecesBoardRect.height,oe.Color.WHITE)}},{key:"renderPiecesBoardCell",value:function(){this.batch.begin();for(var e=0;e<this.gameState.pieces.length;e++)Ie(e,this.piecesBoardRect.width,k.PIECE_BOARD_X,k.PIECE_BOARD_Y,k.PIECE_SIZE,this.tmpVec2),this.renderPiece(this.tmpVec2.x+k.PIECE_SIZE/2,this.tmpVec2.y+k.PIECE_SIZE/2,this.gameState.pieces[e],k.PIECE_DISPLAY_SIZE);this.batch.end()}},{key:"renderPiece",value:function(e,t,n,i){this.getPiecePosition(e-i/2,t-i/2,i,n.isDragging,this.tmpVec2);var r=this.tmpVec2.x,s=this.tmpVec2.y,a=this.pieceTextures[n.pieceIndex];a&&a.draw(this.batch,r,s,i,i)}},{key:"renderClueButtonColumn",value:function(){this.batch.begin();var e=L[this.gameState.level.clueIndex];if(e)for(var t=0;t<e.clueOrders.length;t++){var n=e.clueOrders[t];if(this.gameState.unlockedClues.includes(n)){var i=this.clueButtonTextures[n];i&&i.draw(this.batch,k.CLUE_X,k.CLUE_Y+t*(k.CLUE_HEIGHT+k.CLUE_BOT_GAP),k.CLUE_WIDTH,k.CLUE_HEIGHT)}else this.clueButtonEmptyTexture&&this.clueButtonEmptyTexture.draw(this.batch,k.CLUE_X,k.CLUE_Y+t*(k.CLUE_HEIGHT+k.CLUE_BOT_GAP),k.CLUE_WIDTH,k.CLUE_HEIGHT)}this.batch.end()}},{key:"renderButton",value:function(){this.batch.begin(),this.buttonTexture&&this.buttonTexture.draw(this.batch,k.BUTTON_X,k.BUTTON_Y,k.BUTTON_WIDTH,k.BUTTON_HEIGHT),this.batch.end()}},{key:"render",value:function(){this.shapeRenderer.setProjection(this.camera.combined),this.renderButton(),this.renderClueButtonColumn(),this.renderBoard(),this.renderBoardSourceAndTargets(),this.renderBoardCell(),this.renderPiecesBoardCell()}},{key:"processInput",value:function(){var e=this,t=this.inputHandlingSystem.inputHandler;if(!t.isTouched()){for(var n=0;n<this.gameState.pieces.length;n++){var i=this.gameState.pieces[n],r=T[i.pieceIndex];if(i.isDragging)for(var s=t.getTouchedWorldCoord(),a=function(){if(Ie(o,e.boardRect.width,k.BOARD_X,k.BOARD_Y,k.CELL_SIZE,e.tmpVec2),(0,oe.pointInRect)(s.x,s.y,e.tmpVec2.x,e.tmpVec2.y,k.CELL_SIZE,k.CELL_SIZE)&&"empty"===e.gameState.board[o].type){var t=[o-1,o-k.GRID_COL,o+1,o+k.GRID_COL],a=[];t.forEach((function(t){var n,i=null===(n=e.gameState.board)||void 0===n?void 0:n[t];!i||i&&"empty"===i.type?a.push(void 0):a.push(i.piece)}));for(var u=0;u<a.length;u++){var l=a[u],h=(u+2)%4;if(l){var c=T[l.pieceIndex];if(1===r[u]&&1===c[h]){e.gameState.board[o]={type:"piece",piece:{isDragging:!1,pieceIndex:i.pieceIndex}},e.gameState.pieces[n].isDragging=!1,e.gameState.pieces[n].pieceIndex=Oe(0,T.length);var f=e.checkNewClueUnlocked(),d=e.gameState.unlockedClues.length===L[e.gameState.level.clueIndex].clues.length;(null===f||void 0===f?void 0:f.length)>0&&(d?S.emit(x,{chapter:e.gameState.chapter}):S.emit(M,{chapter:e.gameState.chapter,clueOrder:f[0]}));break}}}return"break"}},o=0;o<k.GRID_COL*k.GRID_ROW;o++){if("break"===a())break}}this.gameState.pieces.map((function(e){return e.isDragging=!1}))}if(this.inputHandlingSystem.justTouched){for(var u=0;u<this.gameState.pieces.length;u++){var l=this.gameState.pieces[u],h=t.getTouchedWorldCoord();if(Ie(u,this.piecesBoardRect.width,k.PIECE_BOARD_X,k.PIECE_BOARD_Y,k.PIECE_SIZE,this.tmpVec2),(0,oe.pointInRect)(h.x,h.y,this.tmpVec2.x,this.tmpVec2.y,k.PIECE_SIZE,k.PIECE_SIZE)){l.isDragging=!0;break}}var c=t.getTouchedWorldCoord();if((0,oe.pointInRect)(c.x,c.y,k.BUTTON_X,k.BUTTON_Y,k.BUTTON_WIDTH,k.BUTTON_HEIGHT))return void S.emit(_);for(var f=L[this.gameState.level.clueIndex],d=0;d<f.clueOrders.length;d++){var v=f.clueOrders[d];if(this.gameState.unlockedClues.includes(v)&&(0,oe.pointInRect)(c.x,c.y,k.CLUE_X,k.CLUE_Y+d*(k.CLUE_HEIGHT+k.CLUE_BOT_GAP),k.CLUE_WIDTH,k.CLUE_HEIGHT))return void S.emit(M,{chapter:this.gameState.chapter,clueOrder:v})}}}},{key:"getPiecePosition",value:function(e,t,n,i,r){if(i){var s=this.inputHandlingSystem.inputHandler.getTouchedWorldCoord();r.set(s.x-n/2,s.y-n/2)}else r.set(e,t)}},{key:"process",value:function(){this.processInput(),this.render()}},{key:"checkNewClueUnlocked",value:function(){var e=this,t=this.gameState.board.findIndex((function(e){return"source"===e.type}));if(t<0)return[];this.graph.forEachLink((function(t){e.graph.removeLink(t)}));var n=[];this.getNeighbors(t,n);for(var i=0;i<n.length;i++){var r=n[i];this.graph.addLink(r[0],r[1],{weight:1})}for(var s=[],a=0;a<this.gameState.level.targetIndexes.length;a++){var o=this.gameState.level.targetIndexes[a],u=this.gameState.board[o];if("target"===u.type){var l=u.clueOrder;if(!this.gameState.unlockedClues.includes(l)){var h=Pe().aStar(this.graph);try{h.find(t,o).length>0&&(this.gameState.unlockedClues.push(l),s.push(l))}catch(c){}}}}return s}},{key:"getNeighbors",value:function(e,t){var n=this,i=[e-1,e-k.GRID_COL,e+1,e+k.GRID_COL],r=T[this.gameState.board[e].piece.pieceIndex],s=[];i.forEach((function(e){var t,i=null===(t=n.gameState.board)||void 0===t?void 0:t[e];!i||i&&"empty"===i.type?s.push({cellIndex:e}):s.push({piece:i.piece,cellIndex:e})}));for(var a=function(){var i=s[o],a=(o+2)%4;if(i.piece){var u=T[i.piece.pieceIndex];1!==r[o]||1!==u[a]||t.find((function(t){return t.includes(e)&&t.includes(i.cellIndex)}))||(t.push([e,i.cellIndex]),n.getNeighbors(i.cellIndex,t))}},o=0;o<s.length;o++)a()}}]),n}(ae.xP),_e=ve(xe.prototype,"shapeRenderer",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=ve(xe.prototype,"camera",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=ve(xe.prototype,"gameState",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=ve(xe.prototype,"inputHandlingSystem",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=ve(xe.prototype,"assetManager",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=ve(xe.prototype,"batch",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe),Fe=function(e){ce(n,e);var t=de(n);function n(e){var i;return y(this,n),(i=t.call(this)).inputHandler=void 0,i.canTriggerJustTouched=!0,i.justTouched=!1,i.inputHandler=new oe.ViewportInputHandler(e),i}return m(n,[{key:"initialized",value:function(){}},{key:"process",value:function(){this.justTouched?this.justTouched=!1:this.inputHandler.isTouched()?this.canTriggerJustTouched&&(this.justTouched=!0,this.canTriggerJustTouched=!1):(this.justTouched=!1,this.canTriggerJustTouched=!0)}}]),n}(ae.xP),Ue=function(){var e=a(r().mark((function e(){var t,n,i,s,a,o,u,h,c,f,d,v,p,g,m,y,b;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,oe.createStage)({wrapperClassName:ue}),n=t.getCanvas(),i=(0,oe.createViewport)(n,k.WORLD_WIDTH,k.WORLD_HEIGHT,{pixelRatio:1,autoUpdate:!0,crop:!1,contextOption:{antialias:!1}}),s=i.getContext(),(a=i.getCamera()).setYDown(!0),(o=new oe.PolygonBatch(s)).setYDown(!0),u=new oe.ShapeRenderer(s),h=new oe.AssetManager(s),e.next=12,h.loadTexture("assets/BG.png","background");case 12:return e.next=14,h.loadAtlas("assets/pando-assets.atlas","atlas");case 14:return e.next=16,h.loadFont("assets/text.fnt","font",!0);case 16:return c=l.CHAPTER_1,f=A[c],d=Ve(c),p={board:d,chapter:c,level:f,pieces:(v=function(){for(var e=[],t=0;t<k.PIECE_BOARD_GRID_COL*k.PIECE_BOARD_GRID_ROW;t++)for(var n=!1,i=function(){var t=Oe(0,T.length);e.find((function(e){return e.pieceIndex===t}))||(e.push({isDragging:!1,pieceIndex:t}),n=!0)};!n;)i();return e})(),unlockedClues:[]},g=new Fe(i),(m=new ae.q3).register("gl",s),m.register("viewport",i),m.register("camera",a),m.register("batch",o),m.register("shapeRenderer",u),m.register("assetManager",h),m.register("gameState",p),m.register("gameState",p),m.register("inputHandlingSystem",g),m.addSystem(new Ne,!1),m.addSystem(g,!0),y=h.getFont("font"),s.clearColor(0,0,0,1),b=(0,oe.createGameLoop)((function(e){var t;s.clear(s.COLOR_BUFFER_BIT),m.setDelta(e),o.setProjection(a.combined),o.begin(),o.draw(h.getTexture("background"),0,0,k.WORLD_WIDTH,k.WORLD_HEIGHT);var n=(null===(t=L[p.level.clueIndex])||void 0===t?void 0:t.title)||"";y&&(y.data.setXYScale(.8),y.data.flipped=!0,y.draw(o,n,0,.09*k.WORLD_HEIGHT,k.WORLD_WIDTH,oe.Align.center)),o.end(),m.processActiveSystem(),m.processPassiveSystem()})),S.addListener(_,(function(){p.board.length=0,p.board=Ve(p.chapter),p.unlockedClues.length=0,p.pieces.length=0,p.pieces=v()})),S.addListener(w,(function(){var e=l.CHAPTER_1;if(p.chapter===l.CHAPTER_1)e=l.CHAPTER_2;else{if(p.chapter!==l.CHAPTER_2)return;e=l.CHAPTER_3}p.chapter=e,p.board.length=0,p.board=Ve(e),p.unlockedClues.length=0,p.level=A[e],p.pieces.length=0,p.pieces=v()})),e.abrupt("return",{dispose:function(){b.stop(),o.dispose(),u.dispose(),h.disposeAll()}});case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(e){for(var t=A[e],n=[],i=0;i<k.GRID_COL*k.GRID_ROW;i++)if(t.sourceIndex===i)n.push({type:"source",piece:{pieceIndex:t.sourcePieceIndex,isDragging:!1}});else if(t.targetIndexes.includes(i)){var r=t.targetIndexes.indexOf(i),s=L[t.clueIndex].clueOrders[r];n.push({type:"target",clueOrder:s,piece:{pieceIndex:t.targetPieceIndexes[r],isDragging:!1}})}else n.push({type:"empty"});return n};var De=function(){var e=u((0,c.useState)(),2),t=e[0],n=e[1];return(0,c.useEffect)((function(){}),[]),(0,c.useEffect)((function(){}),[]),(0,c.useEffect)((function(){return function(){t&&t.dispose()}}),[t]),(0,c.useEffect)((function(){a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue();case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),(0,te.jsx)("div",{className:"wrapper",children:(0,te.jsx)(se,{})})},Be=function(){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight,i=0,r=0,s=getComputedStyle(e).getPropertyValue("--inset-top"),a=getComputedStyle(e).getPropertyValue("--inset-bottom");isNaN(parseFloat(s))||(i=parseFloat(s)),isNaN(parseFloat(a))||(r=parseFloat(a));var o=0;t/n>=b?o=n*b:o=t,e.style.setProperty("--inset-top","".concat(i,"px")),e.style.setProperty("--inset-bottom","".concat(r,"px")),e.style.setProperty("--app-height","".concat(n,"px")),e.style.setProperty("--app-width","".concat(t,"px")),e.style.setProperty("--game-width","".concat(o,"px"))},Ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ze(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}Be(),window.addEventListener("resize",(function(){Be()})),e.createRoot(document.getElementById("root")).render((0,te.jsx)(De,{})),t(),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");console.log(t),Ge?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ze(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ze(t,e)}))}}()}()}();